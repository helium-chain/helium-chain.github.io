<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>redis sortSet | Helium</title>
<meta name="keywords" content="redis">
<meta name="description" content="redis sortSet介绍。">
<meta name="author" content="helium">
<link rel="canonical" href="https://helium-chain.github.io/posts/redis/sortset/">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<meta name="referrer" content="no-referrer-when-downgrade">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://helium-chain.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://helium-chain.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://helium-chain.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://helium-chain.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://helium-chain.github.io/apple-touch-icon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://helium-chain.github.io/posts/redis/sortset/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono-nl.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css" />
    <link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/style.css" />
    <style>
        body {
            font-family: "LXGW WenKai Lite", sans-serif;
            font-family: "LXGW WenKai Screen", sans-serif;
        }
    </style>
</head>
</html>

  

<meta property="og:title" content="redis sortSet" />
<meta property="og:description" content="redis sortSet介绍。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://helium-chain.github.io/posts/redis/sortset/" />
<meta property="og:image" content="https://helium-chain.github.io/favicon-32x32.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-05-09T00:00:00+00:00" /><meta property="og:site_name" content="Helium" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://helium-chain.github.io/favicon-32x32.png" />
<meta name="twitter:title" content="redis sortSet"/>
<meta name="twitter:description" content="redis sortSet介绍。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Article",
      "item": "https://helium-chain.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Redis",
      "item": "https://helium-chain.github.io/posts/redis/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "redis sortSet",
      "item": "https://helium-chain.github.io/posts/redis/sortset/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "redis sortSet",
  "name": "redis sortSet",
  "description": "redis sortSet介绍。",
  "keywords": [
    "redis"
  ],
  "articleBody": " 官方命令地址：https://redis.io/commands/?group=sorted-set sortSet sortedSet是一个可排序的set集合。 SortedSet中的每一个元素都带有一个score属性，可以基于score属性对元素排序，底层的实现是一个跳表（SkipList）加 hash表。 SortedSet具备下列特性：可排序、元素不重复、查询速度快。 因为SortedSet的可排序特性，经常被用来实现排行榜这样的功能。 ZADD 向sortSet添加一个或多个成员，或更新其分数。如果key不存在，则创建该key。\n语法：\nZADD key [NX | XX] [GT | LT] [CH] [INCR] score member [score member ...] XX: 只更新已经存在的元素。不要添加新元素。 NX: 只添加新元素。不要更新已经存在的元素。 LT: 只有当新score小于当前分数时才更新现有元素。这个标志不会阻止添加新元素。 GT: 只有当新score大于当前分数时才更新现有元素。这个标志不会阻止添加新元素。 CH: 将返回值从添加的新元素数修改为更改的元素总数(CH是changed的缩写)。更改的元素是新添加的元素和已经存在的元素更新的分数。因此，在命令行中指定的具有与过去相同分数的元素不会被计算在内。注意:通常’ ZADD ‘的返回值只计算添加的新元素的数量。 INCR: 当指定该选项时，‘ZADD’的行为类似于‘ZINCRBY’。在这种模式下只能指定一个分数-元素对。\n示例： redis\u003e ZADD myzset 1 \"one\" (integer) 1 redis\u003e ZADD myzset 1 \"uno\" (integer) 1 redis\u003e ZADD myzset 2 \"two\" 3 \"three\" (integer) 2 redis\u003e ZRANGE myzset 0 -1 WITHSCORES 1) \"one\" 2) \"1\" 3) \"uno\" 4) \"1\" 5) \"two\" 6) \"2\" 7) \"three\" 8) \"3\" ZCARD 返回已sortSet中成员的数目。\n语法：\nZCARD key 示例： redis\u003e ZADD myzset 1 \"one\" (integer) 1 redis\u003e ZADD myzset 2 \"two\" (integer) 1 redis\u003e ZCARD myzset (integer) 2 ZCOUNT 返回排序集中分数在一定范围内的成员的计数。\n语法：\nZCOUNT key min max 示例： redis\u003e ZADD myzset 1 \"one\" (integer) 1 redis\u003e ZADD myzset 2 \"two\" (integer) 1 redis\u003e ZADD myzset 3 \"three\" (integer) 1 redis\u003e ZCOUNT myzset -inf +inf (integer) 3 redis\u003e ZCOUNT myzset (1 3 (integer) 2 ZDIFF 返回多个排序集之间的差值。\n语法：\nZDIFF numkeys key [key ...] [WITHSCORES] 示例： redis\u003e ZADD zset1 1 \"one\" (integer) 1 redis\u003e ZADD zset1 2 \"two\" (integer) 1 redis\u003e ZADD zset1 3 \"three\" (integer) 1 redis\u003e ZADD zset2 1 \"one\" (integer) 1 redis\u003e ZADD zset2 2 \"two\" (integer) 1 redis\u003e ZDIFF 2 zset1 zset2 1) \"three\" redis\u003e ZDIFF 2 zset1 zset2 WITHSCORES 2) \"three\" 3) \"3\" ZDIFFSTORE 将多个排序集的差值存储在一个键中。\n语法：\nZDIFFSTORE destination numkeys key [key ...] 示例： redis\u003e ZADD zset1 1 \"one\" (integer) 1 redis\u003e ZADD zset1 2 \"two\" (integer) 1 redis\u003e ZADD zset1 3 \"three\" (integer) 1 redis\u003e ZADD zset2 1 \"one\" (integer) 1 redis\u003e ZADD zset2 2 \"two\" (integer) 1 redis\u003e ZDIFFSTORE out 2 zset1 zset2 (integer) 1 redis\u003e ZRANGE out 0 -1 WITHSCORES 1) \"three\" 2) \"3\" ZINCRBY 增加已sortSet中成员的分数。\n语法：\nZINCRBY key increment member 示例： redis\u003e ZADD myzset 1 \"one\" (integer) 1 redis\u003e ZADD myzset 2 \"two\" (integer) 1 redis\u003e ZINCRBY myzset 2 \"one\" \"3\" redis\u003e ZRANGE myzset 0 -1 WITHSCORES 1) \"two\" 2) \"2\" 3) \"one\" 4) \"3\" ZINTER 返回多个排序集的相交。\n语法：\nZINTER numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE \u003cSUM | MIN | MAX\u003e] [WITHSCORES] 示例： redis\u003e ZADD zset1 1 \"one\" (integer) 1 redis\u003e ZADD zset1 2 \"two\" (integer) 1 redis\u003e ZADD zset2 1 \"one\" (integer) 1 redis\u003e ZADD zset2 2 \"two\" (integer) 1 redis\u003e ZADD zset2 3 \"three\" (integer) 1 redis\u003e ZINTER 2 zset1 zset2 1) \"one\" 2) \"two\" redis\u003e ZINTER 2 zset1 zset2 WITHSCORES 3) \"one\" 4) \"2\" 5) \"two\" 6) \"4\" ZINTERCARD 返回多个排序集相交的成员数。\n语法：\nZINTERCARD numkeys key [key ...] [LIMIT limit] 示例： redis\u003e ZADD zset1 1 \"one\" (integer) 1 redis\u003e ZADD zset1 2 \"two\" (integer) 1 redis\u003e ZADD zset2 1 \"one\" (integer) 1 redis\u003e ZADD zset2 2 \"two\" (integer) 1 redis\u003e ZADD zset2 3 \"three\" (integer) 1 redis\u003e ZINTER 2 zset1 zset2 1) \"one\" 2) \"two\" redis\u003e ZINTERCARD 2 zset1 zset2 (integer) 2 redis\u003e ZINTERCARD 2 zset1 zset2 LIMIT 1 (integer) 1 ZINTERSTORE 将多个排序集的相交存储在一个键中。\n语法：\nZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE \u003cSUM | MIN | MAX\u003e] 语法： redis\u003e ZADD zset1 1 \"one\" (integer) 1 redis\u003e ZADD zset1 2 \"two\" (integer) 1 redis\u003e ZADD zset2 1 \"one\" (integer) 1 redis\u003e ZADD zset2 2 \"two\" (integer) 1 redis\u003e ZADD zset2 3 \"three\" (integer) 1 redis\u003e ZINTERSTORE out 2 zset1 zset2 WEIGHTS 2 3 (integer) 2 redis\u003e ZRANGE out 0 -1 WITHSCORES 1) \"one\" 2) \"5\" 3) \"two\" 4) \"10\" ZLEXCOUNT 返回字典顺序范围内已sortSet中的成员数。\n语法：\nZLEXCOUNT key min max 示例： redis\u003e ZADD myzset 0 a 0 b 0 c 0 d 0 e (integer) 5 redis\u003e ZADD myzset 0 f 0 g (integer) 2 redis\u003e ZLEXCOUNT myzset - + (integer) 7 redis\u003e ZLEXCOUNT myzset [b [f (integer) 5 ZMPOP 从一个或多个已排序的集合中返回删除后得分最高或最低的成员。如果弹出最后一个成员，则删除排序集。\n语法：\nZMPOP numkeys key [key ...] \u003cMIN | MAX\u003e [COUNT count] 示例： redis\u003e ZMPOP 1 notsuchkey MIN (error) object of type 'NoneType' has no len() redis\u003e ZADD myzset 1 \"one\" 2 \"two\" 3 \"three\" (integer) 3 redis\u003e ZMPOP 1 myzset MIN 1) \"myzset\" 2) 1) 1) \"one\" 1) \"1\" redis\u003e ZRANGE myzset 0 -1 WITHSCORES 3) \"two\" 4) \"2\" 5) \"three\" 6) \"3\" redis\u003e ZMPOP 1 myzset MAX COUNT 10 7) \"myzset\" 8) 1) 1) \"three\" 2) \"3\" 2) 1) \"two\" 1) \"2\" redis\u003e ZADD myzset2 4 \"four\" 5 \"five\" 6 \"six\" (integer) 3 redis\u003e ZMPOP 2 myzset myzset2 MIN COUNT 10 9) \"myzset2\" 10) 1) 1) \"four\" 1) \"4\" 1) 1) \"five\" 1) \"5\" 2) 1) \"six\" 1) \"6\" redis\u003e ZRANGE myzset 0 -1 WITHSCORES (empty array) redis\u003e ZMPOP 2 myzset myzset2 MAX COUNT 10 (error) object of type 'NoneType' has no len() redis\u003e ZRANGE myzset2 0 -1 WITHSCORES (empty array) redis\u003e EXISTS myzset myzset2 (integer) 0 ZMSCORE 返回已sortSet中一个或多个成员的分数。\n语法：\nZMSCORE key member [member ...] 示例： redis\u003e ZADD myzset 1 \"one\" (integer) 1 redis\u003e ZADD myzset 2 \"two\" (integer) 1 redis\u003e ZMSCORE myzset \"one\" \"two\" \"nofield\" 1) \"1\" 2) \"2\" 3) (nil) ZPOPMAX 从已排序的集合中删除得分最高的成员后返回它们。如果弹出最后一个成员，则删除排序集。 ZPOPMAX key [count] 示例： redis\u003e ZADD myzset 1 \"one\" (integer) 1 redis\u003e ZADD myzset 2 \"two\" (integer) 1 redis\u003e ZADD myzset 3 \"three\" (integer) 1 redis\u003e ZPOPMAX myzset 1) \"three\" 2) \"3\" ZPOPMIN 从已排序的集合中删除得分最低的成员后返回它们。如果弹出最后一个成员，则删除排序集。\n语法：\nZPOPMIN key [count] 示例： redis\u003e ZADD myzset 1 \"one\" (integer) 1 redis\u003e ZADD myzset 2 \"two\" (integer) 1 redis\u003e ZADD myzset 3 \"three\" (integer) 1 redis\u003e ZPOPMIN myzset 1) \"one\" 2) \"1\" ZRANDMEMBER 从已排序的集合中返回一个或多个随机成员。\n语法：\nZRANDMEMBER key [count [WITHSCORES]] 示例： redis\u003e ZADD dadi 1 uno 2 due 3 tre 4 quattro 5 cinque 6 sei (integer) 6 redis\u003e ZRANDMEMBER dadi \"quattro\" redis\u003e ZRANDMEMBER dadi \"due\" redis\u003e ZRANDMEMBER dadi -5 WITHSCORES 1) \"uno\" 2) \"1\" 3) \"tre\" 4) \"3\" 5) \"quattro\" 6) \"4\" 7) \"cinque\" 8) \"5\" 9) \"cinque\" 10) \"5\" ZRANGE 返回索引范围内已sortSet中的成员。\n语法：\nZRANGE key start stop [BYSCORE | BYLEX] [REV] [LIMIT offset count] [WITHSCORES] 示例： redis\u003e ZADD myzset 1 \"one\" 2 \"two\" 3 \"three\" (integer) 3 redis\u003e ZRANGE myzset 0 -1 1) \"one\" 2) \"two\" 3) \"three\" redis\u003e ZRANGE myzset 2 3 4) \"three\" redis\u003e ZRANGE myzset -2 -1 5) \"two\" 6) \"three\" ZRANGEBYLEX 返回字典顺序范围内已sortSet中的成员。\n语法：\nZRANGEBYLEX key min max [LIMIT offset count] 示例： redis\u003e ZADD myzset 0 a 0 b 0 c 0 d 0 e 0 f 0 g (integer) 7 redis\u003e ZRANGEBYLEX myzset - [c 1) \"a\" 2) \"b\" 3) \"c\" redis\u003e ZRANGEBYLEX myzset - (c 4) \"a\" 5) \"b\" redis\u003e ZRANGEBYLEX myzset [aaa (g 6) \"b\" 7) \"c\" 8) \"d\" 9) \"e\" 10) \"f\" ZRANGEBYSCORE Returns members in a sorted set within a range of scores. ZRANGESTORE tores a range of members from sorted set in a key. ZRANK Returns the index of a member in a sorted set ordered by ascending scores. ZREM Removes one or more members from a sorted set. Deletes the sorted set if all members were removed. ZREMRANGEBYLEX Removes members in a sorted set within a lexicographical range. Deletes the sorted set if all members were removed. ZREMRANGEBYRANK Removes members in a sorted set within a range of indexes. Deletes the sorted set if all members were removed. ZREMRANGEBYSCORE Removes members in a sorted set within a range of scores. Deletes the sorted set if all members were removed. ZREVRANGE Returns members in a sorted set within a range of indexes in reverse order. ZREVRANGEBYLEX Returns members in a sorted set within a lexicographical range in reverse order. ZREVRANGEBYSCORE Returns members in a sorted set within a range of scores in reverse order. ZREVRANK Returns the index of a member in a sorted set ordered by descending scores. ZSCAN Iterates over members and scores of a sorted set. ZSCORE Returns the score of a member in a sorted set. ZUNION Returns the union of multiple sorted sets. ZUNIONSTORE Stores the union of multiple sorted sets in a key. BZMPOP Removes and returns a member by score from one or more sorted sets. Blocks until a member is available otherwise. Deletes the sorted set if the last element was popped. BZPOPMAX Removes and returns the member with the highest score from one or more sorted sets. Blocks until a member available otherwise. Deletes the sorted set if the last element was popped. BZPOPMIN Removes and returns the member with the lowest score from one or more sorted sets. Blocks until a member is available otherwise. Deletes the sorted set if the last element was popped. ",
  "wordCount" : "1351",
  "inLanguage": "zh",
  "image": "https://helium-chain.github.io/favicon-32x32.png","datePublished": "2023-05-09T00:00:00Z",
  "dateModified": "2023-05-09T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "helium"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://helium-chain.github.io/posts/redis/sortset/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Helium",
    "logo": {
      "@type": "ImageObject",
      "url": "https://helium-chain.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://helium-chain.github.io/" accesskey="h" title="Blog (Alt + H)">
                <img src="https://helium-chain.github.io/helium.png" alt="" aria-label="logo"
                    height="35">Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://helium-chain.github.io/" title="主页">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://helium-chain.github.io/posts" title="文章">
                    <span>Article</span>
                </a>
            </li>
            <li>
                <a href="https://helium-chain.github.io/archives" title="时间轴">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://helium-chain.github.io/tags/" title="标签">
                    <span>Tag</span>
                </a>
            </li>
            <li>
                <a href="https://helium-chain.github.io/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://helium-chain.github.io/support" title="打赏">
                    <span>🫶Help</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">


<article class="post" autonumbering>
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://helium-chain.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://helium-chain.github.io/posts/">Article</a>&nbsp;»&nbsp;<a href="https://helium-chain.github.io/posts/redis/">Redis</a></div>
    <h1 class="post-title entry-hint-parent">
      redis sortSet
    </h1>
    <div class="post-meta">










<span class="x-post-meta-item"><svg t="1720837714681" class="icon" viewBox="0 0 1084 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7520" width="200" height="200"><path d="M123.47509 1023.984942a123.565437 123.565437 0 0 1-123.505206-123.32451V243.863302A123.565437 123.565437 0 0 1 123.47509 120.568908h171.630374V26.06529a26.050232 26.050232 0 0 1 52.070349 0v94.503618h377.592848V26.06529a26.050232 26.050232 0 0 1 52.100464 0v94.503618h183.797189A123.565437 123.565437 0 0 1 1084.171519 243.863302v656.79713A123.565437 123.565437 0 0 1 960.666314 1023.984942H123.47509z m-71.404741-123.32451A71.434857 71.434857 0 0 0 123.47509 971.974825h837.191224a71.434857 71.434857 0 0 0 71.404741-71.314393V442.326922l-946.361273-3.824716a25.598494 25.598494 0 0 1-5.84248-0.692665l-27.796953-6.444798v469.295689zM123.47509 172.579025a71.434857 71.434857 0 0 0-71.404741 71.284277v149.736133l27.796953-6.444797a26.080348 26.080348 0 0 1 5.902712-0.662549l946.301041 3.824716V243.863302a71.404741 71.404741 0 0 0-71.404741-71.284277h-180.183284l-6.173754 12.859479a26.200812 26.200812 0 0 1-23.490383 14.786895 26.261043 26.261043 0 0 1-23.520499-14.786895l-6.173754-12.859479H350.819834l-6.173754 12.859479a26.200812 26.200812 0 0 1-23.490383 14.786895 26.230928 26.230928 0 0 1-23.520499-14.786895l-6.173755-12.859479H123.47509z m156.150814 578.827128a26.050232 26.050232 0 0 1-26.050232-25.990001c0-14.335157 11.68496-26.020116 26.050232-26.020116h521.697312c14.365273 0 26.050232 11.68496 26.050233 26.020116a26.050232 26.050232 0 0 1-26.050233 25.990001H279.625904z" fill="#3D3F42" p-id="7521"></path></svg><span>2023-05-09</span></span>&nbsp;<span class="x-post-meta-item"><svg t="1720839329181" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14106" width="200" height="200"><path d="M699.270662 190.485379c-0.411369 0-0.821715 0.011256-1.227967 0.032746H507.034407a23.041786 23.041786 0 0 0-1.221828-0.031723c-12.779048 0-23.140023 10.359952-23.140023 23.139 0 12.781094 10.360975 23.141046 23.140023 23.141046v0.032746h193.458083v-0.032746c12.780071 0 23.141046-10.359952 23.141047-23.141046 0-12.780071-10.360975-23.140023-23.141047-23.140023zM979.215516 724.005508c0-142.090159-115.186416-257.277598-257.277598-257.277598-72.245418 0-137.532353 29.777187-184.262654 77.725223l45.868677 31.474852c36.227086-33.873482 84.882226-54.617945 138.393977-54.617945 111.945605 0 202.696492 90.750887 202.696492 202.695468h-43.01263l70.331835 104.289228 70.331835-104.289228H979.215516z" fill="" p-id="14107"></path><path d="M748.885664 588.843132c0-14.881942-12.06785-26.945699-26.947746-26.945698-14.883989 0-26.947745 12.063757-26.947745 26.945698v135.164423c0 14.879895 12.063757 26.945699 26.947745 26.945699h107.786889c14.881942 0 26.945699-12.063757 26.945698-26.945699s-12.063757-26.945699-26.945698-26.945699h-80.839143V588.843132zM721.937918 926.702c-111.947651 0-202.696492-90.74884-202.696492-202.696492 0-0.144286 0.004093-0.285502 0.004094-0.429788h43.004443l-70.330812-104.289228-70.331835 104.289228h43.075051c0 0.144286-0.00307 0.285502-0.00307 0.429788 0 142.091182 115.187439 257.279644 257.278621 257.279645 72.241324 0 137.530306-29.77821 184.260607-77.727269l-45.86663-31.474852c-36.227086 33.873482-84.884272 54.618968-138.393977 54.618968zM694.633039 423.38066c-1.354857-11.487635-11.120268-20.400632-22.972201-20.400632H206.362486c-12.780071 0-23.140023 10.359952-23.140023 23.138999 0 12.781094 10.359952 23.141046 23.140023 23.141047H596.949252c30.209022-13.81668 63.104223-22.76754 97.683787-25.879414zM438.548616 623.143333H206.362486c-12.780071 0-23.140023 10.358929-23.140023 23.140023 0 12.780071 10.359952 23.140023 23.140023 23.140023h219.956598a298.463626 298.463626 0 0 1 12.229532-46.280046zM506.934123 513.062192H206.362486c-12.780071 0-23.140023 10.359952-23.140023 23.139 0 12.781094 10.359952 23.140023 23.140023 23.140023H469.936487a302.241672 302.241672 0 0 1 36.997636-46.279023z" fill="" p-id="14108"></path><path d="M442.765661 835.277778a298.531164 298.531164 0 0 1-14.365173-46.150087H146.542052v-0.065491c-33.036417 0-59.81941-26.78197-59.81941-59.819411V329.36031h704.907545v100.905154a298.561863 298.561863 0 0 1 46.150086 14.996552V194.619536h-0.162706c0-53.422723-43.307342-96.728018-96.730065-96.728018h-68.89409V84.418668c0-33.037441-26.782993-59.81941-59.81941-59.81941v-0.361227h-18.87079v0.032745c-33.038464 0-59.820434 26.78197-59.820433 59.819411 0 0.109494 0.008186 0.218988 0.008186 0.328481h-0.339738v13.47285H345.203648V84.418668c0-33.037441-26.782993-59.81941-59.819411-59.81941v-0.361227h-18.872836v0.032745c-33.036417 0-59.81941 26.78197-59.81941 59.819411 0 0.109494 0.007163 0.218988 0.008186 0.328481h-0.339737v13.47285h-69.189826c-53.4217 0-96.729042 43.306318-96.729041 96.728018 0 1.701758 0.045025 3.39226 0.132006 5.071505v533.785166a98.051153 98.051153 0 0 0-0.132006 5.071506c0 53.4217 43.307342 96.728018 96.729041 96.728018v0.001023h305.595047zM86.723665 204.056466c0-33.037441 26.782993-59.81941 59.819411-59.819411 0.044002 0 0.086981 0.00307 0.130983 0.00307v-0.068561h105.968473V94.874811h0.032746a22.807449 22.807449 0 0 1-0.032746-1.215688c0-12.779048 10.360975-23.140023 23.140023-23.140023s23.140023 10.360975 23.140023 23.140023c0 0.408299-0.010233 0.812505-0.031722 1.215688h0.031722v49.297776h280.508696V94.874811h0.032745a22.807449 22.807449 0 0 1-0.032745-1.215688c0-12.779048 10.361999-23.140023 23.140023-23.140023 12.780071 0 23.141046 10.360975 23.141046 23.140023 0 0.408299-0.011256 0.812505-0.032746 1.215688h0.032746v49.297776h106.10048v0.065492c33.035394 0 59.818387 26.780947 59.818387 59.81941h0.130983V283.080264H86.723665v-79.023798z" fill="" p-id="14109"></path></svg><span>2023-05-09</span></span>&nbsp;<span class="x-post-meta-item"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"
     stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select: text;">
    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" style="user-select: text;"></path>
    <polyline points="14 2 14 8 20 8" style="user-select: text;"></polyline>
    <line x1="16" y1="13" x2="8" y2="13" style="user-select: text;"></line>
    <line x1="16" y1="17" x2="8" y2="17" style="user-select: text;"></line>
    <polyline points="10 9 9 9 8 9" style="user-select: text;"></polyline>
</svg><span>1351字</span></span>&nbsp;<span class="x-post-meta-item"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"
     stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <circle cx="12" cy="12" r="9"></circle>
    <polyline points="12 7 12 12 15 15"></polyline>
</svg><span>7分钟</span></span>&nbsp;<span class="x-post-meta-item"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"
     stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <circle cx="12" cy="7" r="4"></circle>
    <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
</svg><span>helium</span></span>
      <span class="x-post-meta-item">
        &nbsp;<svg t="1720840393161" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18680" width="200" height="200"><path d="M995.125144 559.61812l-415.998603-415.998602A52.986489 52.986489 0 0 0 541.413335 127.99957H338.847348c-3.166656-26.559911-9.286635-51.046495-17.999939-71.333094C299.734146 7.333309 271.154242 0 256.00096 0c-13.939953 0-40.439864 6.339979-61.259794 48.806503-10.473298 21.366595-17.946606 48.966502-21.573261 79.193067H53.334974a53.393154 53.393154 0 0 0-53.333154 53.333154v360.078791a52.986489 52.986489 0 0 0 15.619948 37.713206l415.998602 415.998603a53.333154 53.333154 0 0 0 75.426413 0l26.286579-26.293245 26.286578 26.293245a53.426487 53.426487 0 0 0 16.719944 11.333295 21.333262 21.333262 0 0 0 36.079879 11.293295l382.705381-382.705381a53.399821 53.399821 0 0 0 0-75.426413z m-762.070774-491.998347C241.494342 50.373164 250.667645 42.666523 256.00096 42.666523c5.99998 0 16.573278 9.639968 25.646581 30.806564 6.493312 15.159949 11.333295 33.999886 14.146619 54.526483H216.16776c3.206656-23.419921 9.013303-44.359851 16.88661-60.41313z m243.819181 897.330319a10.666631 10.666631 0 0 1-15.079949 0l-415.998603-415.998603A10.573298 10.573298 0 0 1 42.668343 541.411515V181.332724a10.666631 10.666631 0 0 1 10.666631-10.666631h245.332509c0 47.853173-10.373298 92.15969-27.066575 115.632945-5.926647 8.326639-16.566611 14.186619-22.306592 16.113279C204.041135 314.752276 170.667913 356.218803 170.667913 405.331972c0 58.813136 47.853173 106.666308 106.666309 106.666308s106.666308-47.853173 106.666308-106.666308c0-47.086508-30.666564-87.139707-73.079754-101.246327C330.060711 272.705751 341.334007 223.692582 341.334007 170.666093h72.079758a10.573298 10.573298 0 0 1 7.539974 3.126656l415.998603 415.998603a10.666631 10.666631 0 0 1 0 15.079949zM341.334007 405.331972a63.999785 63.999785 0 1 1-63.999785-63.999785 64.073118 64.073118 0 0 1 63.999785 63.999785z m263.539114 559.61812a10.666631 10.666631 0 0 1-15.079949 0L563.499927 938.663513l303.625647-303.61898a53.399821 53.399821 0 0 0 0-75.426413L478.16688 170.666093h63.246455a10.573298 10.573298 0 0 1 7.539974 3.126656l415.998603 415.998603c0.239999 0.239999 0.466665 0.486665 0.666664 0.746664l0.086667 0.106666a10.666631 10.666631 0 0 1 0 13.373289l-0.086667 0.106666c-0.213333 0.259999-0.439999 0.506665-0.666664 0.746664z" fill="#5C5C66" p-id="18681"></path></svg>
        <ul class="post-tags-meta" style="display: inline-block;font-size: 14px;">
            <a href="https://helium-chain.github.io/tags/redis/" target="_blank" rel="noopener">Redis</a>
        </ul>
      </span>
      
      <span id="busuanzi_container_page_pv" class="x-post-meta-item">
        &nbsp;<svg t="1720844685710" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="27237" width="200" height="200"><path d="M739.754667 574.08c-121.386667 45.610667-208.469333 169.813333-208.64 316.16 0 33.408 4.693333 65.493333 13.141333 95.914667H94.122667c-26.453333-43.52-41.685333-91.946667-41.685334-143.189334 0-185.173333 192.896-335.104 430.805334-335.104 96.256 0 184.832 24.746667 256.512 66.218667z m-280.490667-114.986667a214.869333 214.869333 0 0 1-214.869333-215.04A215.04 215.04 0 0 1 459.264 28.842667a215.04 215.04 0 0 1 215.04 215.210666 215.04 215.04 0 0 1-215.04 215.04zM974.506667 641.28c9.856 0 17.834667 7.466667 17.834666 16.64v59.989333c-0.341333 8.789333-7.850667 15.786667-17.28 16.085334-9.856 0.341333-18.176-6.826667-18.517333-16.085334v-20.053333l-99.114667 91.093333-0.256 0.256a18.474667 18.474667 0 0 1-14.848 4.352h-0.768a18.176 18.176 0 0 1-9.344-4.608l-0.938666-0.981333-85.930667-80.042667-123.562667 115.072a18.773333 18.773333 0 0 1-25.216 0 15.786667 15.786667 0 0 1 0-23.466666l136.149334-126.848 0.725333-0.597334a18.645333 18.645333 0 0 1 24.362667 0.512l87.253333 81.237334 86.058667-79.232h-21.248c-9.386667-0.298667-16.938667-7.338667-17.28-16.085334-0.341333-9.173333 7.381333-16.896 17.28-17.237333h64.64z m-367.146667 240h48.128c8.874667 0 16.042667 7.168 16.042667 16.042667v72.192a16.042667 16.042667 0 0 1-16.042667 16.042666h-48.128a16.042667 16.042667 0 0 1-16.042667-16.042666v-72.192c0-8.874667 7.210667-16.042667 16.042667-16.042667z m110.805333-106.666667h48.128c8.874667 0 16.042667 7.168 16.042667 16.042667v178.858667a16.042667 16.042667 0 0 1-16.042667 16.042666h-48.128a16.042667 16.042667 0 0 1-16.042666-16.042666v-178.858667c0-8.874667 7.168-16.042667 16.042666-16.042667z m106.538667 80h48.128c8.874667 0 16.042667 7.168 16.042667 16.042667v99.413333a16.042667 16.042667 0 0 1-16.042667 16.042667H824.746667a16.042667 16.042667 0 0 1-16.042667-16.042667v-99.413333c0-8.874667 7.168-16.042667 16.042667-16.042667z m110.165333-80h48.128c8.874667 0 16.042667 7.168 16.042667 16.042667v179.413333a16.042667 16.042667 0 0 1-16.042667 16.042667h-48.128a16.042667 16.042667 0 0 1-16.042666-16.042667v-179.413333c0-8.874667 7.210667-16.042667 16.042666-16.042667z" fill="#999999" p-id="27238"></path></svg>
        <span id="busuanzi_value_page_pv"></span>
      </span>

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#sortset" aria-label="sortSet">sortSet</a><ul>
                            
                    <li>
                        <a href="#zadd" aria-label="ZADD">ZADD</a></li>
                    <li>
                        <a href="#zcard" aria-label="ZCARD">ZCARD</a></li>
                    <li>
                        <a href="#zcount" aria-label="ZCOUNT">ZCOUNT</a></li>
                    <li>
                        <a href="#zdiff" aria-label="ZDIFF">ZDIFF</a></li>
                    <li>
                        <a href="#zdiffstore" aria-label="ZDIFFSTORE">ZDIFFSTORE</a></li>
                    <li>
                        <a href="#zincrby" aria-label="ZINCRBY">ZINCRBY</a></li>
                    <li>
                        <a href="#zinter" aria-label="ZINTER">ZINTER</a></li>
                    <li>
                        <a href="#zintercard" aria-label="ZINTERCARD">ZINTERCARD</a></li>
                    <li>
                        <a href="#zinterstore" aria-label="ZINTERSTORE">ZINTERSTORE</a></li>
                    <li>
                        <a href="#zlexcount" aria-label="ZLEXCOUNT">ZLEXCOUNT</a></li>
                    <li>
                        <a href="#zmpop" aria-label="ZMPOP">ZMPOP</a></li>
                    <li>
                        <a href="#zmscore" aria-label="ZMSCORE">ZMSCORE</a></li>
                    <li>
                        <a href="#zpopmax" aria-label="ZPOPMAX">ZPOPMAX</a></li>
                    <li>
                        <a href="#zpopmin" aria-label="ZPOPMIN">ZPOPMIN</a></li>
                    <li>
                        <a href="#zrandmember" aria-label="ZRANDMEMBER">ZRANDMEMBER</a></li>
                    <li>
                        <a href="#zrange" aria-label="ZRANGE">ZRANGE</a></li>
                    <li>
                        <a href="#zrangebylex" aria-label="ZRANGEBYLEX">ZRANGEBYLEX</a></li>
                    <li>
                        <a href="#zrangebyscore" aria-label="ZRANGEBYSCORE">ZRANGEBYSCORE</a></li>
                    <li>
                        <a href="#zrangestore" aria-label="ZRANGESTORE">ZRANGESTORE</a></li>
                    <li>
                        <a href="#zrank" aria-label="ZRANK">ZRANK</a></li>
                    <li>
                        <a href="#zrem" aria-label="ZREM">ZREM</a></li>
                    <li>
                        <a href="#zremrangebylex" aria-label="ZREMRANGEBYLEX">ZREMRANGEBYLEX</a></li>
                    <li>
                        <a href="#zremrangebyrank" aria-label="ZREMRANGEBYRANK">ZREMRANGEBYRANK</a></li>
                    <li>
                        <a href="#zremrangebyscore" aria-label="ZREMRANGEBYSCORE">ZREMRANGEBYSCORE</a></li>
                    <li>
                        <a href="#zrevrange" aria-label="ZREVRANGE">ZREVRANGE</a></li>
                    <li>
                        <a href="#zrevrangebylex" aria-label="ZREVRANGEBYLEX">ZREVRANGEBYLEX</a></li>
                    <li>
                        <a href="#zrevrangebyscore" aria-label="ZREVRANGEBYSCORE">ZREVRANGEBYSCORE</a></li>
                    <li>
                        <a href="#zrevrank" aria-label="ZREVRANK">ZREVRANK</a></li>
                    <li>
                        <a href="#zscan" aria-label="ZSCAN">ZSCAN</a></li>
                    <li>
                        <a href="#zscore" aria-label="ZSCORE">ZSCORE</a></li>
                    <li>
                        <a href="#zunion" aria-label="ZUNION">ZUNION</a></li>
                    <li>
                        <a href="#zunionstore" aria-label="ZUNIONSTORE">ZUNIONSTORE</a></li>
                    <li>
                        <a href="#bzmpop" aria-label="BZMPOP">BZMPOP</a></li>
                    <li>
                        <a href="#bzpopmax" aria-label="BZPOPMAX">BZPOPMAX</a></li>
                    <li>
                        <a href="#bzpopmin" aria-label="BZPOPMIN">BZPOPMIN</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><ul>
<li>官方命令地址：<a href="https://redis.io/commands/?group=sorted-set" target="_blank" rel="noopener">https://redis.io/commands/?group=sorted-set</a></li>
</ul>
<h2 id="sortset">sortSet<a hidden class="anchor" aria-hidden="true" href="#sortset">#</a></h2>
<ol>
<li>sortedSet是一个可排序的set集合。</li>
<li>SortedSet中的每一个元素都带有一个score属性，可以基于score属性对元素排序，底层的实现是一个跳表（SkipList）加 hash表。</li>
<li>SortedSet具备下列特性：可排序、元素不重复、查询速度快。</li>
<li>因为SortedSet的可排序特性，经常被用来实现排行榜这样的功能。</li>
</ol>
<p><img loading="lazy" src="../images/redis-021.png" alt=""  />
</p>
<h3 id="zadd">ZADD<a hidden class="anchor" aria-hidden="true" href="#zadd">#</a></h3>
<ol>
<li>
<p>向sortSet添加一个或多个成员，或更新其分数。如果key不存在，则创建该key。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZADD key </span><span class="err">[</span><span class="k">NX </span><span class="err">|</span> <span class="k">XX</span><span class="err">]</span> <span class="err">[</span><span class="k">GT </span><span class="err">|</span> <span class="k">LT</span><span class="err">]</span> <span class="err">[</span><span class="k">CH</span><span class="err">]</span> <span class="err">[</span><span class="k">INCR</span><span class="err">]</span> <span class="k">score member </span><span class="err">[</span><span class="k">score member </span><span class="err">...]</span>
</span></span></code></pre></div><p><strong>XX</strong>: 只更新已经存在的元素。不要添加新元素。
<strong>NX</strong>: 只添加新元素。不要更新已经存在的元素。
<strong>LT</strong>: 只有当新score<strong>小于当前分数</strong>时才更新现有元素。这个标志不会阻止添加新元素。
<strong>GT</strong>: 只有当新score<strong>大于当前分数</strong>时才更新现有元素。这个标志不会阻止添加新元素。
<strong>CH</strong>: 将返回值从添加的新元素数修改为更改的元素总数(CH是<em>changed</em>的缩写)。更改的元素是<strong>新添加的元素</strong>和已经存在的元素<strong>更新的分数</strong>。因此，在命令行中指定的具有与过去相同分数的元素不会被计算在内。注意:通常&rsquo; ZADD &lsquo;的返回值只计算添加的新元素的数量。
<strong>INCR</strong>: 当指定该选项时，&lsquo;ZADD&rsquo;的行为类似于<a href="https://redis.io/commands/zincrby" target="_blank" rel="noopener">&lsquo;ZINCRBY&rsquo;</a>。在这种模式下只能指定一个分数-元素对。</p>
<ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;uno&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">2</span> <span class="s2">&#34;two&#34;</span> <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE myzset <span class="m">0</span> -1 WITHSCORES
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;1&#34;</span>
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;uno&#34;</span>
</span></span><span class="line"><span class="cl">4<span class="o">)</span> <span class="s2">&#34;1&#34;</span>
</span></span><span class="line"><span class="cl">5<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">6<span class="o">)</span> <span class="s2">&#34;2&#34;</span>
</span></span><span class="line"><span class="cl">7<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">8<span class="o">)</span> <span class="s2">&#34;3&#34;</span>
</span></span></code></pre></div><h3 id="zcard">ZCARD<a hidden class="anchor" aria-hidden="true" href="#zcard">#</a></h3>
<ol>
<li>
<p>返回已sortSet中成员的数目。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZCARD key</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZCARD myzset
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">2</span>
</span></span></code></pre></div><h3 id="zcount">ZCOUNT<a hidden class="anchor" aria-hidden="true" href="#zcount">#</a></h3>
<ol>
<li>
<p>返回排序集中分数在一定范围内的成员的计数。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZCOUNT key min max</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZCOUNT myzset -inf +inf
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">3</span>
</span></span><span class="line"><span class="cl">redis&gt; ZCOUNT myzset <span class="o">(</span><span class="m">1</span> <span class="m">3</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">2</span>
</span></span></code></pre></div><h3 id="zdiff">ZDIFF<a hidden class="anchor" aria-hidden="true" href="#zdiff">#</a></h3>
<ol>
<li>
<p>返回多个排序集之间的差值。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZDIFF numkeys key </span><span class="err">[</span><span class="k">key </span><span class="err">...]</span> <span class="err">[</span><span class="k">WITHSCORES</span><span class="err">]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZDIFF <span class="m">2</span> zset1 zset2
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZDIFF <span class="m">2</span> zset1 zset2 WITHSCORES
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;3&#34;</span>
</span></span></code></pre></div><h3 id="zdiffstore">ZDIFFSTORE<a hidden class="anchor" aria-hidden="true" href="#zdiffstore">#</a></h3>
<ol>
<li>
<p>将多个排序集的差值存储在一个键中。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZDIFFSTORE destination numkeys key </span><span class="err">[</span><span class="k">key </span><span class="err">...]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZDIFFSTORE out <span class="m">2</span> zset1 zset2
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE out <span class="m">0</span> -1 WITHSCORES
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;3&#34;</span>
</span></span></code></pre></div><h3 id="zincrby">ZINCRBY<a hidden class="anchor" aria-hidden="true" href="#zincrby">#</a></h3>
<ol>
<li>
<p>增加已sortSet中成员的分数。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZINCRBY key increment member</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZINCRBY myzset <span class="m">2</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;3&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE myzset <span class="m">0</span> -1 WITHSCORES
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;2&#34;</span>
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">4<span class="o">)</span> <span class="s2">&#34;3&#34;</span>
</span></span></code></pre></div><h3 id="zinter">ZINTER<a hidden class="anchor" aria-hidden="true" href="#zinter">#</a></h3>
<ol>
<li>
<p>返回多个排序集的相交。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZINTER numkeys key </span><span class="err">[</span><span class="k">key </span><span class="err">...]</span> <span class="err">[</span><span class="k">WEIGHTS weight </span><span class="err">[</span><span class="k">weight </span><span class="err">...]]</span>
</span></span><span class="line"><span class="cl">    <span class="err">[</span><span class="k">AGGREGATE </span><span class="err">&lt;</span><span class="k">SUM </span><span class="err">|</span> <span class="k">MIN </span><span class="err">|</span> <span class="k">MAX</span><span class="err">&gt;]</span> <span class="err">[</span><span class="k">WITHSCORES</span><span class="err">]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZINTER <span class="m">2</span> zset1 zset2
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZINTER <span class="m">2</span> zset1 zset2 WITHSCORES
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">4<span class="o">)</span> <span class="s2">&#34;2&#34;</span>
</span></span><span class="line"><span class="cl">5<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">6<span class="o">)</span> <span class="s2">&#34;4&#34;</span>
</span></span></code></pre></div><h3 id="zintercard">ZINTERCARD<a hidden class="anchor" aria-hidden="true" href="#zintercard">#</a></h3>
<ol>
<li>
<p>返回多个排序集相交的成员数。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZINTERCARD numkeys key </span><span class="err">[</span><span class="k">key </span><span class="err">...]</span> <span class="err">[</span><span class="k">LIMIT limit</span><span class="err">]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZINTER <span class="m">2</span> zset1 zset2
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZINTERCARD <span class="m">2</span> zset1 zset2
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">redis&gt; ZINTERCARD <span class="m">2</span> zset1 zset2 LIMIT <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span></code></pre></div><h3 id="zinterstore">ZINTERSTORE<a hidden class="anchor" aria-hidden="true" href="#zinterstore">#</a></h3>
<ol>
<li>
<p>将多个排序集的相交存储在一个键中。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZINTERSTORE destination numkeys key </span><span class="err">[</span><span class="k">key </span><span class="err">...]</span> <span class="err">[</span><span class="k">WEIGHTS weight</span>
</span></span><span class="line"><span class="cl">    <span class="err">[</span><span class="k">weight </span><span class="err">...]]</span> <span class="err">[</span><span class="k">AGGREGATE </span><span class="err">&lt;</span><span class="k">SUM </span><span class="err">|</span> <span class="k">MIN </span><span class="err">|</span> <span class="k">MAX</span><span class="err">&gt;]</span>
</span></span></code></pre></div><ol start="3">
<li>语法：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset1 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD zset2 <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZINTERSTORE out <span class="m">2</span> zset1 zset2 WEIGHTS <span class="m">2</span> <span class="m">3</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE out <span class="m">0</span> -1 WITHSCORES
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;5&#34;</span>
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">4<span class="o">)</span> <span class="s2">&#34;10&#34;</span>
</span></span></code></pre></div><h3 id="zlexcount">ZLEXCOUNT<a hidden class="anchor" aria-hidden="true" href="#zlexcount">#</a></h3>
<ol>
<li>
<p>返回字典顺序范围内已sortSet中的成员数。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZLEXCOUNT key min max</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">0</span> a <span class="m">0</span> b <span class="m">0</span> c <span class="m">0</span> d <span class="m">0</span> e
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">5</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">0</span> f <span class="m">0</span> g
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">redis&gt; ZLEXCOUNT myzset - +
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">7</span>
</span></span><span class="line"><span class="cl">redis&gt; ZLEXCOUNT myzset <span class="o">[</span>b <span class="o">[</span>f
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">5</span>
</span></span></code></pre></div><h3 id="zmpop">ZMPOP<a hidden class="anchor" aria-hidden="true" href="#zmpop">#</a></h3>
<ol>
<li>
<p>从一个或多个已排序的集合中返回删除后得分最高或最低的成员。如果弹出最后一个成员，则删除排序集。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZMPOP numkeys key </span><span class="err">[</span><span class="k">key </span><span class="err">...]</span> <span class="err">&lt;</span><span class="k">MIN </span><span class="err">|</span> <span class="k">MAX</span><span class="err">&gt;</span> <span class="err">[</span><span class="k">COUNT count</span><span class="err">]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZMPOP <span class="m">1</span> notsuchkey MIN
</span></span><span class="line"><span class="cl"><span class="o">(</span>error<span class="o">)</span> object of <span class="nb">type</span> <span class="s1">&#39;NoneType&#39;</span> has no len<span class="o">()</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span> <span class="m">2</span> <span class="s2">&#34;two&#34;</span> <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">3</span>
</span></span><span class="line"><span class="cl">redis&gt; ZMPOP <span class="m">1</span> myzset MIN
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;myzset&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">        1<span class="o">)</span> <span class="s2">&#34;1&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE myzset <span class="m">0</span> -1 WITHSCORES
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">4<span class="o">)</span> <span class="s2">&#34;2&#34;</span>
</span></span><span class="line"><span class="cl">5<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">6<span class="o">)</span> <span class="s2">&#34;3&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZMPOP <span class="m">1</span> myzset MAX COUNT <span class="m">10</span>
</span></span><span class="line"><span class="cl">7<span class="o">)</span> <span class="s2">&#34;myzset&#34;</span>
</span></span><span class="line"><span class="cl">8<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">        2<span class="o">)</span> <span class="s2">&#34;3&#34;</span>
</span></span><span class="line"><span class="cl">    2<span class="o">)</span> 1<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">        1<span class="o">)</span> <span class="s2">&#34;2&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset2 <span class="m">4</span> <span class="s2">&#34;four&#34;</span> <span class="m">5</span> <span class="s2">&#34;five&#34;</span> <span class="m">6</span> <span class="s2">&#34;six&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">3</span>
</span></span><span class="line"><span class="cl">redis&gt; ZMPOP <span class="m">2</span> myzset myzset2 MIN COUNT <span class="m">10</span>
</span></span><span class="line"><span class="cl">9<span class="o">)</span> <span class="s2">&#34;myzset2&#34;</span>
</span></span><span class="line"><span class="cl">10<span class="o">)</span> 1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">&#34;four&#34;</span>
</span></span><span class="line"><span class="cl">        1<span class="o">)</span> <span class="s2">&#34;4&#34;</span>
</span></span><span class="line"><span class="cl">    1<span class="o">)</span> 1<span class="o">)</span> <span class="s2">&#34;five&#34;</span>
</span></span><span class="line"><span class="cl">        1<span class="o">)</span> <span class="s2">&#34;5&#34;</span>
</span></span><span class="line"><span class="cl">    2<span class="o">)</span> 1<span class="o">)</span> <span class="s2">&#34;six&#34;</span>
</span></span><span class="line"><span class="cl">        1<span class="o">)</span> <span class="s2">&#34;6&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE myzset <span class="m">0</span> -1 WITHSCORES
</span></span><span class="line"><span class="cl"><span class="o">(</span>empty array<span class="o">)</span>
</span></span><span class="line"><span class="cl">redis&gt; ZMPOP <span class="m">2</span> myzset myzset2 MAX COUNT <span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>error<span class="o">)</span> object of <span class="nb">type</span> <span class="s1">&#39;NoneType&#39;</span> has no len<span class="o">()</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE myzset2 <span class="m">0</span> -1 WITHSCORES
</span></span><span class="line"><span class="cl"><span class="o">(</span>empty array<span class="o">)</span>
</span></span><span class="line"><span class="cl">redis&gt; EXISTS myzset myzset2
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">0</span>
</span></span></code></pre></div><h3 id="zmscore">ZMSCORE<a hidden class="anchor" aria-hidden="true" href="#zmscore">#</a></h3>
<ol>
<li>
<p>返回已sortSet中一个或多个成员的分数。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZMSCORE key member </span><span class="err">[</span><span class="k">member </span><span class="err">...]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZMSCORE myzset <span class="s2">&#34;one&#34;</span> <span class="s2">&#34;two&#34;</span> <span class="s2">&#34;nofield&#34;</span>
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;1&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;2&#34;</span>
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="o">(</span>nil<span class="o">)</span>
</span></span></code></pre></div><h3 id="zpopmax">ZPOPMAX<a hidden class="anchor" aria-hidden="true" href="#zpopmax">#</a></h3>
<ol>
<li>从已排序的集合中删除得分最高的成员后返回它们。如果弹出最后一个成员，则删除排序集。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZPOPMAX key </span><span class="err">[</span><span class="k">count</span><span class="err">]</span>
</span></span></code></pre></div><ol start="2">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZPOPMAX myzset
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;3&#34;</span>
</span></span></code></pre></div><h3 id="zpopmin">ZPOPMIN<a hidden class="anchor" aria-hidden="true" href="#zpopmin">#</a></h3>
<ol>
<li>
<p>从已排序的集合中删除得分最低的成员后返回它们。如果弹出最后一个成员，则删除排序集。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZPOPMIN key </span><span class="err">[</span><span class="k">count</span><span class="err">]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">2</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">redis&gt; ZPOPMIN myzset
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;1&#34;</span>
</span></span></code></pre></div><h3 id="zrandmember">ZRANDMEMBER<a hidden class="anchor" aria-hidden="true" href="#zrandmember">#</a></h3>
<ol>
<li>
<p>从已排序的集合中返回一个或多个随机成员。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZRANDMEMBER key </span><span class="err">[</span><span class="k">count </span><span class="err">[</span><span class="k">WITHSCORES</span><span class="err">]]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD dadi <span class="m">1</span> uno <span class="m">2</span> due <span class="m">3</span> tre <span class="m">4</span> quattro <span class="m">5</span> cinque <span class="m">6</span> sei
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">6</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANDMEMBER dadi
</span></span><span class="line"><span class="cl"><span class="s2">&#34;quattro&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANDMEMBER dadi
</span></span><span class="line"><span class="cl"><span class="s2">&#34;due&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANDMEMBER dadi -5 WITHSCORES
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;uno&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;1&#34;</span>
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;tre&#34;</span>
</span></span><span class="line"><span class="cl">4<span class="o">)</span> <span class="s2">&#34;3&#34;</span>
</span></span><span class="line"><span class="cl">5<span class="o">)</span> <span class="s2">&#34;quattro&#34;</span>
</span></span><span class="line"><span class="cl">6<span class="o">)</span> <span class="s2">&#34;4&#34;</span>
</span></span><span class="line"><span class="cl">7<span class="o">)</span> <span class="s2">&#34;cinque&#34;</span>
</span></span><span class="line"><span class="cl">8<span class="o">)</span> <span class="s2">&#34;5&#34;</span>
</span></span><span class="line"><span class="cl">9<span class="o">)</span> <span class="s2">&#34;cinque&#34;</span>
</span></span><span class="line"><span class="cl">10<span class="o">)</span> <span class="s2">&#34;5&#34;</span>
</span></span></code></pre></div><h3 id="zrange">ZRANGE<a hidden class="anchor" aria-hidden="true" href="#zrange">#</a></h3>
<ol>
<li>
<p>返回索引范围内已sortSet中的成员。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZRANGE key start stop </span><span class="err">[</span><span class="k">BYSCORE </span><span class="err">|</span> <span class="k">BYLEX</span><span class="err">]</span> <span class="err">[</span><span class="k">REV</span><span class="err">]</span> <span class="err">[</span><span class="k">LIMIT offset count</span><span class="err">]</span> <span class="err">[</span><span class="k">WITHSCORES</span><span class="err">]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">1</span> <span class="s2">&#34;one&#34;</span> <span class="m">2</span> <span class="s2">&#34;two&#34;</span> <span class="m">3</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">3</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE myzset <span class="m">0</span> -1
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;one&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE myzset <span class="m">2</span> <span class="m">3</span>
</span></span><span class="line"><span class="cl">4<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGE myzset -2 -1
</span></span><span class="line"><span class="cl">5<span class="o">)</span> <span class="s2">&#34;two&#34;</span>
</span></span><span class="line"><span class="cl">6<span class="o">)</span> <span class="s2">&#34;three&#34;</span>
</span></span></code></pre></div><h3 id="zrangebylex">ZRANGEBYLEX<a hidden class="anchor" aria-hidden="true" href="#zrangebylex">#</a></h3>
<ol>
<li>
<p>返回字典顺序范围内已sortSet中的成员。</p>
</li>
<li>
<p>语法：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">ZRANGEBYLEX key min max </span><span class="err">[</span><span class="k">LIMIT offset count</span><span class="err">]</span>
</span></span></code></pre></div><ol start="3">
<li>示例：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">redis&gt; ZADD myzset <span class="m">0</span> a <span class="m">0</span> b <span class="m">0</span> c <span class="m">0</span> d <span class="m">0</span> e <span class="m">0</span> f <span class="m">0</span> g
</span></span><span class="line"><span class="cl"><span class="o">(</span>integer<span class="o">)</span> <span class="m">7</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGEBYLEX myzset - <span class="o">[</span>c
</span></span><span class="line"><span class="cl">1<span class="o">)</span> <span class="s2">&#34;a&#34;</span>
</span></span><span class="line"><span class="cl">2<span class="o">)</span> <span class="s2">&#34;b&#34;</span>
</span></span><span class="line"><span class="cl">3<span class="o">)</span> <span class="s2">&#34;c&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGEBYLEX myzset - <span class="o">(</span>c
</span></span><span class="line"><span class="cl">4<span class="o">)</span> <span class="s2">&#34;a&#34;</span>
</span></span><span class="line"><span class="cl">5<span class="o">)</span> <span class="s2">&#34;b&#34;</span>
</span></span><span class="line"><span class="cl">redis&gt; ZRANGEBYLEX myzset <span class="o">[</span>aaa <span class="o">(</span>g
</span></span><span class="line"><span class="cl">6<span class="o">)</span> <span class="s2">&#34;b&#34;</span>
</span></span><span class="line"><span class="cl">7<span class="o">)</span> <span class="s2">&#34;c&#34;</span>
</span></span><span class="line"><span class="cl">8<span class="o">)</span> <span class="s2">&#34;d&#34;</span>
</span></span><span class="line"><span class="cl">9<span class="o">)</span> <span class="s2">&#34;e&#34;</span>
</span></span><span class="line"><span class="cl">10<span class="o">)</span> <span class="s2">&#34;f&#34;</span>
</span></span></code></pre></div><h3 id="zrangebyscore">ZRANGEBYSCORE<a hidden class="anchor" aria-hidden="true" href="#zrangebyscore">#</a></h3>
<ol>
<li>Returns members in a sorted set within a range of scores.</li>
</ol>
<h3 id="zrangestore">ZRANGESTORE<a hidden class="anchor" aria-hidden="true" href="#zrangestore">#</a></h3>
<ol>
<li>tores a range of members from sorted set in a key.</li>
</ol>
<h3 id="zrank">ZRANK<a hidden class="anchor" aria-hidden="true" href="#zrank">#</a></h3>
<ol>
<li>Returns the index of a member in a sorted set ordered by ascending scores.</li>
</ol>
<h3 id="zrem">ZREM<a hidden class="anchor" aria-hidden="true" href="#zrem">#</a></h3>
<ol>
<li>Removes one or more members from a sorted set. Deletes the sorted set if all members were removed.</li>
</ol>
<h3 id="zremrangebylex">ZREMRANGEBYLEX<a hidden class="anchor" aria-hidden="true" href="#zremrangebylex">#</a></h3>
<ol>
<li>Removes members in a sorted set within a lexicographical range. Deletes the sorted set if all members were removed.</li>
</ol>
<h3 id="zremrangebyrank">ZREMRANGEBYRANK<a hidden class="anchor" aria-hidden="true" href="#zremrangebyrank">#</a></h3>
<ol>
<li>Removes members in a sorted set within a range of indexes. Deletes the sorted set if all members were removed.</li>
</ol>
<h3 id="zremrangebyscore">ZREMRANGEBYSCORE<a hidden class="anchor" aria-hidden="true" href="#zremrangebyscore">#</a></h3>
<ol>
<li>Removes members in a sorted set within a range of scores. Deletes the sorted set if all members were removed.</li>
</ol>
<h3 id="zrevrange">ZREVRANGE<a hidden class="anchor" aria-hidden="true" href="#zrevrange">#</a></h3>
<ol>
<li>Returns members in a sorted set within a range of indexes in reverse order.</li>
</ol>
<h3 id="zrevrangebylex">ZREVRANGEBYLEX<a hidden class="anchor" aria-hidden="true" href="#zrevrangebylex">#</a></h3>
<ol>
<li>Returns members in a sorted set within a lexicographical range in reverse order.</li>
</ol>
<h3 id="zrevrangebyscore">ZREVRANGEBYSCORE<a hidden class="anchor" aria-hidden="true" href="#zrevrangebyscore">#</a></h3>
<ol>
<li>Returns members in a sorted set within a range of scores in reverse order.</li>
</ol>
<h3 id="zrevrank">ZREVRANK<a hidden class="anchor" aria-hidden="true" href="#zrevrank">#</a></h3>
<ol>
<li>Returns the index of a member in a sorted set ordered by descending scores.</li>
</ol>
<h3 id="zscan">ZSCAN<a hidden class="anchor" aria-hidden="true" href="#zscan">#</a></h3>
<ol>
<li>Iterates over members and scores of a sorted set.</li>
</ol>
<h3 id="zscore">ZSCORE<a hidden class="anchor" aria-hidden="true" href="#zscore">#</a></h3>
<ol>
<li>Returns the score of a member in a sorted set.</li>
</ol>
<h3 id="zunion">ZUNION<a hidden class="anchor" aria-hidden="true" href="#zunion">#</a></h3>
<ol>
<li>Returns the union of multiple sorted sets.</li>
</ol>
<h3 id="zunionstore">ZUNIONSTORE<a hidden class="anchor" aria-hidden="true" href="#zunionstore">#</a></h3>
<ol>
<li>Stores the union of multiple sorted sets in a key.</li>
</ol>
<h3 id="bzmpop">BZMPOP<a hidden class="anchor" aria-hidden="true" href="#bzmpop">#</a></h3>
<ol>
<li>Removes and returns a member by score from one or more sorted sets. Blocks until a member is available otherwise. Deletes the sorted set if the last element was popped.</li>
</ol>
<h3 id="bzpopmax">BZPOPMAX<a hidden class="anchor" aria-hidden="true" href="#bzpopmax">#</a></h3>
<ol>
<li>Removes and returns the member with the highest score from one or more sorted sets. Blocks until a member available otherwise.  Deletes the sorted set if the last element was popped.</li>
</ol>
<h3 id="bzpopmin">BZPOPMIN<a hidden class="anchor" aria-hidden="true" href="#bzpopmin">#</a></h3>
<ol>
<li>Removes and returns the member with the lowest score from one or more sorted sets. Blocks until a member is available otherwise. Deletes the sorted set if the last element was popped.</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://helium-chain.github.io/tags/redis/">Redis</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://helium-chain.github.io/posts/redis/set/">
    <span class="title">« 上一页</span>
    <br>
    <span>redis set</span>
  </a>
  <a class="next" href="https://helium-chain.github.io/posts/redis/bitmap/">
    <span class="title">下一页 »</span>
    <br>
    <span>redis bitmap</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    
    <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv">
        本站总访问量<span id="busuanzi_value_site_pv"></span>次
    </span>
    <span id="busuanzi_container_site_uv">
        本站访客数<span id="busuanzi_value_site_uv"></span>人次
    </span>
    </div>
        <span>Copyright © 2024 蜀ICP备2024091074号 <a href="#">heliu's blog</a>. All rights reserved</span>  
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'Copy';

        function copyingDone() {
            copybutton.innerHTML = 'Done';
            setTimeout(() => {
                copybutton.innerHTML = 'Copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>

<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>客户端命令 | Helium</title>
<meta name="keywords" content="pgsql">
<meta name="description" content="💥本文章相关postgreSQL版本14.4">
<meta name="author" content="helium">
<link rel="canonical" href="https://heliu.site/posts/postgresql/client/">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<meta name="referrer" content="no-referrer-when-downgrade">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://heliu.site/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://heliu.site/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://heliu.site/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://heliu.site/apple-touch-icon.png">
<link rel="mask-icon" href="https://heliu.site/apple-touch-icon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://heliu.site/posts/postgresql/client/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono-nl.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css" />
    <link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/style.css" />
    <style>
        body {
            font-family: "LXGW WenKai Lite", sans-serif;
            font-family: "LXGW WenKai Screen", sans-serif;
        }
    </style>
</head>
</html>

  

<meta property="og:title" content="客户端命令" />
<meta property="og:description" content="💥本文章相关postgreSQL版本14.4" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://heliu.site/posts/postgresql/client/" />
<meta property="og:image" content="https://heliu.site/favicon-32x32.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-09-22T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-09-22T00:00:00+00:00" /><meta property="og:site_name" content="Helium" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://heliu.site/favicon-32x32.png" />
<meta name="twitter:title" content="客户端命令"/>
<meta name="twitter:description" content="💥本文章相关postgreSQL版本14.4"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Article",
      "item": "https://heliu.site/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "PostgreSQL",
      "item": "https://heliu.site/posts/postgresql/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "客户端命令",
      "item": "https://heliu.site/posts/postgresql/client/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "客户端命令",
  "name": "客户端命令",
  "description": "💥本文章相关postgreSQL版本14.4",
  "keywords": [
    "pgsql"
  ],
  "articleBody": "psql 命令 执行psql -?或者psql --help命令可以获取运行 psql 工具的帮助： psql is the PostgreSQL interactive terminal. Usage: psql [OPTION]... [DBNAME [USERNAME]] General options: -c, --command=COMMAND run only single command (SQL or internal) and exit -d, --dbname=DBNAME database name to connect to (default: \"root\") -f, --file=FILENAME execute commands from file, then exit -l, --list list available databases, then exit -v, --set=, --variable=NAME=VALUE set psql variable NAME to VALUE (e.g., -v ON_ERROR_STOP=1) -V, --version output version information, then exit -X, --no-psqlrc do not read startup file (~/.psqlrc) -1 (\"one\"), --single-transaction execute as a single transaction (if non-interactive) -?, --help[=options] show this help, then exit --help=commands list backslash commands, then exit --help=variables list special variables, then exit Input and output options: -a, --echo-all echo all input from script -b, --echo-errors echo failed commands -e, --echo-queries echo commands sent to server -E, --echo-hidden display queries that internal commands generate -L, --log-file=FILENAME send session log to file -n, --no-readline disable enhanced command line editing (readline) -o, --output=FILENAME send query results to file (or |pipe) -q, --quiet run quietly (no messages, only query output) -s, --single-step single-step mode (confirm each query) -S, --single-line single-line mode (end of line terminates SQL command) Output format options: -A, --no-align unaligned table output mode --csv CSV (Comma-Separated Values) table output mode -F, --field-separator=STRING field separator for unaligned output (default: \"|\") -H, --html HTML table output mode -P, --pset=VAR[=ARG] set printing option VAR to ARG (see \\pset command) -R, --record-separator=STRING record separator for unaligned output (default: newline) -t, --tuples-only print rows only -T, --table-attr=TEXT set HTML table tag attributes (e.g., width, border) -x, --expanded turn on expanded table output -z, --field-separator-zero set field separator for unaligned output to zero byte -0, --record-separator-zero set record separator for unaligned output to zero byte Connection options: -h, --host=HOSTNAME database server host or socket directory (default: \"local socket\") -p, --port=PORT database server port (default: \"5432\") -U, --username=USERNAME database user name (default: \"root\") -w, --no-password never prompt for password -W, --password force password prompt (should happen automatically) For more information, type \"\\?\" (for internal commands) or \"\\help\" (for SQL commands) from within psql, or consult the psql section in the PostgreSQL documentation. Report bugs to \u003cpgsql-bugs@lists.postgresql.org\u003e. PostgreSQL home page: \u003chttps://www.postgresql.org/\u003e 属性详解 基本用法 DBNAME：要连接的数据库名称。如果省略，默认数据库是postgres。 USERNAME：连接数据库的用户名。如果省略，默认用户是postgres。 psql [OPTION]... [DBNAME [USERNAME]] 通用选项\n-c, –command=COMMAND：只运行指定的SQL或内部命令，然后退出。 -d, –dbname=DBNAME：指定要连接的数据库名称。 -f, –file=FILENAME：从文件中执行命令，然后退出。 -l, –list：列出所有可用的数据库，然后退出。 -v, –set=, –variable=NAME=VALUE：设置psql变量NAME的值为VALUE。 -V, –version：显示版本信息，然后退出。 -X, –no-psqlrc：不读取启动文件（~/.psqlrc）。 -1 (“one”), –single-transaction：如果非交互式，则执行作为一个单一的事务。 -?, –help[=options]：显示帮助信息，然后退出。 –help=commands：列出反斜杠命令，然后退出。 –help=variables：列出特殊变量，然后退出。 输入和输出选项\n-A, –no-align：未对齐的表输出模式。 –csv：CSV（逗号分隔值）表输出模式。 -F, –field-separator=STRING：未对齐输出的字段分隔符（默认：“|”）。 -H, –html：HTML表输出模式。 -P, –pset=VAR[=ARG]：设置打印选项VAR为ARG（请参阅\\pset命令）。 -R, –record-separator=STRING：未对齐输出的记录分隔符（默认：换行符）。 -t, –tuples-only：仅打印行。 -T, –table-attr=TEXT：设置HTML表标签属性（例如，宽度，边框）。 -x, –expanded：开启扩展表输出。 -z, –field-separator-zero：设置未对齐输出的字段分隔符为零字节。 -0, –record-separator-zero：设置未对齐输出的记录分隔符为零字节。 连接选项\n-h, –host=HOSTNAME：数据库服务器的主机名或套接字目录。 -p, –port=PORT：数据库服务器的端口。 -U, –username=USERNAME：数据库用户名。 -w, –no-password：从不提示密码。 -W, –password：强制密码提示（应该自动发生）。 使用示例 连接到默认数据库和用户 这将连接到默认数据库（通常是postgres）和默认用户（通常是postgres）。 $ psql 连接到特定数据库和用户 这将连接到名为mydatabase的数据库，并使用用户username登录。 $ psql -d mydatabase -U username 执行单个命令 这将连接到名为mydatabase的数据库，使用用户username登录，并执行一个SQL查询。 $ psql -d mydatabase -U username -c \"SELECT * FROM mytable;\" 执行多个命令 这将连接到名为mydatabase的数据库，使用用户username登录，并从文件myscript.sql中执行多个SQL命令。 $ psql -d mydatabase -U username -f myscript.sql 列出所有数据库 这将列出所有可用的数据库，然后退出。 $ psql -U postgres -l 设置变量 这将连接到名为mydatabase的数据库，使用用户username登录，并设置psql变量ON_ERROR_STOP的值为1。 $ psql -d mydatabase -U username -v ON_ERROR_STOP=1 安静模式 这将连接到名为mydatabase的数据库，使用用户username登录，并以安静模式运行（不显示消息，只显示查询输出）。 $ psql -d mydatabase -U username -q 单步模式 这将连接到名为mydatabase的数据库，使用用户username登录，并以单步模式运行（每次执行查询时都会提示确认）。 $ psql -d mydatabase -U username -s 单行模式 这将连接到名为mydatabase的数据库，使用用户username登录，并以单行模式运行（换行符终止SQL命令）。 $ psql -d mydatabase -U username -S 元命令 在PostgreSQL的命令行工具psql中，元命令是指以反斜线（\\）开头的命令，它们允许用户更高效、便捷地管理数据库。（通过\\?查看使用文档） —————- 元命令 —————- 说明 \\? 或 \\help 当你不确定某个元命令的具体用法时，可以使用\\?或\\help命令来获取帮助信息 \\l 或 \\list 当你需要列出所有可用的数据库时，可以使用这个命令 \\encoding 查看或设置字符集编码，这对于确保数据在不同字符集之间正确转换很重要 \\password [username] 用于修改用户密码，这对于数据库的安全性至关重要 \\x 以列显示的开关，执行一次为打开，再执行一次为关闭，这对于查看大量数据时调整显示方式很有用 \\timing on/off 设置是否显示执行时长，这对于监控查询性能很有帮助 \\set AUTOCOMMIT on/off 打开或关闭自动提交功能，这对于控制事务的提交很有用 \\conninfo 显示连接信息，这对于诊断连接问题很有帮助 ! [command] 执行shell命令，这对于需要与外部工具交互的情况很有用 \\i filename 执行指定文件中的SQL语句，这对于批量执行SQL脚本很有用 \\d 查看当前数据库下的所有表、视图和序列，这对于快速了解数据库结构很有用 \\dt 只查看数据库中的所有表，这对于快速访问特定类型的数据库对象很有用 \\du 查看数据库角色信息，这对于管理数据库角色很有用 \\db 查看表空间列表，这对于管理数据库存储很有用 \\gexec 将当前查询缓冲区发送到服务器，然后将查询输出（如果有的话）的每一行的每一列都要作为要执行的SQL语句处理，这对于自动化执行SQL语句很有用 连接数据库 使用 postgres 用户连接到本机 127.0.0.1 端口 5432 的 shoping 数据库。 $ psql -h localhost -p 5432 -U postgres -d shoping -W 使用字符串或URI连接。 $ psql \"host=localhost user=postgres password=123456 port=5432 dbname=shoping\" $ psql postgresql://localhost:5432/shoping?user=postgres —————- 连接元命令 —————- 说明 \\c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo} 连接新数据库(当前为“postgres”) \\conninfo 显示当前连接信息 \\encoding [ENCODING] 显示或设置客户端编码 \\password [USERNAME] 安全修改用户密码 查看当前连接信息 成功建立连接之后，可以使用元命令\\conninfo查看当前连接信息。 当你需要了解当前连接的详细信息，比如数据库名称、用户名、主机和端口等，可以使用这个命令。 postgres=# \\conninfo You are connected to database \"shoping\" as user \"postgres\" on host \"localhost\" (address \"::1\") at port \"5432\". 切换数据库连接 \\c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo} 使用元命令\\c可以重新连接数据库：\n连接到新的数据库。你可以指定数据库名称（DBNAME）、用户名（USER）、主机（HOST）、端口（PORT）或者使用conninfo参数显示当前连接信息。 如果你想要连接到一个新的数据库，或者想要查看当前连接的详细信息，可以使用这个命令。 连接到默认数据库（这将连接到默认数据库）。\npostgres=# \\c You are now connected to database \"postgres\" as user \"postgres\". 连接到特定数据库（这将连接到名为mydatabase的数据库）。 shoping=# \\c postgres You are now connected to database \"postgres\" as user \"postgres\". 切换用户 tony。 postgres=# \\c - tony Password for user tony: 查看/设置客户端编码 通过\\encoding [ENCODING]命令可以查看或者设置客户端的编码格式。例如： 查看客户端编码： postgres=# \\encoding UTF8 设置和护短编码： postgres=# \\encoding gbk postgres=# \\encoding GBK 修改用户密码 使用\\password [username]命令可以安全地修改指定用户的密码，默认为修改当前用户密码。例如： postgres=# \\password tony Enter new password for user \"tony\": Enter it again: 查看帮助 psql 提供了关于该工具的命令、选项、变量配置以及 SQL 语句的帮助信息。 帮助元命令 说明 \\? [commands] 显示反斜杠commands的帮助 \\? options 显示关于PSQL命令行选项的帮助 \\? variables 显示对特殊变量的帮助 \\h [NAME] SQL命令的语法帮助，*表示所有命令 psql 命令帮助 使用\\?或者\\? commands命令可以获得所有反斜线命令的帮助。 该命令的结果和psql --help=commands的输出相同。 postgres=# \\? General \\copyright show PostgreSQL usage and distribution terms \\crosstabview [COLUMNS] execute query and display results in crosstab \\errverbose show most recent error message at maximum verbosity \\g [(OPTIONS)] [FILE] execute query (and send results to file or |pipe); \\g with no arguments is equivalent to a semicolon \\gdesc describe result of query, without executing it \\gexec execute query, then execute each value in its result \\gset [PREFIX] execute query and store results in psql variables \\gx [(OPTIONS)] [FILE] as \\g, but forces expanded output mode \\q quit psql \\watch [SEC] execute query every SEC seconds Help \\? [commands] show help on backslash commands \\? options show help on psql command-line options \\? variables show help on special variables \\h [NAME] help on syntax of SQL commands, * for all commands Query Buffer \\e [FILE] [LINE] edit the query buffer (or file) with external editor \\ef [FUNCNAME [LINE]] edit function definition with external editor \\ev [VIEWNAME [LINE]] edit view definition with external editor \\p show the contents of the query buffer \\r reset (clear) the query buffer \\s [FILE] display history or save it to file \\w FILE write query buffer to file Input/Output \\copy ... perform SQL COPY with data stream to the client host \\echo [-n] [STRING] write string to standard output (-n for no newline) \\i FILE execute commands from file \\ir FILE as \\i, but relative to location of current script \\o [FILE] send all query results to file or |pipe \\qecho [-n] [STRING] write string to \\o output stream (-n for no newline) \\warn [-n] [STRING] write string to standard error (-n for no newline) Conditional \\if EXPR begin conditional block \\elif EXPR alternative within current conditional block \\else final alternative within current conditional block \\endif end conditional block Informational (options: S = show system objects, + = additional detail) \\d[S+] list tables, views, and sequences \\d[S+] NAME describe table, view, sequence, or index \\da[S] [PATTERN] list aggregates \\dA[+] [PATTERN] list access methods \\dAc[+] [AMPTRN [TYPEPTRN]] list operator classes \\dAf[+] [AMPTRN [TYPEPTRN]] list operator families \\dAo[+] [AMPTRN [OPFPTRN]] list operators of operator families \\dAp[+] [AMPTRN [OPFPTRN]] list support functions of operator families \\db[+] [PATTERN] list tablespaces \\dc[S+] [PATTERN] list conversions \\dC[+] [PATTERN] list casts \\dd[S] [PATTERN] show object descriptions not displayed elsewhere \\dD[S+] [PATTERN] list domains \\ddp [PATTERN] list default privileges \\dE[S+] [PATTERN] list foreign tables \\des[+] [PATTERN] list foreign servers \\det[+] [PATTERN] list foreign tables \\deu[+] [PATTERN] list user mappings \\dew[+] [PATTERN] list foreign-data wrappers \\df[anptw][S+] [FUNCPTRN [TYPEPTRN ...]] list [only agg/normal/procedure/trigger/window] functions \\dF[+] [PATTERN] list text search configurations \\dFd[+] [PATTERN] list text search dictionaries \\dFp[+] [PATTERN] list text search parsers \\dFt[+] [PATTERN] list text search templates \\dg[S+] [PATTERN] list roles \\di[S+] [PATTERN] list indexes \\dl list large objects, same as \\lo_list \\dL[S+] [PATTERN] list procedural languages \\dm[S+] [PATTERN] list materialized views \\dn[S+] [PATTERN] list schemas \\do[S+] [OPPTRN [TYPEPTRN [TYPEPTRN]]] list operators \\dO[S+] [PATTERN] list collations \\dp [PATTERN] list table, view, and sequence access privileges \\dP[itn+] [PATTERN] list [only index/table] partitioned relations [n=nested] \\drds [ROLEPTRN [DBPTRN]] list per-database role settings \\dRp[+] [PATTERN] list replication publications \\dRs[+] [PATTERN] list replication subscriptions \\ds[S+] [PATTERN] list sequences \\dt[S+] [PATTERN] list tables \\dT[S+] [PATTERN] list data types \\du[S+] [PATTERN] list roles \\dv[S+] [PATTERN] list views \\dx[+] [PATTERN] list extensions \\dX [PATTERN] list extended statistics \\dy[+] [PATTERN] list event triggers \\l[+] [PATTERN] list databases \\sf[+] FUNCNAME show a function's definition \\sv[+] VIEWNAME show a view's definition \\z [PATTERN] same as \\dp Formatting \\a toggle between unaligned and aligned output mode \\C [STRING] set table title, or unset if none \\f [STRING] show or set field separator for unaligned query output \\H toggle HTML output mode (currently off) \\pset [NAME [VALUE]] set table output option (border|columns|csv_fieldsep|expanded|fieldsep| fieldsep_zero|footer|format|linestyle|null| numericlocale|pager|pager_min_lines|recordsep| recordsep_zero|tableattr|title|tuples_only| unicode_border_linestyle|unicode_column_linestyle| unicode_header_linestyle) \\t [on|off] show only rows (currently off) \\T [STRING] set HTML tag attributes, or unset if none \\x [on|off|auto] toggle expanded output (currently off) Connection \\c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo} connect to new database (currently \"postgres\") \\conninfo display information about current connection \\encoding [ENCODING] show or set client encoding \\password [USERNAME] securely change the password for a user Operating System \\cd [DIR] change the current working directory \\setenv NAME [VALUE] set or unset environment variable \\timing [on|off] toggle timing of commands (currently off) \\! [COMMAND] execute command in shell or start interactive shell Variables \\prompt [TEXT] NAME prompt user to set internal variable \\set [NAME [VALUE]] set internal variable, or list all if no parameters \\unset NAME unset (delete) internal variable Large Objects \\lo_export LOBOID FILE \\lo_import FILE [COMMENT] \\lo_list \\lo_unlink LOBOID large object operations psql 命令行选项帮助 输入\\? options命令可以获得运行 psql 时的命令行选项相关的帮助： 该命令的结果和上文中的psql -?或者psql --help的输出相同。 postgres=# \\? options psql is the PostgreSQL interactive terminal. Usage: psql [OPTION]... [DBNAME [USERNAME]] General options: -c, --command=COMMAND run only single command (SQL or internal) and exit -d, --dbname=DBNAME database name to connect to (default: \"root\") -f, --file=FILENAME execute commands from file, then exit -l, --list list available databases, then exit -v, --set=, --variable=NAME=VALUE set psql variable NAME to VALUE (e.g., -v ON_ERROR_STOP=1) -V, --version output version information, then exit -X, --no-psqlrc do not read startup file (~/.psqlrc) -1 (\"one\"), --single-transaction execute as a single transaction (if non-interactive) -?, --help[=options] show this help, then exit --help=commands list backslash commands, then exit --help=variables list special variables, then exit Input and output options: -a, --echo-all echo all input from script -b, --echo-errors echo failed commands -e, --echo-queries echo commands sent to server -E, --echo-hidden display queries that internal commands generate -L, --log-file=FILENAME send session log to file -n, --no-readline disable enhanced command line editing (readline) -o, --output=FILENAME send query results to file (or |pipe) -q, --quiet run quietly (no messages, only query output) -s, --single-step single-step mode (confirm each query) -S, --single-line single-line mode (end of line terminates SQL command) Output format options: -A, --no-align unaligned table output mode --csv CSV (Comma-Separated Values) table output mode -F, --field-separator=STRING field separator for unaligned output (default: \"|\") -H, --html HTML table output mode -P, --pset=VAR[=ARG] set printing option VAR to ARG (see \\pset command) -R, --record-separator=STRING record separator for unaligned output (default: newline) -t, --tuples-only print rows only -T, --table-attr=TEXT set HTML table tag attributes (e.g., width, border) -x, --expanded turn on expanded table output -z, --field-separator-zero set field separator for unaligned output to zero byte -0, --record-separator-zero set record separator for unaligned output to zero byte Connection options: -h, --host=HOSTNAME database server host or socket directory (default: \"local socket\") -p, --port=PORT database server port (default: \"5432\") -U, --username=USERNAME database user name (default: \"root\") -w, --no-password never prompt for password -W, --password force password prompt (should happen automatically) For more information, type \"\\?\" (for internal commands) or \"\\help\" (for SQL commands) from within psql, or consult the psql section in the PostgreSQL documentation. Report bugs to . PostgreSQL home page: psql 配置变量帮助 输入\\? variables命令可以获得 psql 的配置变量、环境变量以及显示设置相关的帮助信息： 该命令的结果和psql --help=variables的输出相同。 postgres=# \\? variables List of specially treated variables psql variables: Usage: psql --set=NAME=VALUE or \\set NAME VALUE inside psql AUTOCOMMIT if set, successful SQL commands are automatically committed COMP_KEYWORD_CASE determines the case used to complete SQL key words [lower, upper, preserve-lower, preserve-upper] DBNAME the currently connected database name ECHO controls what input is written to standard output [all, errors, none, queries] ECHO_HIDDEN if set, display internal queries executed by backslash commands; if set to \"noexec\", just show them without execution ENCODING current client character set encoding ERROR true if last query failed, else false FETCH_COUNT the number of result rows to fetch and display at a time (0 = unlimited) HIDE_TABLEAM if set, table access methods are not displayed HIDE_TOAST_COMPRESSION if set, compression methods are not displayed HISTCONTROL controls command history [ignorespace, ignoredups, ignoreboth] HISTFILE file name used to store the command history HISTSIZE maximum number of commands to store in the command history HOST the currently connected database server host IGNOREEOF number of EOFs needed to terminate an interactive session LASTOID value of the last affected OID LAST_ERROR_MESSAGE LAST_ERROR_SQLSTATE message and SQLSTATE of last error, or empty string and \"00000\" if none ON_ERROR_ROLLBACK if set, an error doesn't stop a transaction (uses implicit savepoints) ON_ERROR_STOP stop batch execution after error PORT server port of the current connection PROMPT1 specifies the standard psql prompt PROMPT2 specifies the prompt used when a statement continues from a previous line PROMPT3 specifies the prompt used during COPY ... FROM STDIN QUIET run quietly (same as -q option) ROW_COUNT number of rows returned or affected by last query, or 0 SERVER_VERSION_NAME SERVER_VERSION_NUM server's version (in short string or numeric format) SHOW_CONTEXT controls display of message context fields [never, errors, always] SINGLELINE if set, end of line terminates SQL commands (same as -S option) SINGLESTEP single-step mode (same as -s option) SQLSTATE SQLSTATE of last query, or \"00000\" if no error USER the currently connected database user VERBOSITY controls verbosity of error reports [default, verbose, terse, sqlstate] VERSION VERSION_NAME VERSION_NUM psql's version (in verbose string, short string, or numeric format) Display settings: Usage: psql --pset=NAME[=VALUE] or \\pset NAME [VALUE] inside psql border border style (number) columns target width for the wrapped format expanded (or x) expanded output [on, off, auto] fieldsep field separator for unaligned output (default \"|\") fieldsep_zero set field separator for unaligned output to a zero byte footer enable or disable display of the table footer [on, off] format set output format [unaligned, aligned, wrapped, html, asciidoc, ...] linestyle set the border line drawing style [ascii, old-ascii, unicode] null set the string to be printed in place of a null value numericlocale enable display of a locale-specific character to separate groups of digits pager control when an external pager is used [yes, no, always] recordsep record (line) separator for unaligned output recordsep_zero set record separator for unaligned output to a zero byte tableattr (or T) specify attributes for table tag in html format, or proportional column widths for left-aligned data types in latex-longtable format title set the table title for subsequently printed tables tuples_only if set, only actual table data is shown unicode_border_linestyle unicode_column_linestyle unicode_header_linestyle set the style of Unicode line drawing [single, double] Environment variables: Usage: NAME=VALUE [NAME=VALUE] psql ... or \\setenv NAME [VALUE] inside psql COLUMNS number of columns for wrapped format PGAPPNAME same as the application_name connection parameter PGDATABASE same as the dbname connection parameter PGHOST same as the host connection parameter PGPASSFILE password file name PGPASSWORD connection password (not recommended) PGPORT same as the port connection parameter PGUSER same as the user connection parameter PSQL_EDITOR, EDITOR, VISUAL editor used by the \\e, \\ef, and \\ev commands PSQL_EDITOR_LINENUMBER_ARG how to specify a line number when invoking the editor PSQL_HISTORY alternative location for the command history file PSQL_PAGER, PAGER name of external pager program PSQLRC alternative location for the user's .psqlrc file SHELL shell used by the \\! command TMPDIR directory for temporary files SQL 语句帮助 输入\\h [ command ]或者\\help [ command ]命令可以获得 SQL 命令语法相关的帮助： postgres=# \\h Available help: ABORT CHECKPOINT CREATE USER DROP TRIGGER ALTER AGGREGATE CLOSE CREATE USER MAPPING DROP TYPE ALTER COLLATION CLUSTER CREATE VIEW DROP USER ALTER CONVERSION COMMENT DEALLOCATE DROP USER MAPPING ALTER DATABASE COMMIT DECLARE DROP VIEW ALTER DEFAULT PRIVILEGES COMMIT PREPARED DELETE END ALTER DOMAIN COPY DISCARD EXECUTE ALTER EVENT TRIGGER CREATE ACCESS METHOD DO EXPLAIN ALTER EXTENSION CREATE AGGREGATE DROP ACCESS METHOD FETCH ALTER FOREIGN DATA WRAPPER CREATE CAST DROP AGGREGATE GRANT ALTER FOREIGN TABLE CREATE COLLATION DROP CAST IMPORT FOREIGN SCHEMA ALTER FUNCTION CREATE CONVERSION DROP COLLATION INSERT ALTER GROUP CREATE DATABASE DROP CONVERSION LISTEN ALTER INDEX CREATE DOMAIN DROP DATABASE LOAD ALTER LANGUAGE CREATE EVENT TRIGGER DROP DOMAIN LOCK ALTER LARGE OBJECT CREATE EXTENSION DROP EVENT TRIGGER MOVE ALTER MATERIALIZED VIEW CREATE FOREIGN DATA WRAPPER DROP EXTENSION NOTIFY ALTER OPERATOR CREATE FOREIGN TABLE DROP FOREIGN DATA WRAPPER PREPARE ALTER OPERATOR CLASS CREATE FUNCTION DROP FOREIGN TABLE PREPARE TRANSACTION ALTER OPERATOR FAMILY CREATE GROUP DROP FUNCTION REASSIGN OWNED ALTER POLICY CREATE INDEX DROP GROUP REFRESH MATERIALIZED VIEW ALTER PROCEDURE CREATE LANGUAGE DROP INDEX REINDEX ALTER PUBLICATION CREATE MATERIALIZED VIEW DROP LANGUAGE RELEASE SAVEPOINT ALTER ROLE CREATE OPERATOR DROP MATERIALIZED VIEW RESET ALTER ROUTINE CREATE OPERATOR CLASS DROP OPERATOR REVOKE ALTER RULE CREATE OPERATOR FAMILY DROP OPERATOR CLASS ROLLBACK ALTER SCHEMA CREATE POLICY DROP OPERATOR FAMILY ROLLBACK PREPARED ALTER SEQUENCE CREATE PROCEDURE DROP OWNED ROLLBACK TO SAVEPOINT ALTER SERVER CREATE PUBLICATION DROP POLICY SAVEPOINT ALTER STATISTICS CREATE ROLE DROP PROCEDURE SECURITY LABEL ALTER SUBSCRIPTION CREATE RULE DROP PUBLICATION SELECT ALTER SYSTEM CREATE SCHEMA DROP ROLE SELECT INTO ALTER TABLE CREATE SEQUENCE DROP ROUTINE SET ALTER TABLESPACE CREATE SERVER DROP RULE SET CONSTRAINTS ALTER TEXT SEARCH CONFIGURATION CREATE STATISTICS DROP SCHEMA SET ROLE ALTER TEXT SEARCH DICTIONARY CREATE SUBSCRIPTION DROP SEQUENCE SET SESSION AUTHORIZATION ALTER TEXT SEARCH PARSER CREATE TABLE DROP SERVER SET TRANSACTION ALTER TEXT SEARCH TEMPLATE CREATE TABLE AS DROP STATISTICS SHOW ALTER TRIGGER CREATE TABLESPACE DROP SUBSCRIPTION START TRANSACTION ALTER TYPE CREATE TEXT SEARCH CONFIGURATION DROP TABLE TABLE ALTER USER CREATE TEXT SEARCH DICTIONARY DROP TABLESPACE TRUNCATE ALTER USER MAPPING CREATE TEXT SEARCH PARSER DROP TEXT SEARCH CONFIGURATION UNLISTEN ALTER VIEW CREATE TEXT SEARCH TEMPLATE DROP TEXT SEARCH DICTIONARY UPDATE ANALYZE CREATE TRANSFORM DROP TEXT SEARCH PARSER VACUUM BEGIN CREATE TRIGGER DROP TEXT SEARCH TEMPLATE VALUES CALL CREATE TYPE DROP TRANSFORM WITH 直接查看某个具体 SQL 命令的语法帮助，例如： postgres=# \\h create index Command: CREATE INDEX Description: define a new index Syntax: CREATE [ UNIQUE ] INDEX [ CONCURRENTLY ] [ [ IF NOT EXISTS ] name ] ON [ ONLY ] table_name [ USING method ] ( { column_name | ( expression ) } [ COLLATE collation ] [ opclass [ ( opclass_parameter = value [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ] [, ...] ) [ INCLUDE ( column_name [, ...] ) ] [ WITH ( storage_parameter [= value] [, ... ] ) ] [ TABLESPACE tablespace_name ] [ WHERE predicate ] URL: https://www.postgresql.org/docs/14/sql-createindex.html 退出 psql 工具 退出 psql 终端的命令包括\\q、\\quit、quit以及exit。例如： postgres=# \\q # 常用元命令 执行 SQL 语句 psql 中的 SQL 命令以;或者\\g结束，同时发送到服务端执行并返回结果。例如，以下查询返回了当前 PostgreSQL 数据库的版本： postgres=# SELECT version(); version ----------------------------------------------------------------------------------------------------------------------------- PostgreSQL 14.4 (Debian 14.4-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit (1 row) 保存查询结果 如果想要将查询结果直接保存到某个文件中，可以使用\\g filename命令。例如： 此时，数据库的版本信息被保存到了操作系统当前工作目录下的 result.txt 文件中。 \\! command用于执行操作系统命令，这里使用 Linux 的 ls 命令查看文件列表。 postgres=# SELECT version() \\g result.txt postgres=# postgres-# \\! ls -al total 92 drwxr-xr-x 1 root root 4096 Sep 22 21:59 . drwxr-xr-x 1 root root 4096 Sep 22 21:59 .. drwxr-xr-x 2 root root 4096 Aug 1 2022 bin drwxr-xr-x 2 root root 4096 Jul 1 2022 boot drwxr-xr-x 11 root root 3140 Sep 22 11:35 dev drwxr-xr-x 2 root root 4096 Sep 18 20:31 docker-entrypoint-initdb.d -rwxr-xr-x 1 root root 0 Sep 18 20:34 .dockerenv drwxr-xr-x 1 root root 4096 Sep 18 20:34 etc drwxr-xr-x 2 root root 4096 Jul 1 2022 home drwxr-xr-x 1 root root 4096 Aug 1 2022 lib drwxr-xr-x 2 root root 4096 Aug 1 2022 lib64 drwxr-xr-x 2 root root 4096 Aug 1 2022 media drwxr-xr-x 2 root root 4096 Aug 1 2022 mnt drwxr-xr-x 2 root root 4096 Aug 1 2022 opt dr-xr-xr-x 219 root root 0 Sep 22 11:35 proc -rw-r--r-- 1 root root 386 Sep 22 21:59 result.txt drwx------ 1 root root 4096 Sep 20 20:46 root drwxr-xr-x 1 root root 4096 Aug 2 2022 run drwxr-xr-x 2 root root 4096 Aug 1 2022 sbin drwxr-xr-x 2 root root 4096 Aug 1 2022 srv dr-xr-xr-x 11 root root 0 Sep 22 11:35 sys drwxrwxrwt 1 root root 4096 Aug 2 2022 tmp drwxr-xr-x 1 root root 4096 Aug 1 2022 usr drwxr-xr-x 1 root root 4096 Aug 1 2022 var postgres=# postgres-# \\! cat result.txt version ----------------------------------------------------------------------------------------------------------------------------- PostgreSQL 14.4 (Debian 14.4-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit (1 row) 另外，执行\\o [ filename ]命令可以将之后的所有查询结果和命令返回信息保存到指定文件，默认为标准输出。例如： 前两个 select 语句的结果打印到了 result.txt 文件中，然后又将查询结果定向为标准输出。 shoping=# \\o result.txt shoping=# select * from dept; shoping=# select 1+1; shoping=# \\o shoping=# shoping=# \\! cat result.txt department_id | department_name ---------------+----------------- 10 | Administration 20 | Marketing (2 rows) ?column? ---------- 2 (1 row) 还有一个\\copy …命令可以用于将表或者查询结果保存到指定文件中，或者从指定文件中读取内容到表中。例如： shoping-# \\copy dept to dept.txt COPY 2 shoping-# shoping-# \\! cat dept.txt 10 Administration 20 Marketing \\copy 导入数据到表中： 其中，table_name是目标表的名称，file_path是数据文件的路径，delimiter是字段之间的分隔符。 COPY table_name FROM 'file_path' [DELIMITER 'delimiter'] 导出数据到文件： 这个命令将表中的数据导出到指定的文件路径。 COPY table_name TO 'file_path' [DELIMITER 'delimiter'] 导入数据到表中（使用STDIN）： 这个命令从标准输入读取数据，并将其导入到表中。 COPY table_name FROM STDIN [DELIMITER 'delimiter'] 导出数据到STDOUT： 这个命令将表中的数据输出到标准输出。 COPY table_name TO STDOUT [DELIMITER 'delimiter'] COPY命令支持的文件类型包括TXT、CSV、SQL、压缩文件和二进制格式。它适合批量导入数据，速度较快。需要注意的是，COPY命令只能用于表，不能用于视图。 重复执行语句 \\watch [SEC]命令可以用于每隔指定秒数（默认 2 秒）执行一次 SQL 语句。例如： shoping=# SELECT now() \\watch 5 Sun 22 Sep 2024 11:23:05 PM CST (every 5s) now ------------------------------- 2024-09-22 15:23:05.777741+00 (1 row) Sun 22 Sep 2024 11:23:10 PM CST (every 5s) now ------------------------------- 2024-09-22 15:23:10.789936+00 (1 row) Sun 22 Sep 2024 11:23:15 PM CST (every 5s) now ------------------------------- 2024-09-22 15:23:15.797624+00 (1 row) Sun 22 Sep 2024 11:23:20 PM CST (every 5s) 显示/清空查询缓冲区 输入\\p命令可以显示当前缓冲区或者最近一次执行的命令： shoping=# \\p select 1+1; 输入\\r命令可以清空当前缓冲区中的内容： shoping=# \\r Query buffer reset (cleared). 执行上一次命令 直接输入没有参数的\\g命令表示再次执行查询缓冲区中的命令或者上一次执行的语句。例如： shoping=# select * from dept; department_id | department_name ---------------+----------------- 10 | Administration 20 | Marketing (2 rows) shoping=# \\g department_id | department_name ---------------+----------------- 10 | Administration 20 | Marketing (2 rows) 查看/保存命令历史 \\s [ filename ]命令用于将历史命令保存到文件中，如果省略 filename 则显示到终端。例如： shoping=# \\s \\c \\du CREATE ROLE admin CREATEDB CREATEROLE; su postgres exit CREATE ROLE admin CREATEDB CREATEROLE; CREATE ROLE admin CREATEDB CREATEROLE; \\c \\c 显示语句执行时间 \\timing [ on | off ]命令可以用于显示或者关闭 SQL 语句的执行时间，单位为毫秒。例如： 不指定参数的\\timing命令可以在 on 和 off 之间切换。 shoping=# \\timing on Timing is on. shoping=# select * from dept; department_id | department_name ---------------+----------------- 10 | Administration 20 | Marketing (2 rows) Time: 0.655 ms shoping=# \\timing Timing is off. 设置输出格式 \\pset [ option [ value ] ]命令可以用于显示或者设置与查询结果输出相关的选项。例如：(返回了当前的选项设置) shoping=# \\pset border 1 columns 0 csv_fieldsep ',' expanded off fieldsep '|' fieldsep_zero off footer on format aligned linestyle ascii null '' numericlocale off pager 1 pager_min_lines 0 recordsep '\\n' recordsep_zero off tableattr title tuples_only off unicode_border_linestyle single unicode_column_linestyle single unicode_header_linestyle single 执行脚本文件 \\i filename命令用于读取文件并执行其中的命令。在操作系统当前目录中创建一个脚本文件 test.sql，输入以下语句： 查看数据库对象信息 psql 提供了大量用于查看数据库对象信息的元命令，绝大多数以 \\d 开头。其中很多命令支持额外的 S 后缀，用于显示系统对象，否则只显示当前用户拥有访问权限的对象；或者额外的 + 后缀，用于显示额外的信息。 查看角色和用户 \\du[S+] [ pattern ]或者\\dg[S+] [ pattern ]命令用于列出用户创建的角色、用户和组。例如： 如果指定了 S 选项，同时会显示系统创建的角色；如果指定了 + 选项，还会显示额外的描述信息；如果指定了 pattern，只有名称匹配指定模式的角色才会显示。 shoping=# \\duS List of roles Role name | Attributes | Member of ---------------------------+------------------------------------------------------------+-------------------------------------------------------------- admin | Create role, Create DB, Cannot login | {} pg_database_owner | Cannot login | {} pg_execute_server_program | Cannot login | {} pg_monitor | Cannot login | {pg_read_all_settings,pg_read_all_stats,pg_stat_scan_tables} pg_read_all_data | Cannot login | {} pg_read_all_settings | Cannot login | {} pg_read_all_stats | Cannot login | {} pg_read_server_files | Cannot login | {} pg_signal_backend | Cannot login | {} pg_stat_scan_tables | Cannot login | {} pg_write_all_data | Cannot login | {} pg_write_server_files | Cannot login | {} postgres | Superuser, Create role, Create DB, Replication, Bypass RLS | {} tony | Password valid until 2025-01-01 00:00:00+00 | {} 查看数据库 \\l[+] [pattern]命令用于列出系统中的所有数据库。例如： 如果指定 + 选项，还会显示额外的数据库大小、默认表空间和描述信息；如果指定了 pattern，只有名称匹配指定模式的数据库才会显示。 shoping=# \\l List of databases Name | Owner | Encoding | Collate | Ctype | Access privileges -----------+----------+----------+------------+------------+----------------------- postgres | postgres | UTF8 | en_US.utf8 | en_US.utf8 | shoping | postgres | UTF8 | en_US.utf8 | en_US.utf8 | template0 | postgres | UTF8 | en_US.utf8 | en_US.utf8 | =c/postgres + | | | | | postgres=CTc/postgres template1 | postgres | UTF8 | en_US.utf8 | en_US.utf8 | =c/postgres + | | | | | postgres=CTc/postgres (4 rows) shoping=# \\l+ List of databases Name | Owner | Encoding | Collate | Ctype | Access privileges | Size | Tablespace | Description -----------+----------+----------+------------+------------+-----------------------+---------+------------+-------------------------------------------- postgres | postgres | UTF8 | en_US.utf8 | en_US.utf8 | | 8553 kB | pg_default | default administrative connection database shoping | postgres | UTF8 | en_US.utf8 | en_US.utf8 | | 8921 kB | pg_default | template0 | postgres | UTF8 | en_US.utf8 | en_US.utf8 | =c/postgres +| 8401 kB | pg_default | unmodifiable empty database | | | | | postgres=CTc/postgres | | | template1 | postgres | UTF8 | en_US.utf8 | en_US.utf8 | =c/postgres +| 8401 kB | pg_default | default template for new databases | | | | | postgres=CTc/postgres | | | (4 rows) 查看模式 \\dn[S+] [ pattern ]命令用于列出当前数据库中的所有模式（schema）。例如： 如果指定了 S 选项，同时会显示系统模式；如果指定了 + 选项，还会显示额外的授权信息和描述；如果指定了 pattern，只有名称匹配指定模式的 schema 才会显示。 shoping=# \\dn List of schemas Name | Owner --------+---------- public | postgres (1 row) shoping=# \\dnS List of schemas Name | Owner --------------------+---------- information_schema | postgres pg_catalog | postgres pg_toast | postgres public | postgres (4 rows) 查看表空间 \\db[+] [ pattern ]命令用于列出系统中的所有表空间。例如： 如果指定了 + 选项，还会显示额外的选项、空间大小、授权信息和描述；如果指定了 pattern，只有名称匹配指定模式的表空间才会显示。 shoping=# \\db List of tablespaces Name | Owner | Location ------------+----------+---------- pg_default | postgres | pg_global | postgres | (2 rows) shoping=# \\db+ List of tablespaces Name | Owner | Location | Access privileges | Options | Size | Description ------------+----------+----------+-------------------+---------+--------+------------- pg_default | postgres | | | | 33 MB | pg_global | postgres | | | | 560 kB | (2 rows) 查看表 \\dt[S+] [ pattern ]命令用于列出所有的数据表。例如： 如果指定了 S 选项，同时会显示系统表；如果指定了 + 选项，还会显示额外的大小和描述信息；如果指定了 pattern，只有名称匹配指定模式的表才会显示。 另外，\\d[S+] [ pattern ]命令可以同时列出表、视图、物化视图、索引、序列以及外部表的信息，等价于\\dtvmsE[S+] [ pattern ]命令。 shoping=# \\dt+ List of relations Schema | Name | Type | Owner | Persistence | Access method | Size | Description --------+-------------+-------+----------+-------------+---------------+------------+------------- public | departments | table | postgres | permanent | heap | 8192 bytes | public | dept | table | postgres | permanent | heap | 8192 bytes | public | emp | table | postgres | permanent | heap | 0 bytes | public | employees | table | postgres | permanent | heap | 40 kB | public | jobs | table | postgres | permanent | heap | 8192 bytes | public | sales | table | postgres | permanent | heap | 8192 bytes | public | tbl_char | table | postgres | permanent | heap | 8192 bytes | (7 rows) 查看索引 \\di[S+] [ pattern ]命令用于列出所有的索引。例如： 如果指定了 S 选项，同时会显示系统表上的索引；如果指定了 + 选项，还会显示额外的大小和描述信息；如果指定了 pattern，只有名称匹配指定模式的索引才会显示。 shoping=# \\di List of relations Schema | Name | Type | Owner | Table --------+-------------------+-------+----------+------------- public | dept_id_pk | index | postgres | departments public | dept_location_ix | index | postgres | departments public | dept_pkey | index | postgres | dept public | emp_department_ix | index | postgres | employees public | emp_email_uk | index | postgres | employees public | emp_emp_id_pk | index | postgres | employees public | emp_job_ix | index | postgres | employees public | emp_manager_ix | index | postgres | employees public | emp_name_ix | index | postgres | employees public | emp_pkey | index | postgres | emp public | job_id_pk | index | postgres | jobs (11 rows) shoping=# \\di+ List of relations Schema | Name | Type | Owner | Table | Persistence | Access method | Size | Description --------+-------------------+-------+----------+-------------+-------------+---------------+------------+------------- public | dept_id_pk | index | postgres | departments | permanent | btree | 16 kB | public | dept_location_ix | index | postgres | departments | permanent | btree | 16 kB | public | dept_pkey | index | postgres | dept | permanent | btree | 16 kB | public | emp_department_ix | index | postgres | employees | permanent | btree | 16 kB | public | emp_email_uk | index | postgres | employees | permanent | btree | 16 kB | public | emp_emp_id_pk | index | postgres | employees | permanent | btree | 16 kB | public | emp_job_ix | index | postgres | employees | permanent | btree | 16 kB | public | emp_manager_ix | index | postgres | employees | permanent | btree | 16 kB | public | emp_name_ix | index | postgres | employees | permanent | btree | 16 kB | public | emp_pkey | index | postgres | emp | permanent | btree | 8192 bytes | public | job_id_pk | index | postgres | jobs | permanent | btree | 16 kB | (11 rows) 查看序列 \\ds[S+] [ pattern ]命令用于列出所有的序列。例如： 如果指定了 S 选项，同时会显示系统创建的序列；如果指定了 + 选项，还会显示额外的大小和描述信息；如果指定了 pattern，只有名称匹配指定模式的序列才会显示。 hrdb=\u003e \\ds List of relations Schema | Name | Type | Owner --------+--------------------------+----------+------- public | accounts_id_seq | sequence | tony public | employees_history_id_seq | sequence | tony public | users_id_seq | sequence | tony (3 rows) 查看/编辑视图 \\dv[S+] [ pattern ]命令用于列出所有的视图。例如： 如果指定了 S 选项，同时会显示系统创建的视图；如果指定了 + 选项，还会显示额外的大小和描述信息；如果指定了 pattern，只有名称匹配指定模式的视图才会显示。 shoping=# \\dv List of relations Schema | Name | Type | Owner --------+------------------+------+---------- public | emp_details_view | view | postgres (1 row) shoping=# \\dv+ List of relations Schema | Name | Type | Owner | Persistence | Size | Description --------+------------------+------+----------+-------------+---------+------------- public | emp_details_view | view | postgres | permanent | 0 bytes | (1 row) \\sv[+] view_name命令用于显示视图的定义语句。例如： 如果指定了 + 选项，同时会显示行号（从 1 开始）。 shoping=# \\sv emp_details_view CREATE OR REPLACE VIEW public.emp_details_view AS SELECT e.employee_id, e.job_id, e.manager_id, e.department_id, d.location_id, e.first_name, e.last_name, e.salary, e.commission_pct, d.department_name, j.job_title FROM employees e, departments d, jobs j WHERE e.department_id = d.department_id AND j.job_id::text = e.job_id::text ",
  "wordCount" : "4768",
  "inLanguage": "zh",
  "image": "https://heliu.site/favicon-32x32.png","datePublished": "2024-09-22T00:00:00Z",
  "dateModified": "2024-09-22T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "helium"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://heliu.site/posts/postgresql/client/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Helium",
    "logo": {
      "@type": "ImageObject",
      "url": "https://heliu.site/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://heliu.site/" accesskey="h" title="Blog (Alt + H)">
                <img src="https://heliu.site/helium.png" alt="" aria-label="logo"
                    height="35">Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://heliu.site/" title="主页">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://heliu.site/posts" title="文章">
                    <span>Article</span>
                </a>
            </li>
            <li>
                <a href="https://heliu.site/archives" title="时间轴">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://heliu.site/tags/" title="标签">
                    <span>Tag</span>
                </a>
            </li>
            <li>
                <a href="https://heliu.site/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://heliu.site/support" title="打赏">
                    <span>🫶Help</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">


<article class="post" autonumbering>
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://heliu.site/">主页</a>&nbsp;»&nbsp;<a href="https://heliu.site/posts/">Article</a>&nbsp;»&nbsp;<a href="https://heliu.site/posts/postgresql/">PostgreSQL</a></div>
    <h1 class="post-title entry-hint-parent">
      客户端命令
    </h1>
    <div class="post-description">
      💥本文章相关postgreSQL版本14.4
    </div>
    <div class="post-meta">










<span class="x-post-meta-item"><svg t="1720837714681" class="icon" viewBox="0 0 1084 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7520" width="200" height="200"><path d="M123.47509 1023.984942a123.565437 123.565437 0 0 1-123.505206-123.32451V243.863302A123.565437 123.565437 0 0 1 123.47509 120.568908h171.630374V26.06529a26.050232 26.050232 0 0 1 52.070349 0v94.503618h377.592848V26.06529a26.050232 26.050232 0 0 1 52.100464 0v94.503618h183.797189A123.565437 123.565437 0 0 1 1084.171519 243.863302v656.79713A123.565437 123.565437 0 0 1 960.666314 1023.984942H123.47509z m-71.404741-123.32451A71.434857 71.434857 0 0 0 123.47509 971.974825h837.191224a71.434857 71.434857 0 0 0 71.404741-71.314393V442.326922l-946.361273-3.824716a25.598494 25.598494 0 0 1-5.84248-0.692665l-27.796953-6.444798v469.295689zM123.47509 172.579025a71.434857 71.434857 0 0 0-71.404741 71.284277v149.736133l27.796953-6.444797a26.080348 26.080348 0 0 1 5.902712-0.662549l946.301041 3.824716V243.863302a71.404741 71.404741 0 0 0-71.404741-71.284277h-180.183284l-6.173754 12.859479a26.200812 26.200812 0 0 1-23.490383 14.786895 26.261043 26.261043 0 0 1-23.520499-14.786895l-6.173754-12.859479H350.819834l-6.173754 12.859479a26.200812 26.200812 0 0 1-23.490383 14.786895 26.230928 26.230928 0 0 1-23.520499-14.786895l-6.173755-12.859479H123.47509z m156.150814 578.827128a26.050232 26.050232 0 0 1-26.050232-25.990001c0-14.335157 11.68496-26.020116 26.050232-26.020116h521.697312c14.365273 0 26.050232 11.68496 26.050233 26.020116a26.050232 26.050232 0 0 1-26.050233 25.990001H279.625904z" fill="#3D3F42" p-id="7521"></path></svg><span>2024-09-22</span></span>&nbsp;<span class="x-post-meta-item"><svg t="1720839329181" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14106" width="200" height="200"><path d="M699.270662 190.485379c-0.411369 0-0.821715 0.011256-1.227967 0.032746H507.034407a23.041786 23.041786 0 0 0-1.221828-0.031723c-12.779048 0-23.140023 10.359952-23.140023 23.139 0 12.781094 10.360975 23.141046 23.140023 23.141046v0.032746h193.458083v-0.032746c12.780071 0 23.141046-10.359952 23.141047-23.141046 0-12.780071-10.360975-23.140023-23.141047-23.140023zM979.215516 724.005508c0-142.090159-115.186416-257.277598-257.277598-257.277598-72.245418 0-137.532353 29.777187-184.262654 77.725223l45.868677 31.474852c36.227086-33.873482 84.882226-54.617945 138.393977-54.617945 111.945605 0 202.696492 90.750887 202.696492 202.695468h-43.01263l70.331835 104.289228 70.331835-104.289228H979.215516z" fill="" p-id="14107"></path><path d="M748.885664 588.843132c0-14.881942-12.06785-26.945699-26.947746-26.945698-14.883989 0-26.947745 12.063757-26.947745 26.945698v135.164423c0 14.879895 12.063757 26.945699 26.947745 26.945699h107.786889c14.881942 0 26.945699-12.063757 26.945698-26.945699s-12.063757-26.945699-26.945698-26.945699h-80.839143V588.843132zM721.937918 926.702c-111.947651 0-202.696492-90.74884-202.696492-202.696492 0-0.144286 0.004093-0.285502 0.004094-0.429788h43.004443l-70.330812-104.289228-70.331835 104.289228h43.075051c0 0.144286-0.00307 0.285502-0.00307 0.429788 0 142.091182 115.187439 257.279644 257.278621 257.279645 72.241324 0 137.530306-29.77821 184.260607-77.727269l-45.86663-31.474852c-36.227086 33.873482-84.884272 54.618968-138.393977 54.618968zM694.633039 423.38066c-1.354857-11.487635-11.120268-20.400632-22.972201-20.400632H206.362486c-12.780071 0-23.140023 10.359952-23.140023 23.138999 0 12.781094 10.359952 23.141046 23.140023 23.141047H596.949252c30.209022-13.81668 63.104223-22.76754 97.683787-25.879414zM438.548616 623.143333H206.362486c-12.780071 0-23.140023 10.358929-23.140023 23.140023 0 12.780071 10.359952 23.140023 23.140023 23.140023h219.956598a298.463626 298.463626 0 0 1 12.229532-46.280046zM506.934123 513.062192H206.362486c-12.780071 0-23.140023 10.359952-23.140023 23.139 0 12.781094 10.359952 23.140023 23.140023 23.140023H469.936487a302.241672 302.241672 0 0 1 36.997636-46.279023z" fill="" p-id="14108"></path><path d="M442.765661 835.277778a298.531164 298.531164 0 0 1-14.365173-46.150087H146.542052v-0.065491c-33.036417 0-59.81941-26.78197-59.81941-59.819411V329.36031h704.907545v100.905154a298.561863 298.561863 0 0 1 46.150086 14.996552V194.619536h-0.162706c0-53.422723-43.307342-96.728018-96.730065-96.728018h-68.89409V84.418668c0-33.037441-26.782993-59.81941-59.81941-59.81941v-0.361227h-18.87079v0.032745c-33.038464 0-59.820434 26.78197-59.820433 59.819411 0 0.109494 0.008186 0.218988 0.008186 0.328481h-0.339738v13.47285H345.203648V84.418668c0-33.037441-26.782993-59.81941-59.819411-59.81941v-0.361227h-18.872836v0.032745c-33.036417 0-59.81941 26.78197-59.81941 59.819411 0 0.109494 0.007163 0.218988 0.008186 0.328481h-0.339737v13.47285h-69.189826c-53.4217 0-96.729042 43.306318-96.729041 96.728018 0 1.701758 0.045025 3.39226 0.132006 5.071505v533.785166a98.051153 98.051153 0 0 0-0.132006 5.071506c0 53.4217 43.307342 96.728018 96.729041 96.728018v0.001023h305.595047zM86.723665 204.056466c0-33.037441 26.782993-59.81941 59.819411-59.819411 0.044002 0 0.086981 0.00307 0.130983 0.00307v-0.068561h105.968473V94.874811h0.032746a22.807449 22.807449 0 0 1-0.032746-1.215688c0-12.779048 10.360975-23.140023 23.140023-23.140023s23.140023 10.360975 23.140023 23.140023c0 0.408299-0.010233 0.812505-0.031722 1.215688h0.031722v49.297776h280.508696V94.874811h0.032745a22.807449 22.807449 0 0 1-0.032745-1.215688c0-12.779048 10.361999-23.140023 23.140023-23.140023 12.780071 0 23.141046 10.360975 23.141046 23.140023 0 0.408299-0.011256 0.812505-0.032746 1.215688h0.032746v49.297776h106.10048v0.065492c33.035394 0 59.818387 26.780947 59.818387 59.81941h0.130983V283.080264H86.723665v-79.023798z" fill="" p-id="14109"></path></svg><span>2024-09-22</span></span>&nbsp;<span class="x-post-meta-item"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"
     stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select: text;">
    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" style="user-select: text;"></path>
    <polyline points="14 2 14 8 20 8" style="user-select: text;"></polyline>
    <line x1="16" y1="13" x2="8" y2="13" style="user-select: text;"></line>
    <line x1="16" y1="17" x2="8" y2="17" style="user-select: text;"></line>
    <polyline points="10 9 9 9 8 9" style="user-select: text;"></polyline>
</svg><span>4768字</span></span>&nbsp;<span class="x-post-meta-item"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"
     stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <circle cx="12" cy="12" r="9"></circle>
    <polyline points="12 7 12 12 15 15"></polyline>
</svg><span>23分钟</span></span>&nbsp;<span class="x-post-meta-item"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"
     stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <circle cx="12" cy="7" r="4"></circle>
    <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
</svg><span>helium</span></span>
      <span class="x-post-meta-item">
        &nbsp;<svg t="1720840393161" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18680" width="200" height="200"><path d="M995.125144 559.61812l-415.998603-415.998602A52.986489 52.986489 0 0 0 541.413335 127.99957H338.847348c-3.166656-26.559911-9.286635-51.046495-17.999939-71.333094C299.734146 7.333309 271.154242 0 256.00096 0c-13.939953 0-40.439864 6.339979-61.259794 48.806503-10.473298 21.366595-17.946606 48.966502-21.573261 79.193067H53.334974a53.393154 53.393154 0 0 0-53.333154 53.333154v360.078791a52.986489 52.986489 0 0 0 15.619948 37.713206l415.998602 415.998603a53.333154 53.333154 0 0 0 75.426413 0l26.286579-26.293245 26.286578 26.293245a53.426487 53.426487 0 0 0 16.719944 11.333295 21.333262 21.333262 0 0 0 36.079879 11.293295l382.705381-382.705381a53.399821 53.399821 0 0 0 0-75.426413z m-762.070774-491.998347C241.494342 50.373164 250.667645 42.666523 256.00096 42.666523c5.99998 0 16.573278 9.639968 25.646581 30.806564 6.493312 15.159949 11.333295 33.999886 14.146619 54.526483H216.16776c3.206656-23.419921 9.013303-44.359851 16.88661-60.41313z m243.819181 897.330319a10.666631 10.666631 0 0 1-15.079949 0l-415.998603-415.998603A10.573298 10.573298 0 0 1 42.668343 541.411515V181.332724a10.666631 10.666631 0 0 1 10.666631-10.666631h245.332509c0 47.853173-10.373298 92.15969-27.066575 115.632945-5.926647 8.326639-16.566611 14.186619-22.306592 16.113279C204.041135 314.752276 170.667913 356.218803 170.667913 405.331972c0 58.813136 47.853173 106.666308 106.666309 106.666308s106.666308-47.853173 106.666308-106.666308c0-47.086508-30.666564-87.139707-73.079754-101.246327C330.060711 272.705751 341.334007 223.692582 341.334007 170.666093h72.079758a10.573298 10.573298 0 0 1 7.539974 3.126656l415.998603 415.998603a10.666631 10.666631 0 0 1 0 15.079949zM341.334007 405.331972a63.999785 63.999785 0 1 1-63.999785-63.999785 64.073118 64.073118 0 0 1 63.999785 63.999785z m263.539114 559.61812a10.666631 10.666631 0 0 1-15.079949 0L563.499927 938.663513l303.625647-303.61898a53.399821 53.399821 0 0 0 0-75.426413L478.16688 170.666093h63.246455a10.573298 10.573298 0 0 1 7.539974 3.126656l415.998603 415.998603c0.239999 0.239999 0.466665 0.486665 0.666664 0.746664l0.086667 0.106666a10.666631 10.666631 0 0 1 0 13.373289l-0.086667 0.106666c-0.213333 0.259999-0.439999 0.506665-0.666664 0.746664z" fill="#5C5C66" p-id="18681"></path></svg>
        <ul class="post-tags-meta" style="display: inline-block;font-size: 14px;">
            <a href="https://heliu.site/tags/pgsql/" target="_blank" rel="noopener">Pgsql</a>
        </ul>
      </span>
      
      <span id="busuanzi_container_page_pv" class="x-post-meta-item">
        &nbsp;<svg t="1720844685710" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="27237" width="200" height="200"><path d="M739.754667 574.08c-121.386667 45.610667-208.469333 169.813333-208.64 316.16 0 33.408 4.693333 65.493333 13.141333 95.914667H94.122667c-26.453333-43.52-41.685333-91.946667-41.685334-143.189334 0-185.173333 192.896-335.104 430.805334-335.104 96.256 0 184.832 24.746667 256.512 66.218667z m-280.490667-114.986667a214.869333 214.869333 0 0 1-214.869333-215.04A215.04 215.04 0 0 1 459.264 28.842667a215.04 215.04 0 0 1 215.04 215.210666 215.04 215.04 0 0 1-215.04 215.04zM974.506667 641.28c9.856 0 17.834667 7.466667 17.834666 16.64v59.989333c-0.341333 8.789333-7.850667 15.786667-17.28 16.085334-9.856 0.341333-18.176-6.826667-18.517333-16.085334v-20.053333l-99.114667 91.093333-0.256 0.256a18.474667 18.474667 0 0 1-14.848 4.352h-0.768a18.176 18.176 0 0 1-9.344-4.608l-0.938666-0.981333-85.930667-80.042667-123.562667 115.072a18.773333 18.773333 0 0 1-25.216 0 15.786667 15.786667 0 0 1 0-23.466666l136.149334-126.848 0.725333-0.597334a18.645333 18.645333 0 0 1 24.362667 0.512l87.253333 81.237334 86.058667-79.232h-21.248c-9.386667-0.298667-16.938667-7.338667-17.28-16.085334-0.341333-9.173333 7.381333-16.896 17.28-17.237333h64.64z m-367.146667 240h48.128c8.874667 0 16.042667 7.168 16.042667 16.042667v72.192a16.042667 16.042667 0 0 1-16.042667 16.042666h-48.128a16.042667 16.042667 0 0 1-16.042667-16.042666v-72.192c0-8.874667 7.210667-16.042667 16.042667-16.042667z m110.805333-106.666667h48.128c8.874667 0 16.042667 7.168 16.042667 16.042667v178.858667a16.042667 16.042667 0 0 1-16.042667 16.042666h-48.128a16.042667 16.042667 0 0 1-16.042666-16.042666v-178.858667c0-8.874667 7.168-16.042667 16.042666-16.042667z m106.538667 80h48.128c8.874667 0 16.042667 7.168 16.042667 16.042667v99.413333a16.042667 16.042667 0 0 1-16.042667 16.042667H824.746667a16.042667 16.042667 0 0 1-16.042667-16.042667v-99.413333c0-8.874667 7.168-16.042667 16.042667-16.042667z m110.165333-80h48.128c8.874667 0 16.042667 7.168 16.042667 16.042667v179.413333a16.042667 16.042667 0 0 1-16.042667 16.042667h-48.128a16.042667 16.042667 0 0 1-16.042666-16.042667v-179.413333c0-8.874667 7.210667-16.042667 16.042666-16.042667z" fill="#999999" p-id="27238"></path></svg>
        <span id="busuanzi_value_page_pv"></span>
      </span>

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#psql-%e5%91%bd%e4%bb%a4" aria-label="psql 命令">psql 命令</a><ul>
                            
                    <li>
                        <a href="#%e5%b1%9e%e6%80%a7%e8%af%a6%e8%a7%a3" aria-label="属性详解">属性详解</a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8%e7%a4%ba%e4%be%8b" aria-label="使用示例">使用示例</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%85%83%e5%91%bd%e4%bb%a4" aria-label="元命令">元命令</a></li>
                    <li>
                        <a href="#%e8%bf%9e%e6%8e%a5%e6%95%b0%e6%8d%ae%e5%ba%93" aria-label="连接数据库">连接数据库</a><ul>
                            
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e5%bd%93%e5%89%8d%e8%bf%9e%e6%8e%a5%e4%bf%a1%e6%81%af" aria-label="查看当前连接信息">查看当前连接信息</a></li>
                    <li>
                        <a href="#%e5%88%87%e6%8d%a2%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5" aria-label="切换数据库连接">切换数据库连接</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e8%ae%be%e7%bd%ae%e5%ae%a2%e6%88%b7%e7%ab%af%e7%bc%96%e7%a0%81" aria-label="查看/设置客户端编码">查看/设置客户端编码</a></li>
                    <li>
                        <a href="#%e4%bf%ae%e6%94%b9%e7%94%a8%e6%88%b7%e5%af%86%e7%a0%81" aria-label="修改用户密码">修改用户密码</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e5%b8%ae%e5%8a%a9" aria-label="查看帮助">查看帮助</a><ul>
                            
                    <li>
                        <a href="#psql-%e5%91%bd%e4%bb%a4%e5%b8%ae%e5%8a%a9" aria-label="psql 命令帮助">psql 命令帮助</a></li>
                    <li>
                        <a href="#psql-%e5%91%bd%e4%bb%a4%e8%a1%8c%e9%80%89%e9%a1%b9%e5%b8%ae%e5%8a%a9" aria-label="psql 命令行选项帮助">psql 命令行选项帮助</a></li>
                    <li>
                        <a href="#psql-%e9%85%8d%e7%bd%ae%e5%8f%98%e9%87%8f%e5%b8%ae%e5%8a%a9" aria-label="psql 配置变量帮助">psql 配置变量帮助</a></li>
                    <li>
                        <a href="#sql-%e8%af%ad%e5%8f%a5%e5%b8%ae%e5%8a%a9" aria-label="SQL 语句帮助">SQL 语句帮助</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e9%80%80%e5%87%ba-psql-%e5%b7%a5%e5%85%b7" aria-label="退出 psql 工具">退出 psql 工具</a></li>
                    <li>
                        <a href="#%e5%b8%b8%e7%94%a8%e5%85%83%e5%91%bd%e4%bb%a4" aria-label="常用元命令">常用元命令</a><ul>
                            
                    <li>
                        <a href="#%e6%89%a7%e8%a1%8c-sql-%e8%af%ad%e5%8f%a5" aria-label="执行 SQL 语句">执行 SQL 语句</a></li>
                    <li>
                        <a href="#%e4%bf%9d%e5%ad%98%e6%9f%a5%e8%af%a2%e7%bb%93%e6%9e%9c" aria-label="保存查询结果">保存查询结果</a></li>
                    <li>
                        <a href="#%e9%87%8d%e5%a4%8d%e6%89%a7%e8%a1%8c%e8%af%ad%e5%8f%a5" aria-label="重复执行语句">重复执行语句</a></li>
                    <li>
                        <a href="#%e6%98%be%e7%a4%ba%e6%b8%85%e7%a9%ba%e6%9f%a5%e8%af%a2%e7%bc%93%e5%86%b2%e5%8c%ba" aria-label="显示/清空查询缓冲区">显示/清空查询缓冲区</a></li>
                    <li>
                        <a href="#%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%80%e6%ac%a1%e5%91%bd%e4%bb%a4" aria-label="执行上一次命令">执行上一次命令</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e4%bf%9d%e5%ad%98%e5%91%bd%e4%bb%a4%e5%8e%86%e5%8f%b2" aria-label="查看/保存命令历史">查看/保存命令历史</a></li>
                    <li>
                        <a href="#%e6%98%be%e7%a4%ba%e8%af%ad%e5%8f%a5%e6%89%a7%e8%a1%8c%e6%97%b6%e9%97%b4" aria-label="显示语句执行时间">显示语句执行时间</a></li>
                    <li>
                        <a href="#%e8%ae%be%e7%bd%ae%e8%be%93%e5%87%ba%e6%a0%bc%e5%bc%8f" aria-label="设置输出格式">设置输出格式</a></li>
                    <li>
                        <a href="#%e6%89%a7%e8%a1%8c%e8%84%9a%e6%9c%ac%e6%96%87%e4%bb%b6" aria-label="执行脚本文件">执行脚本文件</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e6%95%b0%e6%8d%ae%e5%ba%93%e5%af%b9%e8%b1%a1%e4%bf%a1%e6%81%af" aria-label="查看数据库对象信息">查看数据库对象信息</a><ul>
                            
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e8%a7%92%e8%89%b2%e5%92%8c%e7%94%a8%e6%88%b7" aria-label="查看角色和用户">查看角色和用户</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e6%95%b0%e6%8d%ae%e5%ba%93" aria-label="查看数据库">查看数据库</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e6%a8%a1%e5%bc%8f" aria-label="查看模式">查看模式</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e8%a1%a8%e7%a9%ba%e9%97%b4" aria-label="查看表空间">查看表空间</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e8%a1%a8" aria-label="查看表">查看表</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e7%b4%a2%e5%bc%95" aria-label="查看索引">查看索引</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e5%ba%8f%e5%88%97" aria-label="查看序列">查看序列</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e7%bc%96%e8%be%91%e8%a7%86%e5%9b%be" aria-label="查看/编辑视图">查看/编辑视图</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><h2 id="psql-命令">psql 命令<a hidden class="anchor" aria-hidden="true" href="#psql-命令">#</a></h2>
<ol>
<li>执行<code>psql -?</code>或者<code>psql --help</code>命令可以获取运行 psql 工具的帮助：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">psql is the PostgreSQL interactive terminal</span><span class="err">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">Usage</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="k">psql </span><span class="err">[</span><span class="k">OPTION</span><span class="err">]...</span> <span class="err">[</span><span class="k">DBNAME </span><span class="err">[</span><span class="k">USERNAME</span><span class="err">]]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">General options</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="err">-</span><span class="k">c</span><span class="err">,</span> <span class="err">--</span><span class="k">command</span><span class="o">=</span><span class="k">COMMAND    run only single command </span><span class="p">(</span><span class="k">SQL or internal</span><span class="p">)</span> <span class="k">and exit</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">d</span><span class="p">,</span> <span class="o">--</span><span class="k">dbname</span><span class="err">=</span><span class="k">DBNAME      database name to connect to </span><span class="p">(</span><span class="k">default</span><span class="err">:</span> <span class="s2">&#34;root&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">f</span><span class="p">,</span> <span class="o">--</span><span class="k">file</span><span class="err">=</span><span class="k">FILENAME      execute commands from file</span><span class="p">,</span> <span class="k">then exit</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">l</span><span class="p">,</span> <span class="o">--</span><span class="k">list               list available databases</span><span class="p">,</span> <span class="k">then exit</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">v</span><span class="p">,</span> <span class="o">--</span><span class="k">set</span><span class="err">=</span><span class="p">,</span> <span class="o">--</span><span class="k">variable</span><span class="err">=</span><span class="k">NAME</span><span class="err">=</span><span class="k">VALUE</span>
</span></span><span class="line"><span class="cl">                           <span class="k">set psql variable NAME to VALUE</span>
</span></span><span class="line"><span class="cl">                           <span class="p">(</span><span class="k">e</span><span class="p">.</span><span class="k">g</span><span class="err">.,</span> <span class="err">-</span><span class="k">v ON_ERROR_STOP</span><span class="o">=</span><span class="err">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">V</span><span class="p">,</span> <span class="o">--</span><span class="k">version            output version information</span><span class="p">,</span> <span class="k">then exit</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">X</span><span class="p">,</span> <span class="o">--</span><span class="k">no-psqlrc          do not read startup file </span><span class="p">(</span><span class="err">~/</span><span class="p">.</span><span class="k">psqlrc</span><span class="err">)</span>
</span></span><span class="line"><span class="cl">  <span class="err">-1</span> <span class="err">(&#34;</span><span class="k">one</span><span class="err">&#34;),</span> <span class="err">--</span><span class="k">single-transaction</span>
</span></span><span class="line"><span class="cl">                           <span class="k">execute as a single transaction </span><span class="err">(</span><span class="k">if non-interactive</span><span class="err">)</span>
</span></span><span class="line"><span class="cl">  <span class="err">-?,</span> <span class="err">--</span><span class="k">help</span><span class="err">[</span><span class="o">=</span><span class="k">options</span><span class="p">]</span>     <span class="k">show this help</span><span class="p">,</span> <span class="k">then exit</span>
</span></span><span class="line"><span class="cl">      <span class="o">--</span><span class="k">help</span><span class="err">=</span><span class="k">commands      list backslash commands</span><span class="p">,</span> <span class="k">then exit</span>
</span></span><span class="line"><span class="cl">      <span class="o">--</span><span class="k">help</span><span class="err">=</span><span class="k">variables     list special variables</span><span class="p">,</span> <span class="k">then exit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">Input and output options</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">a</span><span class="p">,</span> <span class="o">--</span><span class="k">echo-all           echo all input from script</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">b</span><span class="p">,</span> <span class="o">--</span><span class="k">echo-errors        echo failed commands</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">e</span><span class="p">,</span> <span class="o">--</span><span class="k">echo-queries       echo commands sent to server</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">E</span><span class="p">,</span> <span class="o">--</span><span class="k">echo-hidden        display queries that internal commands generate</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">L</span><span class="p">,</span> <span class="o">--</span><span class="k">log-file</span><span class="err">=</span><span class="k">FILENAME  send session log to file</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">n</span><span class="p">,</span> <span class="o">--</span><span class="k">no-readline        disable enhanced command line editing </span><span class="p">(</span><span class="k">readline</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">o</span><span class="p">,</span> <span class="o">--</span><span class="k">output</span><span class="err">=</span><span class="k">FILENAME    send query results to file </span><span class="p">(</span><span class="k">or </span><span class="p">|</span><span class="k">pipe</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">q</span><span class="p">,</span> <span class="o">--</span><span class="k">quiet              run quietly </span><span class="p">(</span><span class="k">no messages</span><span class="p">,</span> <span class="k">only query output</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">s</span><span class="p">,</span> <span class="o">--</span><span class="k">single-step        single-step mode </span><span class="p">(</span><span class="k">confirm each query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">S</span><span class="p">,</span> <span class="o">--</span><span class="k">single-line        single-line mode </span><span class="p">(</span><span class="k">end of line terminates SQL command</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">Output format options</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">A</span><span class="p">,</span> <span class="o">--</span><span class="k">no-align           unaligned table output mode</span>
</span></span><span class="line"><span class="cl">      <span class="o">--</span><span class="k">csv                CSV </span><span class="p">(</span><span class="k">Comma-Separated Values</span><span class="p">)</span> <span class="k">table output mode</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">F</span><span class="p">,</span> <span class="o">--</span><span class="k">field-separator</span><span class="err">=</span><span class="k">STRING</span>
</span></span><span class="line"><span class="cl">                           <span class="k">field separator for unaligned output </span><span class="p">(</span><span class="k">default</span><span class="err">:</span> <span class="s2">&#34;|&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">H</span><span class="p">,</span> <span class="o">--</span><span class="k">html               HTML table output mode</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">P</span><span class="p">,</span> <span class="o">--</span><span class="k">pset</span><span class="err">=</span><span class="k">VAR</span><span class="p">[</span><span class="err">=</span><span class="k">ARG</span><span class="p">]</span>     <span class="k">set printing option VAR to ARG </span><span class="p">(</span><span class="k">see </span><span class="err">\</span><span class="k">pset command</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">R</span><span class="p">,</span> <span class="o">--</span><span class="k">record-separator</span><span class="err">=</span><span class="k">STRING</span>
</span></span><span class="line"><span class="cl">                           <span class="k">record separator for unaligned output </span><span class="p">(</span><span class="k">default</span><span class="err">:</span> <span class="k">newline</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">t</span><span class="p">,</span> <span class="o">--</span><span class="k">tuples-only        print rows only</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">T</span><span class="p">,</span> <span class="o">--</span><span class="k">table-attr</span><span class="err">=</span><span class="k">TEXT    set HTML table tag attributes </span><span class="p">(</span><span class="k">e</span><span class="p">.</span><span class="k">g</span><span class="err">.,</span> <span class="k">width</span><span class="err">,</span> <span class="k">border</span><span class="err">)</span>
</span></span><span class="line"><span class="cl">  <span class="err">-</span><span class="k">x</span><span class="err">,</span> <span class="err">--</span><span class="k">expanded           turn on expanded table output</span>
</span></span><span class="line"><span class="cl">  <span class="err">-</span><span class="k">z</span><span class="err">,</span> <span class="err">--</span><span class="k">field-separator-zero</span>
</span></span><span class="line"><span class="cl">                           <span class="k">set field separator for unaligned output to zero byte</span>
</span></span><span class="line"><span class="cl">  <span class="err">-0,</span> <span class="err">--</span><span class="k">record-separator-zero</span>
</span></span><span class="line"><span class="cl">                           <span class="k">set record separator for unaligned output to zero byte</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">Connection options</span><span class="err">:</span>
</span></span><span class="line"><span class="cl">  <span class="err">-</span><span class="k">h</span><span class="err">,</span> <span class="err">--</span><span class="k">host</span><span class="o">=</span><span class="k">HOSTNAME      database server host or socket directory </span><span class="p">(</span><span class="k">default</span><span class="err">:</span> <span class="s2">&#34;local socket&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">p</span><span class="p">,</span> <span class="o">--</span><span class="k">port</span><span class="err">=</span><span class="k">PORT          database server port </span><span class="p">(</span><span class="k">default</span><span class="err">:</span> <span class="s2">&#34;5432&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">U</span><span class="p">,</span> <span class="o">--</span><span class="k">username</span><span class="err">=</span><span class="k">USERNAME  database user name </span><span class="p">(</span><span class="k">default</span><span class="err">:</span> <span class="s2">&#34;root&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">w</span><span class="p">,</span> <span class="o">--</span><span class="k">no-password        never prompt for password</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="k">W</span><span class="p">,</span> <span class="o">--</span><span class="k">password           force password prompt </span><span class="p">(</span><span class="k">should happen automatically</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">For more information</span><span class="p">,</span> <span class="k">type </span><span class="s2">&#34;\?&#34;</span> <span class="p">(</span><span class="k">for internal commands</span><span class="p">)</span> <span class="k">or </span><span class="s2">&#34;\help&#34;</span> <span class="p">(</span><span class="k">for SQL</span>
</span></span><span class="line"><span class="cl"><span class="k">commands</span><span class="p">)</span> <span class="k">from within psql</span><span class="p">,</span> <span class="k">or consult the psql section in the PostgreSQL</span>
</span></span><span class="line"><span class="cl"><span class="k">documentation</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">Report bugs to </span><span class="err">&lt;</span><span class="k">pgsql-bugs</span><span class="err">@</span><span class="k">lists</span><span class="err">.</span><span class="k">postgresql</span><span class="err">.</span><span class="k">org</span><span class="err">&gt;.</span>
</span></span><span class="line"><span class="cl"><span class="k">PostgreSQL home page</span><span class="err">:</span> <span class="err">&lt;</span><span class="k">https</span><span class="err">://</span><span class="k">www</span><span class="err">.</span><span class="k">postgresql</span><span class="err">.</span><span class="k">org</span><span class="err">/&gt;</span>
</span></span></code></pre></div><h3 id="属性详解">属性详解<a hidden class="anchor" aria-hidden="true" href="#属性详解">#</a></h3>
<ol>
<li><strong>基本用法</strong>
<ul>
<li>DBNAME：要连接的数据库名称。如果省略，默认数据库是postgres。</li>
<li>USERNAME：连接数据库的用户名。如果省略，默认用户是postgres。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">psql </span><span class="err">[</span><span class="k">OPTION</span><span class="err">]...</span> <span class="err">[</span><span class="k">DBNAME </span><span class="err">[</span><span class="k">USERNAME</span><span class="err">]]</span>
</span></span></code></pre></div><ol start="2">
<li>
<p><strong>通用选项</strong></p>
<ul>
<li>-c, &ndash;command=COMMAND：只运行指定的SQL或内部命令，然后退出。</li>
<li>-d, &ndash;dbname=DBNAME：指定要连接的数据库名称。</li>
<li>-f, &ndash;file=FILENAME：从文件中执行命令，然后退出。</li>
<li>-l, &ndash;list：列出所有可用的数据库，然后退出。</li>
<li>-v, &ndash;set=, &ndash;variable=NAME=VALUE：设置psql变量NAME的值为VALUE。</li>
<li>-V, &ndash;version：显示版本信息，然后退出。</li>
<li>-X, &ndash;no-psqlrc：不读取启动文件（~/.psqlrc）。</li>
<li>-1 (&ldquo;one&rdquo;), &ndash;single-transaction：如果非交互式，则执行作为一个单一的事务。</li>
<li>-?, &ndash;help[=options]：显示帮助信息，然后退出。</li>
<li>&ndash;help=commands：列出反斜杠命令，然后退出。</li>
<li>&ndash;help=variables：列出特殊变量，然后退出。</li>
</ul>
</li>
<li>
<p><strong>输入和输出选项</strong></p>
<ul>
<li>-A, &ndash;no-align：未对齐的表输出模式。</li>
<li>&ndash;csv：CSV（逗号分隔值）表输出模式。</li>
<li>-F, &ndash;field-separator=STRING：未对齐输出的字段分隔符（默认：“|”）。</li>
<li>-H, &ndash;html：HTML表输出模式。</li>
<li>-P, &ndash;pset=VAR[=ARG]：设置打印选项VAR为ARG（请参阅\pset命令）。</li>
<li>-R, &ndash;record-separator=STRING：未对齐输出的记录分隔符（默认：换行符）。</li>
<li>-t, &ndash;tuples-only：仅打印行。</li>
<li>-T, &ndash;table-attr=TEXT：设置HTML表标签属性（例如，宽度，边框）。</li>
<li>-x, &ndash;expanded：开启扩展表输出。</li>
<li>-z, &ndash;field-separator-zero：设置未对齐输出的字段分隔符为零字节。</li>
<li>-0, &ndash;record-separator-zero：设置未对齐输出的记录分隔符为零字节。</li>
</ul>
</li>
<li>
<p><strong>连接选项</strong></p>
<ul>
<li>-h, &ndash;host=HOSTNAME：数据库服务器的主机名或套接字目录。</li>
<li>-p, &ndash;port=PORT：数据库服务器的端口。</li>
<li>-U, &ndash;username=USERNAME：数据库用户名。</li>
<li>-w, &ndash;no-password：从不提示密码。</li>
<li>-W, &ndash;password：强制密码提示（应该自动发生）。</li>
</ul>
</li>
</ol>
<h3 id="使用示例">使用示例<a hidden class="anchor" aria-hidden="true" href="#使用示例">#</a></h3>
<ol>
<li>连接到默认数据库和用户
<ul>
<li>这将连接到默认数据库（通常是postgres）和默认用户（通常是postgres）。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql
</span></span></code></pre></div><ol start="2">
<li>连接到特定数据库和用户
<ul>
<li>这将连接到名为mydatabase的数据库，并使用用户username登录。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -d mydatabase -U username
</span></span></code></pre></div><ol start="3">
<li>执行单个命令
<ul>
<li>这将连接到名为mydatabase的数据库，使用用户username登录，并执行一个SQL查询。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -d mydatabase -U username -c <span class="s2">&#34;SELECT * FROM mytable;&#34;</span>
</span></span></code></pre></div><ol start="4">
<li>执行多个命令
<ul>
<li>这将连接到名为mydatabase的数据库，使用用户username登录，并从文件myscript.sql中执行多个SQL命令。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -d mydatabase -U username -f myscript.sql
</span></span></code></pre></div><ol start="5">
<li>列出所有数据库
<ul>
<li>这将列出所有可用的数据库，然后退出。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -U postgres -l
</span></span></code></pre></div><ol start="6">
<li>设置变量
<ul>
<li>这将连接到名为mydatabase的数据库，使用用户username登录，并设置psql变量ON_ERROR_STOP的值为1。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -d mydatabase -U username -v <span class="nv">ON_ERROR_STOP</span><span class="o">=</span><span class="m">1</span>
</span></span></code></pre></div><ol start="7">
<li>安静模式
<ul>
<li>这将连接到名为mydatabase的数据库，使用用户username登录，并以安静模式运行（不显示消息，只显示查询输出）。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -d mydatabase -U username -q
</span></span></code></pre></div><ol start="8">
<li>单步模式
<ul>
<li>这将连接到名为mydatabase的数据库，使用用户username登录，并以单步模式运行（每次执行查询时都会提示确认）。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -d mydatabase -U username -s
</span></span></code></pre></div><ol start="9">
<li>单行模式
<ul>
<li>这将连接到名为mydatabase的数据库，使用用户username登录，并以单行模式运行（换行符终止SQL命令）。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -d mydatabase -U username -S
</span></span></code></pre></div><h2 id="元命令">元命令<a hidden class="anchor" aria-hidden="true" href="#元命令">#</a></h2>
<ol>
<li>在PostgreSQL的命令行工具psql中，元命令是指以反斜线（\）开头的命令，它们允许用户更高效、便捷地管理数据库。（通过<code>\?</code>查看使用文档）</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">&mdash;&mdash;&mdash;&mdash;&mdash;- 元命令 &mdash;&mdash;&mdash;&mdash;&mdash;-</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\? 或 \help</td>
<td style="text-align:center">当你不确定某个元命令的具体用法时，可以使用\?或\help命令来获取帮助信息</td>
</tr>
<tr>
<td style="text-align:center">\l 或 \list</td>
<td style="text-align:center">当你需要列出所有可用的数据库时，可以使用这个命令</td>
</tr>
<tr>
<td style="text-align:center">\encoding</td>
<td style="text-align:center">查看或设置字符集编码，这对于确保数据在不同字符集之间正确转换很重要</td>
</tr>
<tr>
<td style="text-align:center">\password [username]</td>
<td style="text-align:center">用于修改用户密码，这对于数据库的安全性至关重要</td>
</tr>
<tr>
<td style="text-align:center">\x</td>
<td style="text-align:center">以列显示的开关，执行一次为打开，再执行一次为关闭，这对于查看大量数据时调整显示方式很有用</td>
</tr>
<tr>
<td style="text-align:center">\timing on/off</td>
<td style="text-align:center">设置是否显示执行时长，这对于监控查询性能很有帮助</td>
</tr>
<tr>
<td style="text-align:center">\set AUTOCOMMIT on/off</td>
<td style="text-align:center">打开或关闭自动提交功能，这对于控制事务的提交很有用</td>
</tr>
<tr>
<td style="text-align:center">\conninfo</td>
<td style="text-align:center">显示连接信息，这对于诊断连接问题很有帮助</td>
</tr>
<tr>
<td style="text-align:center">! [command]</td>
<td style="text-align:center">执行shell命令，这对于需要与外部工具交互的情况很有用</td>
</tr>
<tr>
<td style="text-align:center">\i filename</td>
<td style="text-align:center">执行指定文件中的SQL语句，这对于批量执行SQL脚本很有用</td>
</tr>
<tr>
<td style="text-align:center">\d</td>
<td style="text-align:center">查看当前数据库下的所有表、视图和序列，这对于快速了解数据库结构很有用</td>
</tr>
<tr>
<td style="text-align:center">\dt</td>
<td style="text-align:center">只查看数据库中的所有表，这对于快速访问特定类型的数据库对象很有用</td>
</tr>
<tr>
<td style="text-align:center">\du</td>
<td style="text-align:center">查看数据库角色信息，这对于管理数据库角色很有用</td>
</tr>
<tr>
<td style="text-align:center">\db</td>
<td style="text-align:center">查看表空间列表，这对于管理数据库存储很有用</td>
</tr>
<tr>
<td style="text-align:center">\gexec</td>
<td style="text-align:center">将当前查询缓冲区发送到服务器，然后将查询输出（如果有的话）的每一行的每一列都要作为要执行的SQL语句处理，这对于自动化执行SQL语句很有用</td>
</tr>
</tbody>
</table>
<h2 id="连接数据库">连接数据库<a hidden class="anchor" aria-hidden="true" href="#连接数据库">#</a></h2>
<ol>
<li>使用 postgres 用户连接到本机 127.0.0.1 端口 5432 的 shoping 数据库。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql -h localhost -p <span class="m">5432</span> -U postgres -d shoping -W
</span></span></code></pre></div><ol start="2">
<li>使用字符串或URI连接。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ psql <span class="s2">&#34;host=localhost user=postgres password=123456 port=5432 dbname=shoping&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ psql postgresql://localhost:5432/shoping?user<span class="o">=</span>postgres
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:center">&mdash;&mdash;&mdash;&mdash;&mdash;- 连接元命令 &mdash;&mdash;&mdash;&mdash;&mdash;-</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo}</code></td>
<td style="text-align:center">连接新数据库(当前为“postgres”)</td>
</tr>
<tr>
<td style="text-align:center"><code>\conninfo</code></td>
<td style="text-align:center">显示当前连接信息</td>
</tr>
<tr>
<td style="text-align:center"><code>\encoding [ENCODING]</code></td>
<td style="text-align:center">显示或设置客户端编码</td>
</tr>
<tr>
<td style="text-align:center"><code>\password [USERNAME]</code></td>
<td style="text-align:center">安全修改用户密码</td>
</tr>
</tbody>
</table>
<h3 id="查看当前连接信息">查看当前连接信息<a hidden class="anchor" aria-hidden="true" href="#查看当前连接信息">#</a></h3>
<ol>
<li>成功建立连接之后，可以使用元命令<code>\conninfo</code>查看当前连接信息。</li>
<li>当你需要了解当前连接的详细信息，比如数据库名称、用户名、主机和端口等，可以使用这个命令。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \conninfo
</span></span><span class="line"><span class="cl">You are connected to database &#34;shoping&#34; as user &#34;postgres&#34; on host &#34;localhost&#34; (address &#34;::1&#34;) at port &#34;5432&#34;.
</span></span></code></pre></div><h3 id="切换数据库连接">切换数据库连接<a hidden class="anchor" aria-hidden="true" href="#切换数据库连接">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="err">\</span><span class="k">c</span><span class="err">[</span><span class="k">onnect</span><span class="err">]</span> <span class="err">{[</span><span class="k">DBNAME</span><span class="err">|-</span> <span class="k">USER</span><span class="err">|-</span> <span class="k">HOST</span><span class="err">|-</span> <span class="k">PORT</span><span class="err">|-]</span> <span class="err">|</span> <span class="k">conninfo</span><span class="err">}</span>
</span></span></code></pre></div><ol>
<li>
<p>使用元命令\c可以重新连接数据库：</p>
<ul>
<li>连接到新的数据库。你可以指定数据库名称（DBNAME）、用户名（USER）、主机（HOST）、端口（PORT）或者使用conninfo参数显示当前连接信息。</li>
<li>如果你想要连接到一个新的数据库，或者想要查看当前连接的详细信息，可以使用这个命令。</li>
</ul>
</li>
<li>
<p>连接到默认数据库（这将连接到默认数据库）。</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \c
</span></span><span class="line"><span class="cl">You are now connected to database &#34;postgres&#34; as user &#34;postgres&#34;.
</span></span></code></pre></div><ol start="3">
<li>连接到特定数据库（这将连接到名为mydatabase的数据库）。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \c postgres
</span></span><span class="line"><span class="cl">You are now connected to database &#34;postgres&#34; as user &#34;postgres&#34;.
</span></span></code></pre></div><ol start="4">
<li>切换用户 tony。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \c - tony
</span></span><span class="line"><span class="cl">Password for user tony:
</span></span></code></pre></div><h3 id="查看设置客户端编码">查看/设置客户端编码<a hidden class="anchor" aria-hidden="true" href="#查看设置客户端编码">#</a></h3>
<ol>
<li>通过<code>\encoding [ENCODING]</code>命令可以查看或者设置客户端的编码格式。例如：</li>
<li>查看客户端编码：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \encoding
</span></span><span class="line"><span class="cl">UTF8
</span></span></code></pre></div><ol start="3">
<li>设置和护短编码：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \encoding gbk
</span></span><span class="line"><span class="cl">postgres=# \encoding
</span></span><span class="line"><span class="cl">GBK
</span></span></code></pre></div><h3 id="修改用户密码">修改用户密码<a hidden class="anchor" aria-hidden="true" href="#修改用户密码">#</a></h3>
<ol>
<li>使用<code>\password [username]</code>命令可以安全地修改指定用户的密码，默认为修改当前用户密码。例如：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \password tony
</span></span><span class="line"><span class="cl">Enter new password for user &#34;tony&#34;: 
</span></span><span class="line"><span class="cl">Enter it again:
</span></span></code></pre></div><h2 id="查看帮助">查看帮助<a hidden class="anchor" aria-hidden="true" href="#查看帮助">#</a></h2>
<ul>
<li>psql 提供了关于该工具的命令、选项、变量配置以及 SQL 语句的帮助信息。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">帮助元命令</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\? [commands]</code></td>
<td style="text-align:center">显示反斜杠commands的帮助</td>
</tr>
<tr>
<td style="text-align:center"><code>\? options</code></td>
<td style="text-align:center">显示关于PSQL命令行选项的帮助</td>
</tr>
<tr>
<td style="text-align:center"><code>\? variables</code></td>
<td style="text-align:center">显示对特殊变量的帮助</td>
</tr>
<tr>
<td style="text-align:center"><code>\h [NAME]</code></td>
<td style="text-align:center">SQL命令的语法帮助，*表示所有命令</td>
</tr>
</tbody>
</table>
<h3 id="psql-命令帮助">psql 命令帮助<a hidden class="anchor" aria-hidden="true" href="#psql-命令帮助">#</a></h3>
<ol>
<li>使用<code>\?</code>或者<code>\? commands</code>命令可以获得所有反斜线命令的帮助。
<ul>
<li>该命令的结果和<code>psql --help=commands</code>的输出相同。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \?
</span></span><span class="line"><span class="cl">General
</span></span><span class="line"><span class="cl">  \copyright             show PostgreSQL usage and distribution terms
</span></span><span class="line"><span class="cl">  \crosstabview [COLUMNS] execute query and display results in crosstab
</span></span><span class="line"><span class="cl">  \errverbose            show most recent error message at maximum verbosity
</span></span><span class="line"><span class="cl">  \g [(OPTIONS)] [FILE]  execute query (and send results to file or |pipe);
</span></span><span class="line"><span class="cl">                         \g with no arguments is equivalent to a semicolon
</span></span><span class="line"><span class="cl">  \gdesc                 describe result of query, without executing it
</span></span><span class="line"><span class="cl">  \gexec                 execute query, then execute each value in its result
</span></span><span class="line"><span class="cl">  \gset [PREFIX]         execute query and store results in psql variables
</span></span><span class="line"><span class="cl">  \gx [(OPTIONS)] [FILE] as \g, but forces expanded output mode
</span></span><span class="line"><span class="cl">  \q                     quit psql
</span></span><span class="line"><span class="cl">  \watch [SEC]           execute query every SEC seconds
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Help
</span></span><span class="line"><span class="cl">  \? [commands]          show help on backslash commands
</span></span><span class="line"><span class="cl">  \? options             show help on psql command-line options
</span></span><span class="line"><span class="cl">  \? variables           show help on special variables
</span></span><span class="line"><span class="cl">  \h [NAME]              help on syntax of SQL commands, * for all commands
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Query Buffer
</span></span><span class="line"><span class="cl">  \e [FILE] [LINE]       edit the query buffer (or file) with external editor
</span></span><span class="line"><span class="cl">  \ef [FUNCNAME [LINE]]  edit function definition with external editor
</span></span><span class="line"><span class="cl">  \ev [VIEWNAME [LINE]]  edit view definition with external editor
</span></span><span class="line"><span class="cl">  \p                     show the contents of the query buffer
</span></span><span class="line"><span class="cl">  \r                     reset (clear) the query buffer
</span></span><span class="line"><span class="cl">  \s [FILE]              display history or save it to file
</span></span><span class="line"><span class="cl">  \w FILE                write query buffer to file
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Input/Output
</span></span><span class="line"><span class="cl">  \copy ...              perform SQL COPY with data stream to the client host
</span></span><span class="line"><span class="cl">  \echo [-n] [STRING]    write string to standard output (-n for no newline)
</span></span><span class="line"><span class="cl">  \i FILE                execute commands from file
</span></span><span class="line"><span class="cl">  \ir FILE               as \i, but relative to location of current script
</span></span><span class="line"><span class="cl">  \o [FILE]              send all query results to file or |pipe
</span></span><span class="line"><span class="cl">  \qecho [-n] [STRING]   write string to \o output stream (-n for no newline)
</span></span><span class="line"><span class="cl">  \warn [-n] [STRING]    write string to standard error (-n for no newline)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Conditional
</span></span><span class="line"><span class="cl">  \if EXPR               begin conditional block
</span></span><span class="line"><span class="cl">  \elif EXPR             alternative within current conditional block
</span></span><span class="line"><span class="cl">  \else                  final alternative within current conditional block
</span></span><span class="line"><span class="cl">  \endif                 end conditional block
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Informational
</span></span><span class="line"><span class="cl">  (options: S = show system objects, + = additional detail)
</span></span><span class="line"><span class="cl">  \d[S+]                 list tables, views, and sequences
</span></span><span class="line"><span class="cl">  \d[S+]  NAME           describe table, view, sequence, or index
</span></span><span class="line"><span class="cl">  \da[S]  [PATTERN]      list aggregates
</span></span><span class="line"><span class="cl">  \dA[+]  [PATTERN]      list access methods
</span></span><span class="line"><span class="cl">  \dAc[+] [AMPTRN [TYPEPTRN]]  list operator classes
</span></span><span class="line"><span class="cl">  \dAf[+] [AMPTRN [TYPEPTRN]]  list operator families
</span></span><span class="line"><span class="cl">  \dAo[+] [AMPTRN [OPFPTRN]]   list operators of operator families
</span></span><span class="line"><span class="cl">  \dAp[+] [AMPTRN [OPFPTRN]]   list support functions of operator families
</span></span><span class="line"><span class="cl">  \db[+]  [PATTERN]      list tablespaces
</span></span><span class="line"><span class="cl">  \dc[S+] [PATTERN]      list conversions
</span></span><span class="line"><span class="cl">  \dC[+]  [PATTERN]      list casts
</span></span><span class="line"><span class="cl">  \dd[S]  [PATTERN]      show object descriptions not displayed elsewhere
</span></span><span class="line"><span class="cl">  \dD[S+] [PATTERN]      list domains
</span></span><span class="line"><span class="cl">  \ddp    [PATTERN]      list default privileges
</span></span><span class="line"><span class="cl">  \dE[S+] [PATTERN]      list foreign tables
</span></span><span class="line"><span class="cl">  \des[+] [PATTERN]      list foreign servers
</span></span><span class="line"><span class="cl">  \det[+] [PATTERN]      list foreign tables
</span></span><span class="line"><span class="cl">  \deu[+] [PATTERN]      list user mappings
</span></span><span class="line"><span class="cl">  \dew[+] [PATTERN]      list foreign-data wrappers
</span></span><span class="line"><span class="cl">  \df[anptw][S+] [FUNCPTRN [TYPEPTRN ...]]
</span></span><span class="line"><span class="cl">                         list [only agg/normal/procedure/trigger/window] functions
</span></span><span class="line"><span class="cl">  \dF[+]  [PATTERN]      list text search configurations
</span></span><span class="line"><span class="cl">  \dFd[+] [PATTERN]      list text search dictionaries
</span></span><span class="line"><span class="cl">  \dFp[+] [PATTERN]      list text search parsers
</span></span><span class="line"><span class="cl">  \dFt[+] [PATTERN]      list text search templates
</span></span><span class="line"><span class="cl">  \dg[S+] [PATTERN]      list roles
</span></span><span class="line"><span class="cl">  \di[S+] [PATTERN]      list indexes
</span></span><span class="line"><span class="cl">  \dl                    list large objects, same as \lo_list
</span></span><span class="line"><span class="cl">  \dL[S+] [PATTERN]      list procedural languages
</span></span><span class="line"><span class="cl">  \dm[S+] [PATTERN]      list materialized views
</span></span><span class="line"><span class="cl">  \dn[S+] [PATTERN]      list schemas
</span></span><span class="line"><span class="cl">  \do[S+] [OPPTRN [TYPEPTRN [TYPEPTRN]]]
</span></span><span class="line"><span class="cl">                         list operators
</span></span><span class="line"><span class="cl">  \dO[S+] [PATTERN]      list collations
</span></span><span class="line"><span class="cl">  \dp     [PATTERN]      list table, view, and sequence access privileges
</span></span><span class="line"><span class="cl">  \dP[itn+] [PATTERN]    list [only index/table] partitioned relations [n=nested]
</span></span><span class="line"><span class="cl">  \drds [ROLEPTRN [DBPTRN]] list per-database role settings
</span></span><span class="line"><span class="cl">  \dRp[+] [PATTERN]      list replication publications
</span></span><span class="line"><span class="cl">  \dRs[+] [PATTERN]      list replication subscriptions
</span></span><span class="line"><span class="cl">  \ds[S+] [PATTERN]      list sequences
</span></span><span class="line"><span class="cl">  \dt[S+] [PATTERN]      list tables
</span></span><span class="line"><span class="cl">  \dT[S+] [PATTERN]      list data types
</span></span><span class="line"><span class="cl">  \du[S+] [PATTERN]      list roles
</span></span><span class="line"><span class="cl">  \dv[S+] [PATTERN]      list views
</span></span><span class="line"><span class="cl">  \dx[+]  [PATTERN]      list extensions
</span></span><span class="line"><span class="cl">  \dX     [PATTERN]      list extended statistics
</span></span><span class="line"><span class="cl">  \dy[+]  [PATTERN]      list event triggers
</span></span><span class="line"><span class="cl">  \l[+]   [PATTERN]      list databases
</span></span><span class="line"><span class="cl">  \sf[+]  FUNCNAME       show a function&#39;s definition
</span></span><span class="line"><span class="cl">  \sv[+]  VIEWNAME       show a view&#39;s definition
</span></span><span class="line"><span class="cl">  \z      [PATTERN]      same as \dp
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Formatting
</span></span><span class="line"><span class="cl">  \a                     toggle between unaligned and aligned output mode
</span></span><span class="line"><span class="cl">  \C [STRING]            set table title, or unset if none
</span></span><span class="line"><span class="cl">  \f [STRING]            show or set field separator for unaligned query output
</span></span><span class="line"><span class="cl">  \H                     toggle HTML output mode (currently off)
</span></span><span class="line"><span class="cl">  \pset [NAME [VALUE]]   set table output option
</span></span><span class="line"><span class="cl">                         (border|columns|csv_fieldsep|expanded|fieldsep|
</span></span><span class="line"><span class="cl">                         fieldsep_zero|footer|format|linestyle|null|
</span></span><span class="line"><span class="cl">                         numericlocale|pager|pager_min_lines|recordsep|
</span></span><span class="line"><span class="cl">                         recordsep_zero|tableattr|title|tuples_only|
</span></span><span class="line"><span class="cl">                         unicode_border_linestyle|unicode_column_linestyle|
</span></span><span class="line"><span class="cl">                         unicode_header_linestyle)
</span></span><span class="line"><span class="cl">  \t [on|off]            show only rows (currently off)
</span></span><span class="line"><span class="cl">  \T [STRING]            set HTML &lt;table&gt; tag attributes, or unset if none
</span></span><span class="line"><span class="cl">  \x [on|off|auto]       toggle expanded output (currently off)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Connection
</span></span><span class="line"><span class="cl">  \c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo}
</span></span><span class="line"><span class="cl">                         connect to new database (currently &#34;postgres&#34;)
</span></span><span class="line"><span class="cl">  \conninfo              display information about current connection
</span></span><span class="line"><span class="cl">  \encoding [ENCODING]   show or set client encoding
</span></span><span class="line"><span class="cl">  \password [USERNAME]   securely change the password for a user
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Operating System
</span></span><span class="line"><span class="cl">  \cd [DIR]              change the current working directory
</span></span><span class="line"><span class="cl">  \setenv NAME [VALUE]   set or unset environment variable
</span></span><span class="line"><span class="cl">  \timing [on|off]       toggle timing of commands (currently off)
</span></span><span class="line"><span class="cl">  \! [COMMAND]           execute command in shell or start interactive shell
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Variables
</span></span><span class="line"><span class="cl">  \prompt [TEXT] NAME    prompt user to set internal variable
</span></span><span class="line"><span class="cl">  \set [NAME [VALUE]]    set internal variable, or list all if no parameters
</span></span><span class="line"><span class="cl">  \unset NAME            unset (delete) internal variable
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Large Objects
</span></span><span class="line"><span class="cl">  \lo_export LOBOID FILE
</span></span><span class="line"><span class="cl">  \lo_import FILE [COMMENT]
</span></span><span class="line"><span class="cl">  \lo_list
</span></span><span class="line"><span class="cl">  \lo_unlink LOBOID      large object operations
</span></span></code></pre></div><h3 id="psql-命令行选项帮助">psql 命令行选项帮助<a hidden class="anchor" aria-hidden="true" href="#psql-命令行选项帮助">#</a></h3>
<ol>
<li>输入<code>\? options</code>命令可以获得运行 psql 时的命令行选项相关的帮助：
<ul>
<li>该命令的结果和上文中的<code>psql -?</code>或者<code>psql --help</code>的输出相同。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \? options
</span></span><span class="line"><span class="cl">psql is the PostgreSQL interactive terminal.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">  psql [OPTION]... [DBNAME [USERNAME]]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">General options:
</span></span><span class="line"><span class="cl">  -c, --command=COMMAND    run only single command (SQL or internal) and exit
</span></span><span class="line"><span class="cl">  -d, --dbname=DBNAME      database name to connect to (default: &#34;root&#34;)
</span></span><span class="line"><span class="cl">  -f, --file=FILENAME      execute commands from file, then exit
</span></span><span class="line"><span class="cl">  -l, --list               list available databases, then exit
</span></span><span class="line"><span class="cl">  -v, --set=, --variable=NAME=VALUE
</span></span><span class="line"><span class="cl">                           set psql variable NAME to VALUE
</span></span><span class="line"><span class="cl">                           (e.g., -v ON_ERROR_STOP=1)
</span></span><span class="line"><span class="cl">  -V, --version            output version information, then exit
</span></span><span class="line"><span class="cl">  -X, --no-psqlrc          do not read startup file (~/.psqlrc)
</span></span><span class="line"><span class="cl">  -1 (&#34;one&#34;), --single-transaction
</span></span><span class="line"><span class="cl">                           execute as a single transaction (if non-interactive)
</span></span><span class="line"><span class="cl">  -?, --help[=options]     show this help, then exit
</span></span><span class="line"><span class="cl">      --help=commands      list backslash commands, then exit
</span></span><span class="line"><span class="cl">      --help=variables     list special variables, then exit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Input and output options:
</span></span><span class="line"><span class="cl">  -a, --echo-all           echo all input from script
</span></span><span class="line"><span class="cl">  -b, --echo-errors        echo failed commands
</span></span><span class="line"><span class="cl">  -e, --echo-queries       echo commands sent to server
</span></span><span class="line"><span class="cl">  -E, --echo-hidden        display queries that internal commands generate
</span></span><span class="line"><span class="cl">  -L, --log-file=FILENAME  send session log to file
</span></span><span class="line"><span class="cl">  -n, --no-readline        disable enhanced command line editing (readline)
</span></span><span class="line"><span class="cl">  -o, --output=FILENAME    send query results to file (or |pipe)
</span></span><span class="line"><span class="cl">  -q, --quiet              run quietly (no messages, only query output)
</span></span><span class="line"><span class="cl">  -s, --single-step        single-step mode (confirm each query)
</span></span><span class="line"><span class="cl">  -S, --single-line        single-line mode (end of line terminates SQL command)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Output format options:
</span></span><span class="line"><span class="cl">  -A, --no-align           unaligned table output mode
</span></span><span class="line"><span class="cl">      --csv                CSV (Comma-Separated Values) table output mode
</span></span><span class="line"><span class="cl">  -F, --field-separator=STRING
</span></span><span class="line"><span class="cl">                           field separator for unaligned output (default: &#34;|&#34;)
</span></span><span class="line"><span class="cl">  -H, --html               HTML table output mode
</span></span><span class="line"><span class="cl">  -P, --pset=VAR[=ARG]     set printing option VAR to ARG (see \pset command)
</span></span><span class="line"><span class="cl">  -R, --record-separator=STRING
</span></span><span class="line"><span class="cl">                           record separator for unaligned output (default: newline)
</span></span><span class="line"><span class="cl">  -t, --tuples-only        print rows only
</span></span><span class="line"><span class="cl">  -T, --table-attr=TEXT    set HTML table tag attributes (e.g., width, border)
</span></span><span class="line"><span class="cl">  -x, --expanded           turn on expanded table output
</span></span><span class="line"><span class="cl">  -z, --field-separator-zero
</span></span><span class="line"><span class="cl">                           set field separator for unaligned output to zero byte
</span></span><span class="line"><span class="cl">  -0, --record-separator-zero
</span></span><span class="line"><span class="cl">                           set record separator for unaligned output to zero byte
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Connection options:
</span></span><span class="line"><span class="cl">  -h, --host=HOSTNAME      database server host or socket directory (default: &#34;local socket&#34;)
</span></span><span class="line"><span class="cl">  -p, --port=PORT          database server port (default: &#34;5432&#34;)
</span></span><span class="line"><span class="cl">  -U, --username=USERNAME  database user name (default: &#34;root&#34;)
</span></span><span class="line"><span class="cl">  -w, --no-password        never prompt for password
</span></span><span class="line"><span class="cl">  -W, --password           force password prompt (should happen automatically)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">For more information, type &#34;\?&#34; (for internal commands) or &#34;\help&#34; (for SQL
</span></span><span class="line"><span class="cl">commands) from within psql, or consult the psql section in the PostgreSQL
</span></span><span class="line"><span class="cl">documentation.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Report bugs to &lt;pgsql-bugs@lists.postgresql.org&gt;.
</span></span><span class="line"><span class="cl">PostgreSQL home page: &lt;https://www.postgresql.org/&gt;
</span></span></code></pre></div><h3 id="psql-配置变量帮助">psql 配置变量帮助<a hidden class="anchor" aria-hidden="true" href="#psql-配置变量帮助">#</a></h3>
<ol>
<li>输入<code>\? variables</code>命令可以获得 psql 的配置变量、环境变量以及显示设置相关的帮助信息：
<ul>
<li>该命令的结果和<code>psql --help=variables</code>的输出相同。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \? variables
</span></span><span class="line"><span class="cl">List of specially treated variables
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">psql variables:
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">  psql --set=NAME=VALUE
</span></span><span class="line"><span class="cl">  or \set NAME VALUE inside psql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  AUTOCOMMIT
</span></span><span class="line"><span class="cl">    if set, successful SQL commands are automatically committed
</span></span><span class="line"><span class="cl">  COMP_KEYWORD_CASE
</span></span><span class="line"><span class="cl">    determines the case used to complete SQL key words
</span></span><span class="line"><span class="cl">    [lower, upper, preserve-lower, preserve-upper]
</span></span><span class="line"><span class="cl">  DBNAME
</span></span><span class="line"><span class="cl">    the currently connected database name
</span></span><span class="line"><span class="cl">  ECHO
</span></span><span class="line"><span class="cl">    controls what input is written to standard output
</span></span><span class="line"><span class="cl">    [all, errors, none, queries]
</span></span><span class="line"><span class="cl">  ECHO_HIDDEN
</span></span><span class="line"><span class="cl">    if set, display internal queries executed by backslash commands;
</span></span><span class="line"><span class="cl">    if set to &#34;noexec&#34;, just show them without execution
</span></span><span class="line"><span class="cl">  ENCODING
</span></span><span class="line"><span class="cl">    current client character set encoding
</span></span><span class="line"><span class="cl">  ERROR
</span></span><span class="line"><span class="cl">    true if last query failed, else false
</span></span><span class="line"><span class="cl">  FETCH_COUNT
</span></span><span class="line"><span class="cl">    the number of result rows to fetch and display at a time (0 = unlimited)
</span></span><span class="line"><span class="cl">  HIDE_TABLEAM
</span></span><span class="line"><span class="cl">    if set, table access methods are not displayed
</span></span><span class="line"><span class="cl">  HIDE_TOAST_COMPRESSION
</span></span><span class="line"><span class="cl">    if set, compression methods are not displayed
</span></span><span class="line"><span class="cl">  HISTCONTROL
</span></span><span class="line"><span class="cl">    controls command history [ignorespace, ignoredups, ignoreboth]
</span></span><span class="line"><span class="cl">  HISTFILE
</span></span><span class="line"><span class="cl">    file name used to store the command history
</span></span><span class="line"><span class="cl">  HISTSIZE
</span></span><span class="line"><span class="cl">    maximum number of commands to store in the command history
</span></span><span class="line"><span class="cl">  HOST
</span></span><span class="line"><span class="cl">    the currently connected database server host
</span></span><span class="line"><span class="cl">  IGNOREEOF
</span></span><span class="line"><span class="cl">    number of EOFs needed to terminate an interactive session
</span></span><span class="line"><span class="cl">  LASTOID
</span></span><span class="line"><span class="cl">    value of the last affected OID
</span></span><span class="line"><span class="cl">  LAST_ERROR_MESSAGE
</span></span><span class="line"><span class="cl">  LAST_ERROR_SQLSTATE
</span></span><span class="line"><span class="cl">    message and SQLSTATE of last error, or empty string and &#34;00000&#34; if none
</span></span><span class="line"><span class="cl">  ON_ERROR_ROLLBACK
</span></span><span class="line"><span class="cl">    if set, an error doesn&#39;t stop a transaction (uses implicit savepoints)
</span></span><span class="line"><span class="cl">  ON_ERROR_STOP
</span></span><span class="line"><span class="cl">    stop batch execution after error
</span></span><span class="line"><span class="cl">  PORT
</span></span><span class="line"><span class="cl">    server port of the current connection
</span></span><span class="line"><span class="cl">  PROMPT1
</span></span><span class="line"><span class="cl">    specifies the standard psql prompt
</span></span><span class="line"><span class="cl">  PROMPT2
</span></span><span class="line"><span class="cl">    specifies the prompt used when a statement continues from a previous line
</span></span><span class="line"><span class="cl">  PROMPT3
</span></span><span class="line"><span class="cl">    specifies the prompt used during COPY ... FROM STDIN
</span></span><span class="line"><span class="cl">  QUIET
</span></span><span class="line"><span class="cl">    run quietly (same as -q option)
</span></span><span class="line"><span class="cl">  ROW_COUNT
</span></span><span class="line"><span class="cl">    number of rows returned or affected by last query, or 0
</span></span><span class="line"><span class="cl">  SERVER_VERSION_NAME
</span></span><span class="line"><span class="cl">  SERVER_VERSION_NUM
</span></span><span class="line"><span class="cl">    server&#39;s version (in short string or numeric format)
</span></span><span class="line"><span class="cl">  SHOW_CONTEXT
</span></span><span class="line"><span class="cl">    controls display of message context fields [never, errors, always]
</span></span><span class="line"><span class="cl">  SINGLELINE
</span></span><span class="line"><span class="cl">    if set, end of line terminates SQL commands (same as -S option)
</span></span><span class="line"><span class="cl">  SINGLESTEP
</span></span><span class="line"><span class="cl">    single-step mode (same as -s option)
</span></span><span class="line"><span class="cl">  SQLSTATE
</span></span><span class="line"><span class="cl">    SQLSTATE of last query, or &#34;00000&#34; if no error
</span></span><span class="line"><span class="cl">  USER
</span></span><span class="line"><span class="cl">    the currently connected database user
</span></span><span class="line"><span class="cl">  VERBOSITY
</span></span><span class="line"><span class="cl">    controls verbosity of error reports [default, verbose, terse, sqlstate]
</span></span><span class="line"><span class="cl">  VERSION
</span></span><span class="line"><span class="cl">  VERSION_NAME
</span></span><span class="line"><span class="cl">  VERSION_NUM
</span></span><span class="line"><span class="cl">    psql&#39;s version (in verbose string, short string, or numeric format)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Display settings:
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">  psql --pset=NAME[=VALUE]
</span></span><span class="line"><span class="cl">  or \pset NAME [VALUE] inside psql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  border
</span></span><span class="line"><span class="cl">    border style (number)
</span></span><span class="line"><span class="cl">  columns
</span></span><span class="line"><span class="cl">    target width for the wrapped format
</span></span><span class="line"><span class="cl">  expanded (or x)
</span></span><span class="line"><span class="cl">    expanded output [on, off, auto]
</span></span><span class="line"><span class="cl">  fieldsep
</span></span><span class="line"><span class="cl">    field separator for unaligned output (default &#34;|&#34;)
</span></span><span class="line"><span class="cl">  fieldsep_zero
</span></span><span class="line"><span class="cl">    set field separator for unaligned output to a zero byte
</span></span><span class="line"><span class="cl">  footer
</span></span><span class="line"><span class="cl">    enable or disable display of the table footer [on, off]
</span></span><span class="line"><span class="cl">  format
</span></span><span class="line"><span class="cl">    set output format [unaligned, aligned, wrapped, html, asciidoc, ...]
</span></span><span class="line"><span class="cl">  linestyle
</span></span><span class="line"><span class="cl">    set the border line drawing style [ascii, old-ascii, unicode]
</span></span><span class="line"><span class="cl">  null
</span></span><span class="line"><span class="cl">    set the string to be printed in place of a null value
</span></span><span class="line"><span class="cl">  numericlocale
</span></span><span class="line"><span class="cl">    enable display of a locale-specific character to separate groups of digits
</span></span><span class="line"><span class="cl">  pager
</span></span><span class="line"><span class="cl">    control when an external pager is used [yes, no, always]
</span></span><span class="line"><span class="cl">  recordsep
</span></span><span class="line"><span class="cl">    record (line) separator for unaligned output
</span></span><span class="line"><span class="cl">  recordsep_zero
</span></span><span class="line"><span class="cl">    set record separator for unaligned output to a zero byte
</span></span><span class="line"><span class="cl">  tableattr (or T)
</span></span><span class="line"><span class="cl">    specify attributes for table tag in html format, or proportional
</span></span><span class="line"><span class="cl">    column widths for left-aligned data types in latex-longtable format
</span></span><span class="line"><span class="cl">  title
</span></span><span class="line"><span class="cl">    set the table title for subsequently printed tables
</span></span><span class="line"><span class="cl">  tuples_only
</span></span><span class="line"><span class="cl">    if set, only actual table data is shown
</span></span><span class="line"><span class="cl">  unicode_border_linestyle
</span></span><span class="line"><span class="cl">  unicode_column_linestyle
</span></span><span class="line"><span class="cl">  unicode_header_linestyle
</span></span><span class="line"><span class="cl">    set the style of Unicode line drawing [single, double]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Environment variables:
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">  NAME=VALUE [NAME=VALUE] psql ...
</span></span><span class="line"><span class="cl">  or \setenv NAME [VALUE] inside psql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  COLUMNS
</span></span><span class="line"><span class="cl">    number of columns for wrapped format
</span></span><span class="line"><span class="cl">  PGAPPNAME
</span></span><span class="line"><span class="cl">    same as the application_name connection parameter
</span></span><span class="line"><span class="cl">  PGDATABASE
</span></span><span class="line"><span class="cl">    same as the dbname connection parameter
</span></span><span class="line"><span class="cl">  PGHOST
</span></span><span class="line"><span class="cl">    same as the host connection parameter
</span></span><span class="line"><span class="cl">  PGPASSFILE
</span></span><span class="line"><span class="cl">    password file name
</span></span><span class="line"><span class="cl">  PGPASSWORD
</span></span><span class="line"><span class="cl">    connection password (not recommended)
</span></span><span class="line"><span class="cl">  PGPORT
</span></span><span class="line"><span class="cl">    same as the port connection parameter
</span></span><span class="line"><span class="cl">  PGUSER
</span></span><span class="line"><span class="cl">    same as the user connection parameter
</span></span><span class="line"><span class="cl">  PSQL_EDITOR, EDITOR, VISUAL
</span></span><span class="line"><span class="cl">    editor used by the \e, \ef, and \ev commands
</span></span><span class="line"><span class="cl">  PSQL_EDITOR_LINENUMBER_ARG
</span></span><span class="line"><span class="cl">    how to specify a line number when invoking the editor
</span></span><span class="line"><span class="cl">  PSQL_HISTORY
</span></span><span class="line"><span class="cl">    alternative location for the command history file
</span></span><span class="line"><span class="cl">  PSQL_PAGER, PAGER
</span></span><span class="line"><span class="cl">    name of external pager program
</span></span><span class="line"><span class="cl">  PSQLRC
</span></span><span class="line"><span class="cl">    alternative location for the user&#39;s .psqlrc file
</span></span><span class="line"><span class="cl">  SHELL
</span></span><span class="line"><span class="cl">    shell used by the \! command
</span></span><span class="line"><span class="cl">  TMPDIR
</span></span><span class="line"><span class="cl">    directory for temporary files
</span></span></code></pre></div><h3 id="sql-语句帮助">SQL 语句帮助<a hidden class="anchor" aria-hidden="true" href="#sql-语句帮助">#</a></h3>
<ol>
<li>输入<code>\h [ command ]</code>或者<code>\help [ command ]</code>命令可以获得 SQL 命令语法相关的帮助：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \h
</span></span><span class="line"><span class="cl">Available help:
</span></span><span class="line"><span class="cl">  ABORT                            CHECKPOINT                       CREATE USER                      DROP TRIGGER
</span></span><span class="line"><span class="cl">  ALTER AGGREGATE                  CLOSE                            CREATE USER MAPPING              DROP TYPE
</span></span><span class="line"><span class="cl">  ALTER COLLATION                  CLUSTER                          CREATE VIEW                      DROP USER
</span></span><span class="line"><span class="cl">  ALTER CONVERSION                 COMMENT                          DEALLOCATE                       DROP USER MAPPING
</span></span><span class="line"><span class="cl">  ALTER DATABASE                   COMMIT                           DECLARE                          DROP VIEW
</span></span><span class="line"><span class="cl">  ALTER DEFAULT PRIVILEGES         COMMIT PREPARED                  DELETE                           END
</span></span><span class="line"><span class="cl">  ALTER DOMAIN                     COPY                             DISCARD                          EXECUTE
</span></span><span class="line"><span class="cl">  ALTER EVENT TRIGGER              CREATE ACCESS METHOD             DO                               EXPLAIN
</span></span><span class="line"><span class="cl">  ALTER EXTENSION                  CREATE AGGREGATE                 DROP ACCESS METHOD               FETCH
</span></span><span class="line"><span class="cl">  ALTER FOREIGN DATA WRAPPER       CREATE CAST                      DROP AGGREGATE                   GRANT
</span></span><span class="line"><span class="cl">  ALTER FOREIGN TABLE              CREATE COLLATION                 DROP CAST                        IMPORT FOREIGN SCHEMA
</span></span><span class="line"><span class="cl">  ALTER FUNCTION                   CREATE CONVERSION                DROP COLLATION                   INSERT
</span></span><span class="line"><span class="cl">  ALTER GROUP                      CREATE DATABASE                  DROP CONVERSION                  LISTEN
</span></span><span class="line"><span class="cl">  ALTER INDEX                      CREATE DOMAIN                    DROP DATABASE                    LOAD
</span></span><span class="line"><span class="cl">  ALTER LANGUAGE                   CREATE EVENT TRIGGER             DROP DOMAIN                      LOCK
</span></span><span class="line"><span class="cl">  ALTER LARGE OBJECT               CREATE EXTENSION                 DROP EVENT TRIGGER               MOVE
</span></span><span class="line"><span class="cl">  ALTER MATERIALIZED VIEW          CREATE FOREIGN DATA WRAPPER      DROP EXTENSION                   NOTIFY
</span></span><span class="line"><span class="cl">  ALTER OPERATOR                   CREATE FOREIGN TABLE             DROP FOREIGN DATA WRAPPER        PREPARE
</span></span><span class="line"><span class="cl">  ALTER OPERATOR CLASS             CREATE FUNCTION                  DROP FOREIGN TABLE               PREPARE TRANSACTION
</span></span><span class="line"><span class="cl">  ALTER OPERATOR FAMILY            CREATE GROUP                     DROP FUNCTION                    REASSIGN OWNED
</span></span><span class="line"><span class="cl">  ALTER POLICY                     CREATE INDEX                     DROP GROUP                       REFRESH MATERIALIZED VIEW
</span></span><span class="line"><span class="cl">  ALTER PROCEDURE                  CREATE LANGUAGE                  DROP INDEX                       REINDEX
</span></span><span class="line"><span class="cl">  ALTER PUBLICATION                CREATE MATERIALIZED VIEW         DROP LANGUAGE                    RELEASE SAVEPOINT
</span></span><span class="line"><span class="cl">  ALTER ROLE                       CREATE OPERATOR                  DROP MATERIALIZED VIEW           RESET
</span></span><span class="line"><span class="cl">  ALTER ROUTINE                    CREATE OPERATOR CLASS            DROP OPERATOR                    REVOKE
</span></span><span class="line"><span class="cl">  ALTER RULE                       CREATE OPERATOR FAMILY           DROP OPERATOR CLASS              ROLLBACK
</span></span><span class="line"><span class="cl">  ALTER SCHEMA                     CREATE POLICY                    DROP OPERATOR FAMILY             ROLLBACK PREPARED
</span></span><span class="line"><span class="cl">  ALTER SEQUENCE                   CREATE PROCEDURE                 DROP OWNED                       ROLLBACK TO SAVEPOINT
</span></span><span class="line"><span class="cl">  ALTER SERVER                     CREATE PUBLICATION               DROP POLICY                      SAVEPOINT
</span></span><span class="line"><span class="cl">  ALTER STATISTICS                 CREATE ROLE                      DROP PROCEDURE                   SECURITY LABEL
</span></span><span class="line"><span class="cl">  ALTER SUBSCRIPTION               CREATE RULE                      DROP PUBLICATION                 SELECT
</span></span><span class="line"><span class="cl">  ALTER SYSTEM                     CREATE SCHEMA                    DROP ROLE                        SELECT INTO
</span></span><span class="line"><span class="cl">  ALTER TABLE                      CREATE SEQUENCE                  DROP ROUTINE                     SET
</span></span><span class="line"><span class="cl">  ALTER TABLESPACE                 CREATE SERVER                    DROP RULE                        SET CONSTRAINTS
</span></span><span class="line"><span class="cl">  ALTER TEXT SEARCH CONFIGURATION  CREATE STATISTICS                DROP SCHEMA                      SET ROLE
</span></span><span class="line"><span class="cl">  ALTER TEXT SEARCH DICTIONARY     CREATE SUBSCRIPTION              DROP SEQUENCE                    SET SESSION AUTHORIZATION
</span></span><span class="line"><span class="cl">  ALTER TEXT SEARCH PARSER         CREATE TABLE                     DROP SERVER                      SET TRANSACTION
</span></span><span class="line"><span class="cl">  ALTER TEXT SEARCH TEMPLATE       CREATE TABLE AS                  DROP STATISTICS                  SHOW
</span></span><span class="line"><span class="cl">  ALTER TRIGGER                    CREATE TABLESPACE                DROP SUBSCRIPTION                START TRANSACTION
</span></span><span class="line"><span class="cl">  ALTER TYPE                       CREATE TEXT SEARCH CONFIGURATION DROP TABLE                       TABLE
</span></span><span class="line"><span class="cl">  ALTER USER                       CREATE TEXT SEARCH DICTIONARY    DROP TABLESPACE                  TRUNCATE
</span></span><span class="line"><span class="cl">  ALTER USER MAPPING               CREATE TEXT SEARCH PARSER        DROP TEXT SEARCH CONFIGURATION   UNLISTEN
</span></span><span class="line"><span class="cl">  ALTER VIEW                       CREATE TEXT SEARCH TEMPLATE      DROP TEXT SEARCH DICTIONARY      UPDATE
</span></span><span class="line"><span class="cl">  ANALYZE                          CREATE TRANSFORM                 DROP TEXT SEARCH PARSER          VACUUM
</span></span><span class="line"><span class="cl">  BEGIN                            CREATE TRIGGER                   DROP TEXT SEARCH TEMPLATE        VALUES
</span></span><span class="line"><span class="cl">  CALL                             CREATE TYPE                      DROP TRANSFORM                   WITH
</span></span></code></pre></div><ol start="2">
<li>直接查看某个具体 SQL 命令的语法帮助，例如：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \h create index
</span></span><span class="line"><span class="cl">Command:     CREATE INDEX
</span></span><span class="line"><span class="cl">Description: define a new index
</span></span><span class="line"><span class="cl">Syntax:
</span></span><span class="line"><span class="cl">CREATE [ UNIQUE ] INDEX [ CONCURRENTLY ] [ [ IF NOT EXISTS ] name ] ON [ ONLY ] table_name [ USING method ]
</span></span><span class="line"><span class="cl">    ( { column_name | ( expression ) } [ COLLATE collation ] [ opclass [ ( opclass_parameter = value [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ] [, ...] )
</span></span><span class="line"><span class="cl">    [ INCLUDE ( column_name [, ...] ) ]
</span></span><span class="line"><span class="cl">    [ WITH ( storage_parameter [= value] [, ... ] ) ]
</span></span><span class="line"><span class="cl">    [ TABLESPACE tablespace_name ]
</span></span><span class="line"><span class="cl">    [ WHERE predicate ]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">URL: https://www.postgresql.org/docs/14/sql-createindex.html
</span></span></code></pre></div><h2 id="退出-psql-工具">退出 psql 工具<a hidden class="anchor" aria-hidden="true" href="#退出-psql-工具">#</a></h2>
<ol>
<li>退出 psql 终端的命令包括\q、\quit、quit以及exit。例如：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# \q
</span></span><span class="line"><span class="cl">#
</span></span></code></pre></div><h2 id="常用元命令">常用元命令<a hidden class="anchor" aria-hidden="true" href="#常用元命令">#</a></h2>
<h3 id="执行-sql-语句">执行 SQL 语句<a hidden class="anchor" aria-hidden="true" href="#执行-sql-语句">#</a></h3>
<ol>
<li>psql 中的 SQL 命令以;或者\g结束，同时发送到服务端执行并返回结果。例如，以下查询返回了当前 PostgreSQL 数据库的版本：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# SELECT version();
</span></span><span class="line"><span class="cl">                                                           version                                                           
</span></span><span class="line"><span class="cl">-----------------------------------------------------------------------------------------------------------------------------
</span></span><span class="line"><span class="cl"> PostgreSQL 14.4 (Debian 14.4-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit
</span></span><span class="line"><span class="cl"> (1 row)
</span></span></code></pre></div><h3 id="保存查询结果">保存查询结果<a hidden class="anchor" aria-hidden="true" href="#保存查询结果">#</a></h3>
<ol>
<li>如果想要将查询结果直接保存到某个文件中，可以使用\g filename命令。例如：
<ul>
<li>此时，数据库的版本信息被保存到了操作系统当前工作目录下的 result.txt 文件中。</li>
<li><code>\! command</code>用于执行操作系统命令，这里使用 Linux 的 ls 命令查看文件列表。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">postgres=# SELECT version() \g result.txt
</span></span><span class="line"><span class="cl">postgres=#
</span></span><span class="line"><span class="cl">postgres-# \! ls -al
</span></span><span class="line"><span class="cl">total 92
</span></span><span class="line"><span class="cl">drwxr-xr-x   1 root root 4096 Sep 22 21:59 .
</span></span><span class="line"><span class="cl">drwxr-xr-x   1 root root 4096 Sep 22 21:59 ..
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Aug  1  2022 bin
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Jul  1  2022 boot
</span></span><span class="line"><span class="cl">drwxr-xr-x  11 root root 3140 Sep 22 11:35 dev
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Sep 18 20:31 docker-entrypoint-initdb.d
</span></span><span class="line"><span class="cl">-rwxr-xr-x   1 root root    0 Sep 18 20:34 .dockerenv
</span></span><span class="line"><span class="cl">drwxr-xr-x   1 root root 4096 Sep 18 20:34 etc
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Jul  1  2022 home
</span></span><span class="line"><span class="cl">drwxr-xr-x   1 root root 4096 Aug  1  2022 lib
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Aug  1  2022 lib64
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Aug  1  2022 media
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Aug  1  2022 mnt
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Aug  1  2022 opt
</span></span><span class="line"><span class="cl">dr-xr-xr-x 219 root root    0 Sep 22 11:35 proc
</span></span><span class="line"><span class="cl">-rw-r--r--   1 root root  386 Sep 22 21:59 result.txt
</span></span><span class="line"><span class="cl">drwx------   1 root root 4096 Sep 20 20:46 root
</span></span><span class="line"><span class="cl">drwxr-xr-x   1 root root 4096 Aug  2  2022 run
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Aug  1  2022 sbin
</span></span><span class="line"><span class="cl">drwxr-xr-x   2 root root 4096 Aug  1  2022 srv
</span></span><span class="line"><span class="cl">dr-xr-xr-x  11 root root    0 Sep 22 11:35 sys
</span></span><span class="line"><span class="cl">drwxrwxrwt   1 root root 4096 Aug  2  2022 tmp
</span></span><span class="line"><span class="cl">drwxr-xr-x   1 root root 4096 Aug  1  2022 usr
</span></span><span class="line"><span class="cl">drwxr-xr-x   1 root root 4096 Aug  1  2022 var
</span></span><span class="line"><span class="cl">postgres=#
</span></span><span class="line"><span class="cl">postgres-# \! cat result.txt
</span></span><span class="line"><span class="cl">                                                           version                                                           
</span></span><span class="line"><span class="cl">-----------------------------------------------------------------------------------------------------------------------------
</span></span><span class="line"><span class="cl"> PostgreSQL 14.4 (Debian 14.4-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit
</span></span><span class="line"><span class="cl">(1 row)
</span></span></code></pre></div><ol start="2">
<li>另外，执行\o [ filename ]命令可以将之后的所有查询结果和命令返回信息保存到指定文件，默认为标准输出。例如：
<ul>
<li>前两个 select 语句的结果打印到了 result.txt 文件中，然后又将查询结果定向为标准输出。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \o result.txt
</span></span><span class="line"><span class="cl">shoping=# select * from dept;
</span></span><span class="line"><span class="cl">shoping=# select 1+1;
</span></span><span class="line"><span class="cl">shoping=# \o
</span></span><span class="line"><span class="cl">shoping=#
</span></span><span class="line"><span class="cl">shoping=# \! cat result.txt
</span></span><span class="line"><span class="cl"> department_id | department_name 
</span></span><span class="line"><span class="cl">---------------+-----------------
</span></span><span class="line"><span class="cl">            10 | Administration
</span></span><span class="line"><span class="cl">            20 | Marketing
</span></span><span class="line"><span class="cl">(2 rows)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> ?column? 
</span></span><span class="line"><span class="cl">----------
</span></span><span class="line"><span class="cl">        2
</span></span><span class="line"><span class="cl">(1 row)
</span></span></code></pre></div><ol start="3">
<li>还有一个\copy &hellip;命令可以用于将表或者查询结果保存到指定文件中，或者从指定文件中读取内容到表中。例如：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping-# \copy dept to dept.txt
</span></span><span class="line"><span class="cl">COPY 2
</span></span><span class="line"><span class="cl">shoping-# 
</span></span><span class="line"><span class="cl">shoping-# \! cat dept.txt
</span></span><span class="line"><span class="cl">10      Administration
</span></span><span class="line"><span class="cl">20      Marketing
</span></span></code></pre></div>

<p><details >
  <summary markdown="span">\copy</summary>
  <blockquote>
<ol>
<li>导入数据到表中：
<ul>
<li>其中，table_name是目标表的名称，file_path是数据文件的路径，delimiter是字段之间的分隔符。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">COPY table_name FROM </span><span class="err">&#39;</span><span class="k">file_path</span><span class="err">&#39;</span> <span class="err">[</span><span class="k">DELIMITER </span><span class="err">&#39;</span><span class="k">delimiter</span><span class="err">&#39;]</span>
</span></span></code></pre></div><ol start="2">
<li>导出数据到文件：
<ul>
<li>这个命令将表中的数据导出到指定的文件路径。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">COPY table_name TO </span><span class="err">&#39;</span><span class="k">file_path</span><span class="err">&#39;</span> <span class="err">[</span><span class="k">DELIMITER </span><span class="err">&#39;</span><span class="k">delimiter</span><span class="err">&#39;]</span>
</span></span></code></pre></div><ol start="3">
<li>导入数据到表中（使用STDIN）：
<ul>
<li>这个命令从标准输入读取数据，并将其导入到表中。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ebnf" data-lang="ebnf"><span class="line"><span class="cl"><span class="k">COPY table_name FROM STDIN </span><span class="err">[</span><span class="k">DELIMITER </span><span class="err">&#39;</span><span class="k">delimiter</span><span class="err">&#39;]</span>
</span></span></code></pre></div><ol start="4">
<li>导出数据到STDOUT：
<ul>
<li>这个命令将表中的数据输出到标准输出。</li>
</ul>
</li>
</ol>
<pre tabindex="0"><code class="language-copy" data-lang="copy">COPY table_name TO STDOUT [DELIMITER &#39;delimiter&#39;]
</code></pre><ol start="5">
<li>COPY命令支持的文件类型包括TXT、CSV、SQL、压缩文件和二进制格式。它适合批量导入数据，速度较快。需要注意的是，COPY命令只能用于表，不能用于视图。</li>
</ol>
</blockquote>

</details></p>

<h3 id="重复执行语句">重复执行语句<a hidden class="anchor" aria-hidden="true" href="#重复执行语句">#</a></h3>
<ol>
<li><code>\watch [SEC]</code>命令可以用于每隔指定秒数（默认 2 秒）执行一次 SQL 语句。例如：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=#  SELECT now() \watch 5
</span></span><span class="line"><span class="cl">Sun 22 Sep 2024 11:23:05 PM CST (every 5s)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              now              
</span></span><span class="line"><span class="cl">-------------------------------
</span></span><span class="line"><span class="cl"> 2024-09-22 15:23:05.777741+00
</span></span><span class="line"><span class="cl">(1 row)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Sun 22 Sep 2024 11:23:10 PM CST (every 5s)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              now              
</span></span><span class="line"><span class="cl">-------------------------------
</span></span><span class="line"><span class="cl"> 2024-09-22 15:23:10.789936+00
</span></span><span class="line"><span class="cl">(1 row)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Sun 22 Sep 2024 11:23:15 PM CST (every 5s)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              now              
</span></span><span class="line"><span class="cl">-------------------------------
</span></span><span class="line"><span class="cl"> 2024-09-22 15:23:15.797624+00
</span></span><span class="line"><span class="cl">(1 row)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Sun 22 Sep 2024 11:23:20 PM CST (every 5s)
</span></span></code></pre></div><h3 id="显示清空查询缓冲区">显示/清空查询缓冲区<a hidden class="anchor" aria-hidden="true" href="#显示清空查询缓冲区">#</a></h3>
<ol>
<li>输入<code>\p</code>命令可以显示当前缓冲区或者最近一次执行的命令：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \p
</span></span><span class="line"><span class="cl">select 1+1;
</span></span></code></pre></div><ol start="2">
<li>输入<code>\r</code>命令可以清空当前缓冲区中的内容：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \r
</span></span><span class="line"><span class="cl">Query buffer reset (cleared).
</span></span></code></pre></div><h3 id="执行上一次命令">执行上一次命令<a hidden class="anchor" aria-hidden="true" href="#执行上一次命令">#</a></h3>
<ol>
<li>直接输入没有参数的<code>\g</code>命令表示再次执行查询缓冲区中的命令或者上一次执行的语句。例如：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# select * from dept;
</span></span><span class="line"><span class="cl"> department_id | department_name 
</span></span><span class="line"><span class="cl">---------------+-----------------
</span></span><span class="line"><span class="cl">            10 | Administration
</span></span><span class="line"><span class="cl">            20 | Marketing
</span></span><span class="line"><span class="cl">(2 rows)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shoping=# \g
</span></span><span class="line"><span class="cl"> department_id | department_name 
</span></span><span class="line"><span class="cl">---------------+-----------------
</span></span><span class="line"><span class="cl">            10 | Administration
</span></span><span class="line"><span class="cl">            20 | Marketing
</span></span><span class="line"><span class="cl">(2 rows)
</span></span></code></pre></div><h3 id="查看保存命令历史">查看/保存命令历史<a hidden class="anchor" aria-hidden="true" href="#查看保存命令历史">#</a></h3>
<ol>
<li><code>\s [ filename ]</code>命令用于将历史命令保存到文件中，如果省略 filename 则显示到终端。例如：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \s
</span></span><span class="line"><span class="cl">\c
</span></span><span class="line"><span class="cl">\du
</span></span><span class="line"><span class="cl">CREATE ROLE admin CREATEDB CREATEROLE;
</span></span><span class="line"><span class="cl">su
</span></span><span class="line"><span class="cl">postgres
</span></span><span class="line"><span class="cl">exit
</span></span><span class="line"><span class="cl">CREATE ROLE admin CREATEDB CREATEROLE;
</span></span><span class="line"><span class="cl">CREATE ROLE admin CREATEDB CREATEROLE;
</span></span><span class="line"><span class="cl">\c
</span></span><span class="line"><span class="cl">\c
</span></span></code></pre></div><h3 id="显示语句执行时间">显示语句执行时间<a hidden class="anchor" aria-hidden="true" href="#显示语句执行时间">#</a></h3>
<ol>
<li><code>\timing [ on | off ]</code>命令可以用于显示或者关闭 SQL 语句的执行时间，单位为毫秒。例如：
<ul>
<li>不指定参数的\timing命令可以在 on 和 off 之间切换。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \timing on
</span></span><span class="line"><span class="cl">Timing is on.
</span></span><span class="line"><span class="cl">shoping=# select * from dept;
</span></span><span class="line"><span class="cl"> department_id | department_name 
</span></span><span class="line"><span class="cl">---------------+-----------------
</span></span><span class="line"><span class="cl">            10 | Administration
</span></span><span class="line"><span class="cl">            20 | Marketing
</span></span><span class="line"><span class="cl">(2 rows)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Time: 0.655 ms
</span></span><span class="line"><span class="cl">shoping=# \timing
</span></span><span class="line"><span class="cl">Timing is off.
</span></span></code></pre></div><h3 id="设置输出格式">设置输出格式<a hidden class="anchor" aria-hidden="true" href="#设置输出格式">#</a></h3>
<ol>
<li><code>\pset [ option [ value ] ]</code>命令可以用于显示或者设置与查询结果输出相关的选项。例如：(返回了当前的选项设置)</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \pset
</span></span><span class="line"><span class="cl">border                   1
</span></span><span class="line"><span class="cl">columns                  0
</span></span><span class="line"><span class="cl">csv_fieldsep             &#39;,&#39;
</span></span><span class="line"><span class="cl">expanded                 off
</span></span><span class="line"><span class="cl">fieldsep                 &#39;|&#39;
</span></span><span class="line"><span class="cl">fieldsep_zero            off
</span></span><span class="line"><span class="cl">footer                   on
</span></span><span class="line"><span class="cl">format                   aligned
</span></span><span class="line"><span class="cl">linestyle                ascii
</span></span><span class="line"><span class="cl">null                     &#39;&#39;
</span></span><span class="line"><span class="cl">numericlocale            off
</span></span><span class="line"><span class="cl">pager                    1
</span></span><span class="line"><span class="cl">pager_min_lines          0
</span></span><span class="line"><span class="cl">recordsep                &#39;\n&#39;
</span></span><span class="line"><span class="cl">recordsep_zero           off
</span></span><span class="line"><span class="cl">tableattr                
</span></span><span class="line"><span class="cl">title                    
</span></span><span class="line"><span class="cl">tuples_only              off
</span></span><span class="line"><span class="cl">unicode_border_linestyle single
</span></span><span class="line"><span class="cl">unicode_column_linestyle single
</span></span><span class="line"><span class="cl">unicode_header_linestyle single
</span></span></code></pre></div><h3 id="执行脚本文件">执行脚本文件<a hidden class="anchor" aria-hidden="true" href="#执行脚本文件">#</a></h3>
<ol>
<li><code>\i filename</code>命令用于读取文件并执行其中的命令。在操作系统当前目录中创建一个脚本文件 test.sql，输入以下语句：</li>
</ol>
<h2 id="查看数据库对象信息">查看数据库对象信息<a hidden class="anchor" aria-hidden="true" href="#查看数据库对象信息">#</a></h2>
<ol>
<li>psql 提供了大量用于查看数据库对象信息的元命令，绝大多数以 \d 开头。其中很多命令支持额外的 S 后缀，用于显示系统对象，否则只显示当前用户拥有访问权限的对象；或者额外的 + 后缀，用于显示额外的信息。</li>
</ol>
<h3 id="查看角色和用户">查看角色和用户<a hidden class="anchor" aria-hidden="true" href="#查看角色和用户">#</a></h3>
<ol>
<li><code>\du[S+] [ pattern ]</code>或者<code>\dg[S+] [ pattern ]</code>命令用于列出用户创建的角色、用户和组。例如：</li>
<li>如果指定了 S 选项，同时会显示系统创建的角色；如果指定了 + 选项，还会显示额外的描述信息；如果指定了 pattern，只有名称匹配指定模式的角色才会显示。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \duS
</span></span><span class="line"><span class="cl">                                                                     List of roles
</span></span><span class="line"><span class="cl">         Role name         |                         Attributes                         |                          Member of                           
</span></span><span class="line"><span class="cl">---------------------------+------------------------------------------------------------+--------------------------------------------------------------
</span></span><span class="line"><span class="cl"> admin                     | Create role, Create DB, Cannot login                       | {}
</span></span><span class="line"><span class="cl"> pg_database_owner         | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_execute_server_program | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_monitor                | Cannot login                                               | {pg_read_all_settings,pg_read_all_stats,pg_stat_scan_tables}
</span></span><span class="line"><span class="cl"> pg_read_all_data          | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_read_all_settings      | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_read_all_stats         | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_read_server_files      | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_signal_backend         | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_stat_scan_tables       | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_write_all_data         | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> pg_write_server_files     | Cannot login                                               | {}
</span></span><span class="line"><span class="cl"> postgres                  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}
</span></span><span class="line"><span class="cl"> tony                      | Password valid until 2025-01-01 00:00:00+00                | {}
</span></span></code></pre></div><h3 id="查看数据库">查看数据库<a hidden class="anchor" aria-hidden="true" href="#查看数据库">#</a></h3>
<ol>
<li><code>\l[+] [pattern]</code>命令用于列出系统中的所有数据库。例如：</li>
<li>如果指定 + 选项，还会显示额外的数据库大小、默认表空间和描述信息；如果指定了 pattern，只有名称匹配指定模式的数据库才会显示。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \l
</span></span><span class="line"><span class="cl">                                 List of databases
</span></span><span class="line"><span class="cl">   Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   
</span></span><span class="line"><span class="cl">-----------+----------+----------+------------+------------+-----------------------
</span></span><span class="line"><span class="cl"> postgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 | 
</span></span><span class="line"><span class="cl"> shoping   | postgres | UTF8     | en_US.utf8 | en_US.utf8 | 
</span></span><span class="line"><span class="cl"> template0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
</span></span><span class="line"><span class="cl">           |          |          |            |            | postgres=CTc/postgres
</span></span><span class="line"><span class="cl"> template1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
</span></span><span class="line"><span class="cl">           |          |          |            |            | postgres=CTc/postgres
</span></span><span class="line"><span class="cl">(4 rows)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shoping=# \l+
</span></span><span class="line"><span class="cl">                                                                   List of databases
</span></span><span class="line"><span class="cl">   Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   |  Size   | Tablespace |                Description                 
</span></span><span class="line"><span class="cl">-----------+----------+----------+------------+------------+-----------------------+---------+------------+--------------------------------------------
</span></span><span class="line"><span class="cl"> postgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 |                       | 8553 kB | pg_default | default administrative connection database
</span></span><span class="line"><span class="cl"> shoping   | postgres | UTF8     | en_US.utf8 | en_US.utf8 |                       | 8921 kB | pg_default | 
</span></span><span class="line"><span class="cl"> template0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +| 8401 kB | pg_default | unmodifiable empty database
</span></span><span class="line"><span class="cl">           |          |          |            |            | postgres=CTc/postgres |         |            | 
</span></span><span class="line"><span class="cl"> template1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +| 8401 kB | pg_default | default template for new databases
</span></span><span class="line"><span class="cl">           |          |          |            |            | postgres=CTc/postgres |         |            | 
</span></span><span class="line"><span class="cl">(4 rows)
</span></span></code></pre></div><h3 id="查看模式">查看模式<a hidden class="anchor" aria-hidden="true" href="#查看模式">#</a></h3>
<ol>
<li><code>\dn[S+] [ pattern ]</code>命令用于列出当前数据库中的所有模式（schema）。例如：</li>
<li>如果指定了 S 选项，同时会显示系统模式；如果指定了 + 选项，还会显示额外的授权信息和描述；如果指定了 pattern，只有名称匹配指定模式的 schema 才会显示。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \dn
</span></span><span class="line"><span class="cl">  List of schemas
</span></span><span class="line"><span class="cl">  Name  |  Owner   
</span></span><span class="line"><span class="cl">--------+----------
</span></span><span class="line"><span class="cl"> public | postgres
</span></span><span class="line"><span class="cl">(1 row)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shoping=# \dnS
</span></span><span class="line"><span class="cl">        List of schemas
</span></span><span class="line"><span class="cl">        Name        |  Owner   
</span></span><span class="line"><span class="cl">--------------------+----------
</span></span><span class="line"><span class="cl"> information_schema | postgres
</span></span><span class="line"><span class="cl"> pg_catalog         | postgres
</span></span><span class="line"><span class="cl"> pg_toast           | postgres
</span></span><span class="line"><span class="cl"> public             | postgres
</span></span><span class="line"><span class="cl">(4 rows)
</span></span></code></pre></div><h3 id="查看表空间">查看表空间<a hidden class="anchor" aria-hidden="true" href="#查看表空间">#</a></h3>
<ol>
<li><code>\db[+] [ pattern ]</code>命令用于列出系统中的所有表空间。例如：</li>
<li>如果指定了 + 选项，还会显示额外的选项、空间大小、授权信息和描述；如果指定了 pattern，只有名称匹配指定模式的表空间才会显示。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \db
</span></span><span class="line"><span class="cl">       List of tablespaces
</span></span><span class="line"><span class="cl">    Name    |  Owner   | Location 
</span></span><span class="line"><span class="cl">------------+----------+----------
</span></span><span class="line"><span class="cl"> pg_default | postgres | 
</span></span><span class="line"><span class="cl"> pg_global  | postgres | 
</span></span><span class="line"><span class="cl">(2 rows)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shoping=# \db+
</span></span><span class="line"><span class="cl">                                  List of tablespaces
</span></span><span class="line"><span class="cl">    Name    |  Owner   | Location | Access privileges | Options |  Size  | Description 
</span></span><span class="line"><span class="cl">------------+----------+----------+-------------------+---------+--------+-------------
</span></span><span class="line"><span class="cl"> pg_default | postgres |          |                   |         | 33 MB  | 
</span></span><span class="line"><span class="cl"> pg_global  | postgres |          |                   |         | 560 kB | 
</span></span><span class="line"><span class="cl">(2 rows)
</span></span></code></pre></div><h3 id="查看表">查看表<a hidden class="anchor" aria-hidden="true" href="#查看表">#</a></h3>
<ol>
<li><code>\dt[S+] [ pattern ]</code>命令用于列出所有的数据表。例如：</li>
<li>如果指定了 S 选项，同时会显示系统表；如果指定了 + 选项，还会显示额外的大小和描述信息；如果指定了 pattern，只有名称匹配指定模式的表才会显示。</li>
<li>另外，<code>\d[S+] [ pattern ]</code>命令可以同时列出表、视图、物化视图、索引、序列以及外部表的信息，等价于<code>\dtvmsE[S+] [ pattern ]</code>命令。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \dt+
</span></span><span class="line"><span class="cl">                                        List of relations
</span></span><span class="line"><span class="cl"> Schema |    Name     | Type  |  Owner   | Persistence | Access method |    Size    | Description 
</span></span><span class="line"><span class="cl">--------+-------------+-------+----------+-------------+---------------+------------+-------------
</span></span><span class="line"><span class="cl"> public | departments | table | postgres | permanent   | heap          | 8192 bytes | 
</span></span><span class="line"><span class="cl"> public | dept        | table | postgres | permanent   | heap          | 8192 bytes | 
</span></span><span class="line"><span class="cl"> public | emp         | table | postgres | permanent   | heap          | 0 bytes    | 
</span></span><span class="line"><span class="cl"> public | employees   | table | postgres | permanent   | heap          | 40 kB      | 
</span></span><span class="line"><span class="cl"> public | jobs        | table | postgres | permanent   | heap          | 8192 bytes | 
</span></span><span class="line"><span class="cl"> public | sales       | table | postgres | permanent   | heap          | 8192 bytes | 
</span></span><span class="line"><span class="cl"> public | tbl_char    | table | postgres | permanent   | heap          | 8192 bytes | 
</span></span><span class="line"><span class="cl">(7 rows)
</span></span></code></pre></div><h3 id="查看索引">查看索引<a hidden class="anchor" aria-hidden="true" href="#查看索引">#</a></h3>
<ol>
<li><code>\di[S+] [ pattern ]</code>命令用于列出所有的索引。例如：</li>
<li>如果指定了 S 选项，同时会显示系统表上的索引；如果指定了 + 选项，还会显示额外的大小和描述信息；如果指定了 pattern，只有名称匹配指定模式的索引才会显示。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \di
</span></span><span class="line"><span class="cl">                      List of relations
</span></span><span class="line"><span class="cl"> Schema |       Name        | Type  |  Owner   |    Table    
</span></span><span class="line"><span class="cl">--------+-------------------+-------+----------+-------------
</span></span><span class="line"><span class="cl"> public | dept_id_pk        | index | postgres | departments
</span></span><span class="line"><span class="cl"> public | dept_location_ix  | index | postgres | departments
</span></span><span class="line"><span class="cl"> public | dept_pkey         | index | postgres | dept
</span></span><span class="line"><span class="cl"> public | emp_department_ix | index | postgres | employees
</span></span><span class="line"><span class="cl"> public | emp_email_uk      | index | postgres | employees
</span></span><span class="line"><span class="cl"> public | emp_emp_id_pk     | index | postgres | employees
</span></span><span class="line"><span class="cl"> public | emp_job_ix        | index | postgres | employees
</span></span><span class="line"><span class="cl"> public | emp_manager_ix    | index | postgres | employees
</span></span><span class="line"><span class="cl"> public | emp_name_ix       | index | postgres | employees
</span></span><span class="line"><span class="cl"> public | emp_pkey          | index | postgres | emp
</span></span><span class="line"><span class="cl"> public | job_id_pk         | index | postgres | jobs
</span></span><span class="line"><span class="cl">(11 rows)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shoping=# \di+
</span></span><span class="line"><span class="cl">                                                  List of relations
</span></span><span class="line"><span class="cl"> Schema |       Name        | Type  |  Owner   |    Table    | Persistence | Access method |    Size    | Description 
</span></span><span class="line"><span class="cl">--------+-------------------+-------+----------+-------------+-------------+---------------+------------+-------------
</span></span><span class="line"><span class="cl"> public | dept_id_pk        | index | postgres | departments | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | dept_location_ix  | index | postgres | departments | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | dept_pkey         | index | postgres | dept        | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | emp_department_ix | index | postgres | employees   | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | emp_email_uk      | index | postgres | employees   | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | emp_emp_id_pk     | index | postgres | employees   | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | emp_job_ix        | index | postgres | employees   | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | emp_manager_ix    | index | postgres | employees   | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | emp_name_ix       | index | postgres | employees   | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl"> public | emp_pkey          | index | postgres | emp         | permanent   | btree         | 8192 bytes | 
</span></span><span class="line"><span class="cl"> public | job_id_pk         | index | postgres | jobs        | permanent   | btree         | 16 kB      | 
</span></span><span class="line"><span class="cl">(11 rows)
</span></span></code></pre></div><h3 id="查看序列">查看序列<a hidden class="anchor" aria-hidden="true" href="#查看序列">#</a></h3>
<ol>
<li><code>\ds[S+] [ pattern ]</code>命令用于列出所有的序列。例如：</li>
<li>如果指定了 S 选项，同时会显示系统创建的序列；如果指定了 + 选项，还会显示额外的大小和描述信息；如果指定了 pattern，只有名称匹配指定模式的序列才会显示。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">hrdb=&gt; \ds
</span></span><span class="line"><span class="cl">                  List of relations
</span></span><span class="line"><span class="cl"> Schema |           Name           |   Type   | Owner 
</span></span><span class="line"><span class="cl">--------+--------------------------+----------+-------
</span></span><span class="line"><span class="cl"> public | accounts_id_seq          | sequence | tony
</span></span><span class="line"><span class="cl"> public | employees_history_id_seq | sequence | tony
</span></span><span class="line"><span class="cl"> public | users_id_seq             | sequence | tony
</span></span><span class="line"><span class="cl">(3 rows)
</span></span></code></pre></div><h3 id="查看编辑视图">查看/编辑视图<a hidden class="anchor" aria-hidden="true" href="#查看编辑视图">#</a></h3>
<ol>
<li><code>\dv[S+] [ pattern ]</code>命令用于列出所有的视图。例如：</li>
<li>如果指定了 S 选项，同时会显示系统创建的视图；如果指定了 + 选项，还会显示额外的大小和描述信息；如果指定了 pattern，只有名称匹配指定模式的视图才会显示。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \dv
</span></span><span class="line"><span class="cl">              List of relations
</span></span><span class="line"><span class="cl"> Schema |       Name       | Type |  Owner   
</span></span><span class="line"><span class="cl">--------+------------------+------+----------
</span></span><span class="line"><span class="cl"> public | emp_details_view | view | postgres
</span></span><span class="line"><span class="cl">(1 row)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shoping=# \dv+
</span></span><span class="line"><span class="cl">                                 List of relations
</span></span><span class="line"><span class="cl"> Schema |       Name       | Type |  Owner   | Persistence |  Size   | Description 
</span></span><span class="line"><span class="cl">--------+------------------+------+----------+-------------+---------+-------------
</span></span><span class="line"><span class="cl"> public | emp_details_view | view | postgres | permanent   | 0 bytes | 
</span></span><span class="line"><span class="cl">(1 row)
</span></span></code></pre></div><ol start="3">
<li><code>\sv[+] view_name</code>命令用于显示视图的定义语句。例如：
<ul>
<li>如果指定了 + 选项，同时会显示行号（从 1 开始）。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">shoping=# \sv emp_details_view
</span></span><span class="line"><span class="cl">CREATE OR REPLACE VIEW public.emp_details_view AS
</span></span><span class="line"><span class="cl"> SELECT e.employee_id,
</span></span><span class="line"><span class="cl">    e.job_id,
</span></span><span class="line"><span class="cl">    e.manager_id,
</span></span><span class="line"><span class="cl">    e.department_id,
</span></span><span class="line"><span class="cl">    d.location_id,
</span></span><span class="line"><span class="cl">    e.first_name,
</span></span><span class="line"><span class="cl">    e.last_name,
</span></span><span class="line"><span class="cl">    e.salary,
</span></span><span class="line"><span class="cl">    e.commission_pct,
</span></span><span class="line"><span class="cl">    d.department_name,
</span></span><span class="line"><span class="cl">    j.job_title
</span></span><span class="line"><span class="cl">   FROM employees e,
</span></span><span class="line"><span class="cl">    departments d,
</span></span><span class="line"><span class="cl">    jobs j
</span></span><span class="line"><span class="cl">  WHERE e.department_id = d.department_id AND j.job_id::text = e.job_id::text
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://heliu.site/tags/pgsql/">Pgsql</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://heliu.site/posts/postgresql/install/">
    <span class="title">« 上一页</span>
    <br>
    <span>安装</span>
  </a>
  <a class="next" href="https://heliu.site/posts/postgresql/user-role/">
    <span class="title">下一页 »</span>
    <br>
    <span>用户和角色</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    
    <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv">
        本站总访问量<span id="busuanzi_value_site_pv"></span>次
    </span>
    <span id="busuanzi_container_site_uv">
        本站访客数<span id="busuanzi_value_site_uv"></span>人次
    </span>
    </div>
        <span>Copyright © 2024 蜀ICP备2024091074号 <a href="#">heliu's blog</a>. All rights reserved</span>  
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'Copy';

        function copyingDone() {
            copybutton.innerHTML = 'Done';
            setTimeout(() => {
                copybutton.innerHTML = 'Copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
